{"ast":null,"code":"import _defineProperty from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/leitan/Developer/whatsroaring/src/Pages/Register.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'; // Material-UI\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack'; // Local\n\nimport Theme from '../Assets/Theme';\nimport Header from './Components/Header';\nimport './Form.css';\n\nvar axios = require('axios');\n\nvar url = 'https://whatsroaring-api.herokuapp.com/'; //const url ='http://127.0.0.1:8000/'\n\nfunction isValidEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction scorePassword(pass) {\n  var score = 0;\n  if (!pass) return score; // award every unique letter until 5 repetitions\n\n  var letters = new Object();\n\n  for (var i = 0; i < pass.length; i++) {\n    letters[pass[i]] = (letters[pass[i]] || 0) + 1;\n    score += 5.0 / letters[pass[i]];\n  } // bonus points for mixing it up\n\n\n  var variations = {\n    digits: /\\d/.test(pass),\n    lower: /[a-z]/.test(pass),\n    upper: /[A-Z]/.test(pass),\n    nonWords: /\\W/.test(pass)\n  };\n  variationCount = 0;\n\n  for (var check in variations) {\n    variationCount += variations[check] == true ? 1 : 0;\n  }\n\n  score += (variationCount - 1) * 10;\n  return parseInt(score);\n}\n\nfunction checkPassStrength(pass) {\n  var score = scorePassword(pass);\n  if (score > 80) return \"strong\";\n  if (score > 60) return \"good\";\n  if (score >= 30) return \"weak\";\n  return \"\";\n}\n\nvar Register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Register, _Component);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Register).call(this, props));\n\n    _this.goToLanding = function () {\n      _this.props.history.push('/');\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleCloseSuccessDialog = function () {\n      _this.setState({\n        openSuccessDialog: false\n      });\n\n      _this.props.history.push('/');\n    };\n\n    _this.handleCloseMissingFieldsDialog = function () {\n      _this.setState({\n        openMissingFieldsDialog: false\n      });\n    };\n\n    _this.handleCloseFieldsTooLongDialog = function () {\n      _this.setState({\n        openFieldTooLongDialog: false\n      });\n    };\n\n    _this.handleCloseConfirmPasswordErrorDialog = function () {\n      _this.setState({\n        openConfirmPasswordErrorDialog: false\n      });\n    };\n\n    _this.handleCloseServerErrorDialog = function () {\n      _this.setState({\n        openServerErrorDialog: false\n      });\n    };\n\n    _this.handleCloseDuplicateUserDialog = function () {\n      _this.setState({\n        openDuplicateUserDialog: false\n      });\n    };\n\n    _this.handleCloseInvalidEmailDialog = function () {\n      _this.setState({\n        openInvalidEmailDialog: false\n      });\n    };\n\n    _this.submit = function () {\n      var url_user = url + 'addUser';\n      console.log('First Name: ' + _this.state.firstName);\n      console.log('Last Name: ' + _this.state.lastName);\n      console.log('Email Address: ' + _this.state.email); //console.log('Password: ' + this.state.password)\n      //console.log('Confirm Password: ' + this.state.confirmPassword)\n      // Check fields\n\n      var errors = [];\n\n      if (!_this.state.firstName.replace(/\\s/g, '').length) {\n        errors.push('first name');\n      }\n\n      if (!_this.state.lastName.replace(/\\s/g, '').length) {\n        errors.push('last name');\n      }\n\n      if (!_this.state.email.replace(/\\s/g, '').length) {\n        errors.push('email address');\n      }\n\n      if (!_this.state.password.replace(/\\s/g, '').length) {\n        errors.push('password');\n      }\n\n      if (!_this.state.confirmPassword.replace(/\\s/g, '').length) {\n        errors.push('confirm password');\n      }\n\n      var tooLongErrors = [];\n      console.log(_this.state.firstName.length);\n\n      if (_this.state.firstName.length > 100) {\n        tooLongErrors.push('first name');\n      }\n\n      if (_this.state.lastName.length > 100) {\n        tooLongErrors.push('last name');\n      }\n\n      if (_this.state.email.length > 100) {\n        tooLongErrors.push('email');\n      }\n\n      if (_this.state.password.length > 100) {\n        tooLongErrors.push('password');\n      }\n\n      if (errors.length > 0) {\n        // Missing fields\n        _this.setState({\n          missingFields: errors,\n          openMissingFieldsDialog: true\n        });\n      } else if (tooLongErrors.length > 0) {\n        _this.setState({\n          fieldsTooLong: tooLongErrors,\n          openFieldTooLongDialog: true\n        });\n      } else if (!isValidEmail(_this.state.email)) {\n        _this.setState({\n          openInvalidEmailDialog: true\n        });\n      } else if (_this.state.password.localeCompare(_this.state.confirmPassword) != 0) {\n        // Confirm password does not match password\n        _this.setState({\n          openConfirmPasswordErrorDialog: true\n        });\n      } else {\n        axios.post(url_user, {\n          params: {\n            first_name: _this.state.firstName,\n            last_name: _this.state.lastName,\n            email: _this.state.email,\n            password: _this.state.password\n          }\n        }).then(function (response) {\n          if (response.data === 'Created user') {\n            _this.setState({\n              openSuccessDialog: true\n            });\n          } else if (response.data === 'Duplicate user') {\n            _this.setState({\n              openDuplicateUserDialog: true\n            });\n          } else {\n            _this.setState({\n              openServerErrorDialog: true\n            });\n          }\n        }).catch(function (error) {\n          _this.setState({\n            openServerErrorDialog: true\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      missingFields: [],\n      fieldsTooLong: [],\n      openSuccessDialog: false,\n      openMissingFieldsDialog: false,\n      openConfirmPasswordErrorDialog: false,\n      openServerErrorDialog: false,\n      openDuplicateUserDialog: false,\n      openInvalidEmailDialog: false,\n      openFieldTooLongDialog: false\n    };\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"renderDialogs\",\n    value: function renderDialogs() {\n      return React.createElement(\"div\", {\n        className: \"dialogs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(Dialog, {\n        open: this.state.openSuccessDialog,\n        onClose: this.handleCloseSuccessDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, 'Success'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"You have successfully registered your account.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseSuccessDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openMissingFieldsDialog,\n        onClose: this.handleCloseMissingFieldsDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, 'Missing Fields'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"The following fields are missing: \", this.state.missingFields.join(', '))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseMissingFieldsDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openFieldTooLongDialog,\n        onClose: this.handleCloseFieldsTooLongDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, 'Input Error'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Please limit the following fields to 100 characters or fewer: \", this.state.fieldsTooLong.join(', '))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseFieldsTooLongDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openConfirmPasswordErrorDialog,\n        onClose: this.handleCloseConfirmPasswordErrorDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, 'Confirm Password'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"Please confirm password.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseConfirmPasswordErrorDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openServerErrorDialog,\n        onClose: this.handleCloseServerErrorDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, 'Server Error'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"There was an error registering your account. Please contact the administrative team for help.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseServerErrorDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openDuplicateUserDialog,\n        onClose: this.handleCloseDuplicateUserDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, 'Account Already Exists'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"A user with this email address already exists.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseDuplicateUserDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openInvalidEmailDialog,\n        onClose: this.handleCloseInvalidEmailDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, 'Invalid Email'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"Please enter a valid email address (e.g., \\\"janedoe@email.com\\\")\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseInvalidEmailDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \"OK\"))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }), React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, this.renderDialogs(), React.createElement(IconButton, {\n        color: \"primary\",\n        onClick: this.goToLanding,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(ArrowBack, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: \"paper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h3\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, \"Register\")), React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true,\n        label: \"First Name\",\n        className: \"textField\",\n        value: this.state.firstName,\n        onChange: this.handleChange('firstName'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        error: this.state.firstName.length > 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        label: \"Last Name\",\n        className: \"textField\",\n        value: this.state.lastName,\n        onChange: this.handleChange('lastName'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        error: this.state.lastName.length > 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        label: \"Email Address\",\n        className: \"textField\",\n        value: this.state.email,\n        onChange: this.handleChange('email'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        error: this.state.email.length > 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        label: \"Password\",\n        className: \"textField\",\n        value: this.state.password,\n        onChange: this.handleChange('password'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        type: \"password\",\n        error: this.state.password.length > 100,\n        helperText: 'strength',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        label: \"Confirm Password\",\n        className: \"textField\",\n        value: this.state.confirmPassword,\n        onChange: this.handleChange('confirmPassword'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.submit,\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, \"Register\"))))));\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nexport default withRouter(Register);","map":{"version":3,"sources":["/Users/leitan/Developer/whatsroaring/src/Pages/Register.js"],"names":["React","Component","withRouter","MuiThemeProvider","Paper","Typography","TextField","FormControl","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","IconButton","ArrowBack","Theme","Header","axios","require","url","isValidEmail","email","re","test","String","toLowerCase","scorePassword","pass","score","letters","Object","i","length","variations","digits","lower","upper","nonWords","variationCount","check","parseInt","checkPassStrength","Register","props","goToLanding","history","push","handleChange","name","event","setState","target","value","handleCloseSuccessDialog","openSuccessDialog","handleCloseMissingFieldsDialog","openMissingFieldsDialog","handleCloseFieldsTooLongDialog","openFieldTooLongDialog","handleCloseConfirmPasswordErrorDialog","openConfirmPasswordErrorDialog","handleCloseServerErrorDialog","openServerErrorDialog","handleCloseDuplicateUserDialog","openDuplicateUserDialog","handleCloseInvalidEmailDialog","openInvalidEmailDialog","submit","url_user","console","log","state","firstName","lastName","errors","replace","password","confirmPassword","tooLongErrors","missingFields","fieldsTooLong","localeCompare","post","params","first_name","last_name","then","response","data","catch","error","join","renderDialogs"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\n\n// Material-UI\nimport { MuiThemeProvider } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport FormControl from '@material-ui/core/FormControl'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\n\n// Local\nimport Theme from '../Assets/Theme'\nimport Header from './Components/Header'\nimport './Form.css'\n\nconst axios = require('axios')\nconst url = 'https://whatsroaring-api.herokuapp.com/'\n//const url ='http://127.0.0.1:8000/'\n\nfunction isValidEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase())\n}\n\nfunction scorePassword(pass) {\n    var score = 0;\n    if (!pass)\n        return score;\n\n    // award every unique letter until 5 repetitions\n    var letters = new Object();\n    for (var i=0; i<pass.length; i++) {\n        letters[pass[i]] = (letters[pass[i]] || 0) + 1;\n        score += 5.0 / letters[pass[i]];\n    }\n\n    // bonus points for mixing it up\n    var variations = {\n        digits: /\\d/.test(pass),\n        lower: /[a-z]/.test(pass),\n        upper: /[A-Z]/.test(pass),\n        nonWords: /\\W/.test(pass),\n    }\n\n    variationCount = 0;\n    for (var check in variations) {\n        variationCount += (variations[check] == true) ? 1 : 0;\n    }\n    score += (variationCount - 1) * 10;\n\n    return parseInt(score);\n}\n\nfunction checkPassStrength(pass) {\n    var score = scorePassword(pass);\n    if (score > 80)\n        return \"strong\";\n    if (score > 60)\n        return \"good\";\n    if (score >= 30)\n        return \"weak\";\n    return \"\";\n}\n\nclass Register extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      missingFields: [],\n      fieldsTooLong: [],\n      openSuccessDialog: false,\n      openMissingFieldsDialog: false,\n      openConfirmPasswordErrorDialog: false,\n      openServerErrorDialog: false,\n      openDuplicateUserDialog: false,\n      openInvalidEmailDialog: false,\n      openFieldTooLongDialog: false,\n    }\n  }\n\n  goToLanding = () => {\n    this.props.history.push('/')\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    })\n  }\n\n  handleCloseSuccessDialog = () => {\n    this.setState({ openSuccessDialog: false })\n    this.props.history.push('/')\n  }\n\n  handleCloseMissingFieldsDialog = () => {\n    this.setState({ openMissingFieldsDialog: false })\n  }\n\n  handleCloseFieldsTooLongDialog = () => {\n    this.setState({ openFieldTooLongDialog: false })\n  }\n\n  handleCloseConfirmPasswordErrorDialog = () => {\n    this.setState({ openConfirmPasswordErrorDialog: false })\n  }\n\n  handleCloseServerErrorDialog = () => {\n    this.setState({ openServerErrorDialog: false })\n  }\n\n  handleCloseDuplicateUserDialog = () => {\n    this.setState({ openDuplicateUserDialog: false })\n  }\n\n  handleCloseInvalidEmailDialog = () => {\n    this.setState({ openInvalidEmailDialog: false })\n  }\n\n  submit = () => {\n    var url_user = url + 'addUser'\n    console.log('First Name: ' + this.state.firstName)\n    console.log('Last Name: ' + this.state.lastName)\n    console.log('Email Address: ' + this.state.email)\n    //console.log('Password: ' + this.state.password)\n    //console.log('Confirm Password: ' + this.state.confirmPassword)\n\n    // Check fields\n    var errors = []\n    if (!this.state.firstName.replace(/\\s/g, '').length) {\n      errors.push('first name')\n    }\n    if (!this.state.lastName.replace(/\\s/g, '').length) {\n      errors.push('last name')\n    }\n    if (!this.state.email.replace(/\\s/g, '').length) {\n      errors.push('email address')\n    }\n    if (!this.state.password.replace(/\\s/g, '').length) {\n      errors.push('password')\n    }\n    if (!this.state.confirmPassword.replace(/\\s/g, '').length) {\n      errors.push('confirm password')\n    }\n\n    var tooLongErrors = []\n    console.log(this.state.firstName.length)\n    if (this.state.firstName.length > 100) {\n      tooLongErrors.push('first name')\n    }\n    if (this.state.lastName.length > 100) {\n      tooLongErrors.push('last name')\n    }\n    if (this.state.email.length > 100) {\n      tooLongErrors.push('email')\n    }\n    if (this.state.password.length > 100) {\n      tooLongErrors.push('password')\n    }\n\n    if (errors.length > 0) {\n      // Missing fields\n      this.setState({\n        missingFields: errors,\n        openMissingFieldsDialog: true\n      })\n    } else if (tooLongErrors.length > 0) {\n      this.setState({\n        fieldsTooLong: tooLongErrors,\n        openFieldTooLongDialog: true\n      })\n    } else if (!isValidEmail(this.state.email)) {\n      this.setState({\n        openInvalidEmailDialog: true\n      })\n    } else if (this.state.password.localeCompare(this.state.confirmPassword) != 0) {\n      // Confirm password does not match password\n      this.setState({\n        openConfirmPasswordErrorDialog: true\n      })\n    } else {\n      axios.post(url_user, {\n        params: {\n          first_name: this.state.firstName,\n          last_name: this.state.lastName,\n          email: this.state.email,\n          password: this.state.password\n        }\n      }).then((response) => {\n        if (response.data === 'Created user') {\n          this.setState({\n            openSuccessDialog: true\n          })\n        } else if (response.data === 'Duplicate user') {\n          this.setState({\n            openDuplicateUserDialog: true\n          })\n        } else {\n          this.setState({\n            openServerErrorDialog: true\n          })\n        }\n      }).catch((error) => {\n        this.setState({\n          openServerErrorDialog: true\n        })\n      })\n    }\n  }\n\n  renderDialogs() {\n    return (\n      <div className='dialogs'>\n        <Dialog\n          open={this.state.openSuccessDialog}\n          onClose={this.handleCloseSuccessDialog}\n        >\n          <DialogTitle>\n            {'Success'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              You have successfully registered your account.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseSuccessDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openMissingFieldsDialog}\n          onClose={this.handleCloseMissingFieldsDialog}\n        >\n          <DialogTitle>\n            {'Missing Fields'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              The following fields are missing: {this.state.missingFields.join(', ')}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseMissingFieldsDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openFieldTooLongDialog}\n          onClose={this.handleCloseFieldsTooLongDialog}\n        >\n          <DialogTitle>\n            {'Input Error'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please limit the following fields to 100 characters or fewer: {this.state.fieldsTooLong.join(', ')}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseFieldsTooLongDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openConfirmPasswordErrorDialog}\n          onClose={this.handleCloseConfirmPasswordErrorDialog}\n        >\n          <DialogTitle>\n            {'Confirm Password'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please confirm password.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseConfirmPasswordErrorDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openServerErrorDialog}\n          onClose={this.handleCloseServerErrorDialog}\n        >\n          <DialogTitle>\n            {'Server Error'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              There was an error registering your account. \n              Please contact the administrative team for help.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseServerErrorDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openDuplicateUserDialog}\n          onClose={this.handleCloseDuplicateUserDialog}\n        >\n          <DialogTitle>\n            {'Account Already Exists'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              A user with this email address already exists.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseDuplicateUserDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openInvalidEmailDialog}\n          onClose={this.handleCloseInvalidEmailDialog}\n        >\n          <DialogTitle>\n            {'Invalid Email'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please enter a valid email address (e.g., \"janedoe@email.com\")\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseInvalidEmailDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className='page'>\n        <Header />\n        \n        <MuiThemeProvider theme={Theme}>\n          {this.renderDialogs()}\n          <IconButton color='primary' onClick={this.goToLanding}>\n            <ArrowBack />\n          </IconButton>\n          <div className='main'>\n            <Paper className='paper'>\n              <div className='title'>\n                <Typography variant=\"h3\" color=\"primary\">\n                  Register\n                </Typography>\n              </div>\n              <div className='form'>\n                <FormControl>\n                  <TextField\n                    required\n                    label='First Name'\n                    className='textField'\n                    value={this.state.firstName}\n                    onChange={this.handleChange('firstName')}\n                    margin='normal'\n                    variant='outlined'\n                    error={this.state.firstName.length > 100}\n                  />\n\n                  <TextField\n                    required\n                    label='Last Name'\n                    className='textField'\n                    value={this.state.lastName}\n                    onChange={this.handleChange('lastName')}\n                    margin='normal'\n                    variant='outlined'\n                    error={this.state.lastName.length > 100}\n                  />\n\n                  <TextField\n                    required\n                    label='Email Address'\n                    className='textField'\n                    value={this.state.email}\n                    onChange={this.handleChange('email')}\n                    margin='normal'\n                    variant='outlined'\n                    error={this.state.email.length > 100}\n                  />\n\n                  <TextField\n                    required\n                    label='Password'\n                    className='textField'\n                    value={this.state.password}\n                    onChange={this.handleChange('password')}\n                    margin='normal'\n                    variant='outlined'\n                    type='password'\n                    error={this.state.password.length > 100}\n                    helperText={'strength'}\n                  />\n\n                  <TextField\n                    required\n                    label='Confirm Password'\n                    className='textField'\n                    value={this.state.confirmPassword}\n                    onChange={this.handleChange('confirmPassword')}\n                    margin='normal'\n                    variant='outlined'\n                    type='password'\n                  />\n                </FormControl>\n              </div>\n              \n              <div className='button'>\n                <Button variant=\"contained\" color=\"primary\" onClick={this.submit} size=\"large\">\n                  Register\n                </Button>\n              </div>\n            </Paper>\n          </div>\n        </MuiThemeProvider>\n      </div>\n    )\n  }\n}\n\n\nexport default withRouter(Register)\n"]},"metadata":{},"sourceType":"module"}