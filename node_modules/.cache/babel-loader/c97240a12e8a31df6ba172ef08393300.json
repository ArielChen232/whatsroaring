{"ast":null,"code":"import _defineProperty from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/arielchen232/cos333/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/arielchen232/cos333/whatsroaring/src/Pages/EditEvent.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment-timezone';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Grade from '@material-ui/icons/Grade';\nimport Share from '@material-ui/icons/Share'; // Material-UI\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\nimport './Form.css'; // import Favorite from './Components/Favorite'\n// Local\n\nimport Theme from '../Assets/Theme';\nimport Header from './Components/Header';\nimport HomeButton from './Components/HomeButton';\nimport './Form.css';\n\nvar axios = require('axios'); //const url = 'http://whatsroaring-api.herokuapp.com/'\n\n\nvar url = 'http://127.0.0.1:8000/';\nvar ITEM_HEIGHT = 48;\nvar ITEM_PADDING_TOP = 8;\nvar MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n};\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    dateTimePicker: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    select: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    dense: {\n      marginTop: 19\n    }\n  };\n}; // https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\n\n\nfunction isValidURL(str) {\n  var expression = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi;\n  var regex = new RegExp(expression);\n  return regex.test(str);\n} // Check if start date/time and end date/time are valid\n\n\nfunction checkDates(startDate, endDate) {\n  var today = new Date();\n  var errMsgs = [];\n\n  if (startDate < today) {\n    errMsgs.push('Start date/time should be after the current time.');\n  }\n\n  if (endDate <= startDate) {\n    errMsgs.push('End date/time should be after the start date/time.');\n  }\n\n  return errMsgs;\n}\n\nvar EditEvent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditEvent, _Component);\n\n  function EditEvent(props) {\n    var _this;\n\n    _classCallCheck(this, EditEvent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditEvent).call(this, props));\n\n    _this.goBack = function () {\n      _this.props.history.goBack();\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleDateChange = function (name) {\n      return function (date) {\n        _this.setState(_defineProperty({}, name, date.target.value));\n      };\n    };\n\n    _this.handleCloseDialog = function () {\n      _this.setState({\n        openErrorDialog: false\n      });\n    };\n\n    _this.handleCloseServerErrorDialog = function () {\n      _this.setState({\n        openServerErrorDialog: false\n      });\n    };\n\n    _this.handleCloseSuccessDialog = function () {\n      _this.setState({\n        openSuccessDialog: false\n      });\n\n      _this.props.history.push('/calendar');\n    };\n\n    _this.handleCloseInvalidWebsiteDialog = function () {\n      _this.setState({\n        openInvalidWebsiteDialog: false\n      });\n    };\n\n    _this.handleCloseInvalidTimesDialog = function () {\n      _this.setState({\n        openInvalidTimesDialog: false\n      });\n    };\n\n    _this.handleCloseDuplicateEventDialog = function () {\n      _this.setState({\n        openDuplicateEventDialog: false\n      });\n    };\n\n    _this.editEvent = function () {\n      console.log('delete');\n      var url_delete = url + 'deleteEvent';\n      var dtform = \"ddd, DD MMM YYYY HH:mm:ss\";\n      var start = moment.tz(_this.props.start, 'GMT').format(dtform) + ' GMT';\n      axios.post(url_delete, {\n        params: {\n          name: _this.props.title,\n          start_datetime: start\n        }\n      }).then(function (response) {\n        if (response.data === 'Success') _this.setState({\n          openDeletedDialog: true\n        });else {\n          _this.setState({\n            openErrorDialog: true\n          });\n\n          _this.setState({\n            errorType: 'delete'\n          });\n        }\n      }).catch(function (error) {\n        _this.setState({\n          openErrorDialog: true\n        });\n\n        _this.setState({\n          errorType: 'delete'\n        });\n      });\n    };\n\n    _this.state = {\n      email: localStorage.getItem('email'),\n      isAdmin: localStorage.getItem('isAdmin'),\n      name: _this.props.title,\n      org: _this.props.org,\n      category: [_this.props.cat],\n      description: _this.props.desc,\n      location: _this.props.loc,\n      isFree: _this.props.is_free,\n      website: _this.props.website,\n      startTime: _this.props.start,\n      endTime: _this.props.end,\n      categories: [],\n      organizations: [],\n      missingFields: [],\n      timeErrors: [],\n      openErrorDialog: false,\n      openSuccessDialog: false,\n      openServerErrorDialog: false,\n      openInvalidWebsiteDialog: false,\n      openInvalidTimesDialog: false,\n      openDuplicateEventDialog: false\n    };\n    return _this;\n  }\n\n  _createClass(EditEvent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Fill categories menu\n      var url_cats = url + 'getCategories';\n      var cats_arr = [];\n      axios.get(url_cats).then(function (res) {\n        var cats = res.data.cats;\n\n        for (var i = 0; i < cats.length; i++) {\n          cats_arr.push(cats[i]);\n        }\n\n        _this2.setState({\n          categories: cats_arr\n        });\n      }).catch(function (err) {\n        console.log(err);\n      }); // Fill organizations menu\n\n      var url_orgs = url + 'getOrganizations';\n      var orgs_arr = [];\n      axios.get(url_orgs).then(function (res) {\n        var orgs = res.data.orgs;\n\n        for (var i = 0; i < orgs.length; i++) {\n          orgs_arr.push(orgs[i]);\n        }\n\n        orgs_arr.sort();\n\n        _this2.setState({\n          organizations: orgs_arr\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"add_again\",\n    value: function add_again() {\n      var _this3 = this;\n\n      var url_event = url + 'createEvent';\n      console.log('Name: ' + this.state.name);\n      console.log('Org: ' + this.state.org);\n      console.log('Category: ' + this.state.category);\n      console.log('Start time: ' + this.state.startTime);\n      console.log('End time: ' + this.state.endTime);\n      console.log('Website: ' + this.state.website);\n      console.log('Description: ' + this.state.description);\n      console.log('Is free: ' + this.state.isFree); // Check fields\n\n      var errors = [];\n\n      if (!this.state.name.replace(/\\s/g, '').length) {\n        errors.push('event name');\n      }\n\n      if (!this.state.description.replace(/\\s/g, '').length) {\n        errors.push('description');\n      }\n\n      if (!this.state.location.replace(/\\s/g, '').length) {\n        errors.push('location');\n      }\n\n      if (!this.state.startTime.replace(/\\s/g, '').length) {\n        errors.push('start time');\n      }\n\n      if (!this.state.endTime.replace(/\\s/g, '').length) {\n        errors.push('end time');\n      }\n\n      if (!this.state.org.replace(/\\s/g, '').length) {\n        errors.push('organization');\n      }\n\n      if (this.state.category.length == 0) {\n        errors.push('category');\n      }\n\n      if (this.state.isFree === '') {\n        errors.push('is free');\n      }\n\n      var timeErrs = checkDates(new Date(this.state.startTime), new Date(this.state.endTime));\n\n      if (errors.length > 0) {\n        // Missing fields\n        this.setState({\n          missingFields: errors,\n          openErrorDialog: true\n        });\n      } else if (this.state.website !== '' && !isValidURL(this.state.website)) {\n        // Invalid website URL\n        this.setState({\n          openInvalidWebsiteDialog: true\n        });\n      } else if (timeErrs.length > 0) {\n        // Invalid times\n        this.setState({\n          timeErrors: timeErrs,\n          openInvalidTimesDialog: true\n        });\n      } else {\n        axios.post(url_event, {\n          params: {\n            name: this.state.name,\n            org: this.state.org,\n            cat: this.state.category,\n            start_datetime: this.state.startTime,\n            end_datetime: this.state.endTime,\n            location: this.state.location,\n            website: this.state.website,\n            description: this.state.description,\n            is_free: this.state.isFree,\n            email: this.state.email\n          }\n        }).then(function (response) {\n          if (response.data === 'Created event') {\n            _this3.setState({\n              openSuccessDialog: true\n            });\n          } else if (response.data === 'Duplicate event') {\n            _this3.setState({\n              openDuplicateEventDialog: false\n            });\n          } else {\n            _this3.setState({\n              openServerErrorDialog: true\n            });\n          }\n        }).catch(function (error) {\n          _this3.setState({\n            openServerErrorDialog: true\n          });\n        });\n      }\n    }\n  }, {\n    key: \"renderDialogs\",\n    value: function renderDialogs() {\n      return React.createElement(\"div\", {\n        className: \"dialogs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Dialog, {\n        open: this.state.openErrorDialog,\n        onClose: this.handleCloseDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, 'Missing required fields'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"The following fields are missing: \", this.state.missingFields.join(', '))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openSuccessDialog,\n        onClose: this.handleCloseSuccessDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, 'Success'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"Your event has been updated. Please refresh the calendar to see your event.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseSuccessDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openServerErrorDialog,\n        onClose: this.handleCloseServerErrorDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, 'Error'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, \"There was an error submitting your event. Please contact someone on the administrative team for help.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseServerErrorDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openInvalidWebsiteDialog,\n        onClose: this.handleCloseInvalidWebsiteDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, 'Invalid Website'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"Please provide a valid website link (e.g., \\\"https://whatsroaring.herokuapp.com\\\")\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseInvalidWebsiteDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openInvalidTimesDialog,\n        onClose: this.handleCloseInvalidTimesDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, 'Invalid Times'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, this.state.timeErrors.join(' '))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseInvalidTimesDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(Dialog, {\n        open: this.state.openDuplicateEventDialog,\n        onClose: this.handleCloseDuplicateEventDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, 'Duplicate Event'), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"An event with this name and time already exists.\")), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCloseDuplicateEventDialog,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424\n        },\n        __self: this\n      }, \"OK\"))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      console.log(this.props);\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }), React.createElement(HomeButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }), React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }, this.renderDialogs(), React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: \"paper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h3\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447\n        },\n        __self: this\n      }, \"Edit Event\")), React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true,\n        id: \"event-name\",\n        label: \"Event Name\",\n        className: classes.textField,\n        value: this.state.name,\n        onChange: this.handleChange('name'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        id: \"event-description\",\n        label: \"Description\",\n        className: classes.textField,\n        value: this.state.description,\n        onChange: this.handleChange('description'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        id: \"event-location\",\n        label: \"Location\",\n        className: classes.textField,\n        value: this.state.location,\n        onChange: this.handleChange('location'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"event-website\",\n        label: \"Website\",\n        className: classes.textField,\n        value: this.state.website,\n        onChange: this.handleChange('website'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        id: \"datetime-local\",\n        label: \"Start Date & Time\",\n        type: \"datetime-local\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        onChange: this.handleDateChange('startTime'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        id: \"datetime-local\",\n        label: \"End Date & Time\",\n        type: \"datetime-local\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        onChange: this.handleDateChange('endTime'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"outlined-org-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, \"Organization *\"), React.createElement(Select, {\n        value: this.state.org,\n        onChange: this.handleChange('org'),\n        className: classes.select,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, this.state.organizations.map(function (organization) {\n        return React.createElement(MenuItem, {\n          key: organization,\n          value: organization,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 533\n          },\n          __self: this\n        }, organization);\n      }))), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"select-multiple-checkbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }, \"Category *\"), React.createElement(Select, {\n        multiple: true,\n        value: this.state.category,\n        onChange: this.handleChange('category'),\n        input: React.createElement(Input, {\n          id: \"select-multiple-checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }),\n        renderValue: function renderValue(selected) {\n          return selected.join(', ');\n        },\n        className: classes.select,\n        MenuProps: MenuProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542\n        },\n        __self: this\n      }, this.state.categories.map(function (category) {\n        return React.createElement(MenuItem, {\n          key: category,\n          value: category,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 552\n          },\n          __self: this\n        }, React.createElement(Checkbox, {\n          checked: _this4.state.category.indexOf(category) > -1,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553\n          },\n          __self: this\n        }), React.createElement(ListItemText, {\n          primary: category,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 554\n          },\n          __self: this\n        }));\n      }))), React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"outlined-isfree-simple\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }, \"Free? *\"), React.createElement(Select, {\n        value: this.state.isFree,\n        onChange: this.handleChange('isFree'),\n        className: classes.select,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569\n        },\n        __self: this\n      }, \"Yes\"), React.createElement(MenuItem, {\n        value: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570\n        },\n        __self: this\n      }, \"No\")))), React.createElement(\"div\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.editEvent,\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575\n        },\n        __self: this\n      }, \"Submit Edits\"))))));\n    }\n  }]);\n\n  return EditEvent;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    loc: state.eventReducer.loc,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free,\n    cat: state.eventReducer.cat\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changeToCalendar: function changeToCalendar(month, organizations, categories, locations, checked_free, checked_fav) {\n      return dispatch({\n        type: 'changeToCalendar',\n        payload: {\n          month: month,\n          organizations_selected: organizations,\n          categories_selected: categories,\n          locations_selected: locations,\n          changed_view: true,\n          checked_free: checked_free,\n          checked_fav: checked_fav\n        }\n      });\n    }\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(withRouter(EditEvent)));","map":{"version":3,"sources":["/Users/arielchen232/cos333/whatsroaring/src/Pages/EditEvent.js"],"names":["React","Component","moment","withRouter","connect","IconButton","ArrowBack","Grade","Share","withStyles","MuiThemeProvider","Grid","Paper","Typography","TextField","InputLabel","MenuItem","FormControl","Select","Input","Button","Checkbox","ListItemText","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Divider","Theme","Header","HomeButton","axios","require","url","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","width","styles","theme","container","display","flexWrap","textField","marginLeft","spacing","unit","marginRight","dateTimePicker","select","dense","marginTop","isValidURL","str","expression","regex","RegExp","test","checkDates","startDate","endDate","today","Date","errMsgs","push","EditEvent","props","goBack","history","handleChange","name","event","setState","target","value","handleDateChange","date","handleCloseDialog","openErrorDialog","handleCloseServerErrorDialog","openServerErrorDialog","handleCloseSuccessDialog","openSuccessDialog","handleCloseInvalidWebsiteDialog","openInvalidWebsiteDialog","handleCloseInvalidTimesDialog","openInvalidTimesDialog","handleCloseDuplicateEventDialog","openDuplicateEventDialog","editEvent","console","log","url_delete","dtform","start","tz","format","post","params","title","start_datetime","then","response","data","openDeletedDialog","errorType","catch","error","state","email","localStorage","getItem","isAdmin","org","category","cat","description","desc","location","loc","isFree","is_free","website","startTime","endTime","end","categories","organizations","missingFields","timeErrors","url_cats","cats_arr","get","res","cats","i","length","err","url_orgs","orgs_arr","orgs","sort","url_event","errors","replace","timeErrs","end_datetime","join","classes","renderDialogs","shrink","map","organization","selected","indexOf","mapStateToProps","eventReducer","mapDispatchToProps","dispatch","changeToCalendar","month","locations","checked_free","checked_fav","type","payload","organizations_selected","categories_selected","locations_selected","changed_view"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,KAAP,MAAkB,0BAAlB,C,CAEA;;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AAEA,OAAO,YAAP,C,CACA;AAEA;;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAO,YAAP;;AAEA,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB,C,CACA;;;AACA,IAAMC,GAAG,GAAG,wBAAZ;AAEA,IAAMC,WAAW,GAAG,EAApB;AACA,IAAMC,gBAAgB,GAAG,CAAzB;AACA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,UAAU,EAAE;AACVC,IAAAA,KAAK,EAAE;AACLC,MAAAA,SAAS,EAAEL,WAAW,GAAG,GAAd,GAAoBC,gBAD1B;AAELK,MAAAA,KAAK,EAAE;AAFF;AADG;AADI,CAAlB;;AASA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBC,IAAAA,SAAS,EAAE;AACTC,MAAAA,OAAO,EAAE,MADA;AAETC,MAAAA,QAAQ,EAAE;AAFD,KADY;AAKvBC,IAAAA,SAAS,EAAE;AACTC,MAAAA,UAAU,EAAEL,KAAK,CAACM,OAAN,CAAcC,IADjB;AAETC,MAAAA,WAAW,EAAER,KAAK,CAACM,OAAN,CAAcC;AAFlB,KALY;AASvBE,IAAAA,cAAc,EAAE;AACdJ,MAAAA,UAAU,EAAEL,KAAK,CAACM,OAAN,CAAcC,IADZ;AAEdC,MAAAA,WAAW,EAAER,KAAK,CAACM,OAAN,CAAcC;AAFb,KATO;AAavBG,IAAAA,MAAM,EAAE;AACNL,MAAAA,UAAU,EAAEL,KAAK,CAACM,OAAN,CAAcC,IADpB;AAENC,MAAAA,WAAW,EAAER,KAAK,CAACM,OAAN,CAAcC;AAFrB,KAbe;AAiBvBI,IAAAA,KAAK,EAAE;AACLC,MAAAA,SAAS,EAAE;AADN;AAjBgB,GAAL;AAAA,CAApB,C,CAsBA;;;AACA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACvB,MAAIC,UAAU,GAAG,sGAAjB;AACA,MAAIC,KAAK,GAAG,IAAIC,MAAJ,CAAWF,UAAX,CAAZ;AACA,SAAOC,KAAK,CAACE,IAAN,CAAWJ,GAAX,CAAP;AACD,C,CAED;;;AACA,SAASK,UAAT,CAAoBC,SAApB,EAA+BC,OAA/B,EAAwC;AACtC,MAAIC,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AACA,MAAIC,OAAO,GAAG,EAAd;;AACA,MAAIJ,SAAS,GAAGE,KAAhB,EAAuB;AACrBE,IAAAA,OAAO,CAACC,IAAR,CAAa,mDAAb;AACD;;AACD,MAAIJ,OAAO,IAAID,SAAf,EAA0B;AACxBI,IAAAA,OAAO,CAACC,IAAR,CAAa,oDAAb;AACD;;AACD,SAAOD,OAAP;AACD;;IAEKE,S;;;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,mFAAMA,KAAN;;AADiB,UAyJnBC,MAzJmB,GAyJV,YAAM;AACb,YAAKD,KAAL,CAAWE,OAAX,CAAmBD,MAAnB;AACD,KA3JkB;;AAAA,UA6JnBE,YA7JmB,GA6JJ,UAAAC,IAAI;AAAA,aAAI,UAAAC,KAAK,EAAI;AAC9B,cAAKC,QAAL,qBACGF,IADH,EACUC,KAAK,CAACE,MAAN,CAAaC,KADvB;AAGD,OAJkB;AAAA,KA7JA;;AAAA,UAmKnBC,gBAnKmB,GAmKA,UAAAL,IAAI;AAAA,aAAI,UAAAM,IAAI,EAAI;AACjC,cAAKJ,QAAL,qBACGF,IADH,EACUM,IAAI,CAACH,MAAL,CAAYC,KADtB;AAGD,OAJsB;AAAA,KAnKJ;;AAAA,UAyKnBG,iBAzKmB,GAyKC,YAAM;AACxB,YAAKL,QAAL,CAAc;AAAEM,QAAAA,eAAe,EAAE;AAAnB,OAAd;AACD,KA3KkB;;AAAA,UA6KnBC,4BA7KmB,GA6KY,YAAM;AACnC,YAAKP,QAAL,CAAc;AAAEQ,QAAAA,qBAAqB,EAAE;AAAzB,OAAd;AACD,KA/KkB;;AAAA,UAiLnBC,wBAjLmB,GAiLQ,YAAM;AAC/B,YAAKT,QAAL,CAAc;AAAEU,QAAAA,iBAAiB,EAAE;AAArB,OAAd;;AACA,YAAKhB,KAAL,CAAWE,OAAX,CAAmBJ,IAAnB,CAAwB,WAAxB;AACD,KApLkB;;AAAA,UAsLnBmB,+BAtLmB,GAsLe,YAAM;AACtC,YAAKX,QAAL,CAAc;AAAEY,QAAAA,wBAAwB,EAAE;AAA5B,OAAd;AACD,KAxLkB;;AAAA,UA0LnBC,6BA1LmB,GA0La,YAAM;AACpC,YAAKb,QAAL,CAAc;AAAEc,QAAAA,sBAAsB,EAAE;AAA1B,OAAd;AACD,KA5LkB;;AAAA,UA8LnBC,+BA9LmB,GA8Le,YAAM;AACtC,YAAKf,QAAL,CAAc;AAAEgB,QAAAA,wBAAwB,EAAE;AAA5B,OAAd;AACD,KAhMkB;;AAAA,UAkMnBC,SAlMmB,GAkMP,YAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,UAAIC,UAAU,GAAG9D,GAAG,GAAG,aAAvB;AACA,UAAI+D,MAAM,GAAG,2BAAb;AACA,UAAIC,KAAK,GAAGhG,MAAM,CAACiG,EAAP,CAAU,MAAK7B,KAAL,CAAW4B,KAArB,EAA4B,KAA5B,EAAmCE,MAAnC,CAA0CH,MAA1C,IAAoD,MAAhE;AACAjE,MAAAA,KAAK,CAACqE,IAAN,CAAWL,UAAX,EAAuB;AAACM,QAAAA,MAAM,EAAE;AAC1B5B,UAAAA,IAAI,EAAE,MAAKJ,KAAL,CAAWiC,KADS;AAE1BC,UAAAA,cAAc,EAAEN;AAFU;AAAT,OAAvB,EAIKO,IAJL,CAIU,UAACC,QAAD,EAAc;AAClB,YAAIA,QAAQ,CAACC,IAAT,KAAkB,SAAtB,EACE,MAAK/B,QAAL,CAAc;AAACgC,UAAAA,iBAAiB,EAAE;AAApB,SAAd,EADF,KAEK;AACH,gBAAKhC,QAAL,CAAc;AAACM,YAAAA,eAAe,EAAE;AAAlB,WAAd;;AACA,gBAAKN,QAAL,CAAc;AAACiC,YAAAA,SAAS,EAAE;AAAZ,WAAd;AACD;AACJ,OAXH,EAWKC,KAXL,CAWW,UAACC,KAAD,EAAW;AAChB,cAAKnC,QAAL,CAAc;AAACM,UAAAA,eAAe,EAAE;AAAlB,SAAd;;AACA,cAAKN,QAAL,CAAc;AAACiC,UAAAA,SAAS,EAAE;AAAZ,SAAd;AACH,OAdH;AAeD,KAtNkB;;AAEjB,UAAKG,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADI;AAEXC,MAAAA,OAAO,EAAEF,YAAY,CAACC,OAAb,CAAqB,SAArB,CAFE;AAGXzC,MAAAA,IAAI,EAAE,MAAKJ,KAAL,CAAWiC,KAHN;AAIXc,MAAAA,GAAG,EAAE,MAAK/C,KAAL,CAAW+C,GAJL;AAKXC,MAAAA,QAAQ,EAAE,CAAC,MAAKhD,KAAL,CAAWiD,GAAZ,CALC;AAMXC,MAAAA,WAAW,EAAE,MAAKlD,KAAL,CAAWmD,IANb;AAOXC,MAAAA,QAAQ,EAAE,MAAKpD,KAAL,CAAWqD,GAPV;AAQXC,MAAAA,MAAM,EAAE,MAAKtD,KAAL,CAAWuD,OARR;AASXC,MAAAA,OAAO,EAAE,MAAKxD,KAAL,CAAWwD,OATT;AAUXC,MAAAA,SAAS,EAAE,MAAKzD,KAAL,CAAW4B,KAVX;AAWX8B,MAAAA,OAAO,EAAE,MAAK1D,KAAL,CAAW2D,GAXT;AAYXC,MAAAA,UAAU,EAAE,EAZD;AAaXC,MAAAA,aAAa,EAAE,EAbJ;AAcXC,MAAAA,aAAa,EAAE,EAdJ;AAeXC,MAAAA,UAAU,EAAE,EAfD;AAgBXnD,MAAAA,eAAe,EAAE,KAhBN;AAiBXI,MAAAA,iBAAiB,EAAE,KAjBR;AAkBXF,MAAAA,qBAAqB,EAAE,KAlBZ;AAmBXI,MAAAA,wBAAwB,EAAE,KAnBf;AAoBXE,MAAAA,sBAAsB,EAAE,KApBb;AAqBXE,MAAAA,wBAAwB,EAAE;AArBf,KAAb;AAFiB;AAyBlB;;;;wCAEmB;AAAA;;AAClB;AACA,UAAI0C,QAAQ,GAAGpG,GAAG,GAAG,eAArB;AACA,UAAIqG,QAAQ,GAAG,EAAf;AACAvG,MAAAA,KAAK,CAACwG,GAAN,CAAUF,QAAV,EAAoB7B,IAApB,CAAyB,UAAAgC,GAAG,EAAI;AAC9B,YAAIC,IAAI,GAAGD,GAAG,CAAC9B,IAAJ,CAAS+B,IAApB;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCJ,UAAAA,QAAQ,CAACnE,IAAT,CAAcsE,IAAI,CAACC,CAAD,CAAlB;AACD;;AACD,QAAA,MAAI,CAAC/D,QAAL,CAAc;AAACsD,UAAAA,UAAU,EAAEK;AAAb,SAAd;AACD,OAND,EAMGzB,KANH,CAMS,UAAA+B,GAAG,EAAI;AACd/C,QAAAA,OAAO,CAACC,GAAR,CAAY8C,GAAZ;AACD,OARD,EAJkB,CAclB;;AACA,UAAIC,QAAQ,GAAG5G,GAAG,GAAG,kBAArB;AACA,UAAI6G,QAAQ,GAAG,EAAf;AACA/G,MAAAA,KAAK,CAACwG,GAAN,CAAUM,QAAV,EAAoBrC,IAApB,CAAyB,UAAAgC,GAAG,EAAI;AAC9B,YAAIO,IAAI,GAAGP,GAAG,CAAC9B,IAAJ,CAASqC,IAApB;;AACA,aAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGK,IAAI,CAACJ,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCI,UAAAA,QAAQ,CAAC3E,IAAT,CAAc4E,IAAI,CAACL,CAAD,CAAlB;AACD;;AACDI,QAAAA,QAAQ,CAACE,IAAT;;AACA,QAAA,MAAI,CAACrE,QAAL,CAAc;AAACuD,UAAAA,aAAa,EAAEY;AAAhB,SAAd;AACD,OAPD,EAOGjC,KAPH,CAOS,UAAA+B,GAAG,EAAI;AACd/C,QAAAA,OAAO,CAACC,GAAR,CAAY8C,GAAZ;AACD,OATD;AAWD;;;gCAEW;AAAA;;AACV,UAAIK,SAAS,GAAGhH,GAAG,GAAG,aAAtB;AACA4D,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAW,KAAKiB,KAAL,CAAWtC,IAAlC;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAU,KAAKiB,KAAL,CAAWK,GAAjC;AACAvB,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAe,KAAKiB,KAAL,CAAWM,QAAtC;AACAxB,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiB,KAAKiB,KAAL,CAAWe,SAAxC;AACAjC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAe,KAAKiB,KAAL,CAAWgB,OAAtC;AACAlC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAc,KAAKiB,KAAL,CAAWc,OAArC;AACAhC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkB,KAAKiB,KAAL,CAAWQ,WAAzC;AACA1B,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAc,KAAKiB,KAAL,CAAWY,MAArC,EATU,CAWV;;AACA,UAAIuB,MAAM,GAAG,EAAb;;AACA,UAAI,CAAC,KAAKnC,KAAL,CAAWtC,IAAX,CAAgB0E,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,EAAmCR,MAAxC,EAAgD;AAC9CO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,YAAZ;AACD;;AACD,UAAI,CAAC,KAAK4C,KAAL,CAAWQ,WAAX,CAAuB4B,OAAvB,CAA+B,KAA/B,EAAsC,EAAtC,EAA0CR,MAA/C,EAAuD;AACrDO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,aAAZ;AACD;;AACD,UAAI,CAAC,KAAK4C,KAAL,CAAWU,QAAX,CAAoB0B,OAApB,CAA4B,KAA5B,EAAmC,EAAnC,EAAuCR,MAA5C,EAAoD;AAClDO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,UAAZ;AACD;;AACD,UAAI,CAAC,KAAK4C,KAAL,CAAWe,SAAX,CAAqBqB,OAArB,CAA6B,KAA7B,EAAoC,EAApC,EAAwCR,MAA7C,EAAqD;AACnDO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,YAAZ;AACD;;AACD,UAAI,CAAC,KAAK4C,KAAL,CAAWgB,OAAX,CAAmBoB,OAAnB,CAA2B,KAA3B,EAAkC,EAAlC,EAAsCR,MAA3C,EAAmD;AACjDO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,UAAZ;AACD;;AACD,UAAI,CAAC,KAAK4C,KAAL,CAAWK,GAAX,CAAe+B,OAAf,CAAuB,KAAvB,EAA8B,EAA9B,EAAkCR,MAAvC,EAA+C;AAC7CO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,cAAZ;AACD;;AACD,UAAI,KAAK4C,KAAL,CAAWM,QAAX,CAAoBsB,MAApB,IAA8B,CAAlC,EAAqC;AACnCO,QAAAA,MAAM,CAAC/E,IAAP,CAAY,UAAZ;AACD;;AACD,UAAI,KAAK4C,KAAL,CAAWY,MAAX,KAAsB,EAA1B,EAA8B;AAC5BuB,QAAAA,MAAM,CAAC/E,IAAP,CAAY,SAAZ;AACD;;AAED,UAAIiF,QAAQ,GAAGvF,UAAU,CACvB,IAAII,IAAJ,CAAS,KAAK8C,KAAL,CAAWe,SAApB,CADuB,EAEvB,IAAI7D,IAAJ,CAAS,KAAK8C,KAAL,CAAWgB,OAApB,CAFuB,CAAzB;;AAIA,UAAImB,MAAM,CAACP,MAAP,GAAgB,CAApB,EAAuB;AACrB;AACA,aAAKhE,QAAL,CAAc;AACZwD,UAAAA,aAAa,EAAEe,MADH;AAEZjE,UAAAA,eAAe,EAAE;AAFL,SAAd;AAID,OAND,MAMO,IAAI,KAAK8B,KAAL,CAAWc,OAAX,KAAuB,EAAvB,IACG,CAACtE,UAAU,CAAC,KAAKwD,KAAL,CAAWc,OAAZ,CADlB,EACwC;AAC7C;AACA,aAAKlD,QAAL,CAAc;AACZY,UAAAA,wBAAwB,EAAE;AADd,SAAd;AAGD,OANM,MAMA,IAAI6D,QAAQ,CAACT,MAAT,GAAkB,CAAtB,EAAyB;AAC9B;AACA,aAAKhE,QAAL,CAAc;AACZyD,UAAAA,UAAU,EAAEgB,QADA;AAEZ3D,UAAAA,sBAAsB,EAAE;AAFZ,SAAd;AAID,OANM,MAMA;AACL1D,QAAAA,KAAK,CAACqE,IAAN,CAAW6C,SAAX,EAAsB;AACpB5C,UAAAA,MAAM,EAAE;AACN5B,YAAAA,IAAI,EAAE,KAAKsC,KAAL,CAAWtC,IADX;AAEN2C,YAAAA,GAAG,EAAE,KAAKL,KAAL,CAAWK,GAFV;AAGNE,YAAAA,GAAG,EAAE,KAAKP,KAAL,CAAWM,QAHV;AAINd,YAAAA,cAAc,EAAE,KAAKQ,KAAL,CAAWe,SAJrB;AAKNuB,YAAAA,YAAY,EAAE,KAAKtC,KAAL,CAAWgB,OALnB;AAMNN,YAAAA,QAAQ,EAAE,KAAKV,KAAL,CAAWU,QANf;AAONI,YAAAA,OAAO,EAAE,KAAKd,KAAL,CAAWc,OAPd;AAQNN,YAAAA,WAAW,EAAE,KAAKR,KAAL,CAAWQ,WARlB;AASNK,YAAAA,OAAO,EAAE,KAAKb,KAAL,CAAWY,MATd;AAUNX,YAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC;AAVZ;AADY,SAAtB,EAaGR,IAbH,CAaQ,UAACC,QAAD,EAAc;AACpB,cAAIA,QAAQ,CAACC,IAAT,KAAkB,eAAtB,EAAuC;AACrC,YAAA,MAAI,CAAC/B,QAAL,CAAc;AACZU,cAAAA,iBAAiB,EAAE;AADP,aAAd;AAGD,WAJD,MAIO,IAAIoB,QAAQ,CAACC,IAAT,KAAkB,iBAAtB,EAAyC;AAC9C,YAAA,MAAI,CAAC/B,QAAL,CAAc;AACZgB,cAAAA,wBAAwB,EAAE;AADd,aAAd;AAGD,WAJM,MAIA;AACL,YAAA,MAAI,CAAChB,QAAL,CAAc;AACZQ,cAAAA,qBAAqB,EAAE;AADX,aAAd;AAGD;AACF,SA3BD,EA2BG0B,KA3BH,CA2BS,UAACC,KAAD,EAAW;AAClB,UAAA,MAAI,CAACnC,QAAL,CAAc;AACZQ,YAAAA,qBAAqB,EAAE;AADX,WAAd;AAGD,SA/BD;AAgCD;AACF;;;oCAiEe;AACd,aACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAK4B,KAAL,CAAW9B,eADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,iBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAa,QAAA,EAAE,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,yBADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAmB,QAAA,EAAE,EAAC,0BAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACqC,KAAK+B,KAAL,CAAWoB,aAAX,CAAyBmB,IAAzB,CAA8B,IAA9B,CADrC,CADF,CAPF,EAYE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKtE,iBAAtB;AAAyC,QAAA,KAAK,EAAC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAZF,CADF,EAmBE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAK+B,KAAL,CAAW1B,iBADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,wBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAa,QAAA,EAAE,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,SADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAmB,QAAA,EAAE,EAAC,0BAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uFADF,CAPF,EAYE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKA,wBAAtB;AAAgD,QAAA,KAAK,EAAC,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAZF,CAnBF,EAqCE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAK2B,KAAL,CAAW5B,qBADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,4BAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAa,QAAA,EAAE,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,OADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAmB,QAAA,EAAE,EAAC,0BAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iHADF,CAPF,EAaE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKA,4BAAtB;AAAoD,QAAA,KAAK,EAAC,SAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAbF,CArCF,EAwDE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAK6B,KAAL,CAAWxB,wBADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,+BAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,iBADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FADF,CAPF,EAYE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAE,KAAKA,+BADhB;AACiD,QAAA,KAAK,EAAC,SADvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAZF,CAxDF,EA2EE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAKyB,KAAL,CAAWtB,sBADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,6BAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,eADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKuB,KAAL,CAAWqB,UAAX,CAAsBkB,IAAtB,CAA2B,GAA3B,CADH,CADF,CAPF,EAYE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAE,KAAK9D,6BADhB;AAC+C,QAAA,KAAK,EAAC,SADrD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAZF,CA3EF,EA8FE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAE,KAAKuB,KAAL,CAAWpB,wBADnB;AAEE,QAAA,OAAO,EAAE,KAAKD,+BAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,iBADH,CAJF,EAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DADF,CAPF,EAYE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAE,KAAKA,+BADhB;AACiD,QAAA,KAAK,EAAC,SADvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAZF,CA9FF,CADF;AAoHD;;;6BAEQ;AAAA;;AACPG,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAjB;AADO,UAECkF,OAFD,GAEa,KAAKlF,KAFlB,CAECkF,OAFD;AAIP,aACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE3H,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK4H,aAAL,EADH,EAEE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,KAAK,EAAC,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,EAME;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,EAAE,EAAC,YAFL;AAGE,QAAA,KAAK,EAAC,YAHR;AAIE,QAAA,SAAS,EAAED,OAAO,CAACzG,SAJrB;AAKE,QAAA,KAAK,EAAE,KAAKiE,KAAL,CAAWtC,IALpB;AAME,QAAA,QAAQ,EAAE,KAAKD,YAAL,CAAkB,MAAlB,CANZ;AAOE,QAAA,MAAM,EAAC,QAPT;AAQE,QAAA,OAAO,EAAC,UARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAYE,oBAAC,SAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,EAAE,EAAC,mBAFL;AAGE,QAAA,KAAK,EAAC,aAHR;AAIE,QAAA,SAAS,EAAE+E,OAAO,CAACzG,SAJrB;AAKE,QAAA,KAAK,EAAE,KAAKiE,KAAL,CAAWQ,WALpB;AAME,QAAA,QAAQ,EAAE,KAAK/C,YAAL,CAAkB,aAAlB,CANZ;AAOE,QAAA,MAAM,EAAC,QAPT;AAQE,QAAA,OAAO,EAAC,UARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,EAuBE,oBAAC,SAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,EAAE,EAAC,gBAFL;AAGE,QAAA,KAAK,EAAC,UAHR;AAIE,QAAA,SAAS,EAAE+E,OAAO,CAACzG,SAJrB;AAKE,QAAA,KAAK,EAAE,KAAKiE,KAAL,CAAWU,QALpB;AAME,QAAA,QAAQ,EAAE,KAAKjD,YAAL,CAAkB,UAAlB,CANZ;AAOE,QAAA,MAAM,EAAC,QAPT;AAQE,QAAA,OAAO,EAAC,UARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvBF,EAkCE,oBAAC,SAAD;AACE,QAAA,EAAE,EAAC,eADL;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,SAAS,EAAE+E,OAAO,CAACzG,SAHrB;AAIE,QAAA,KAAK,EAAE,KAAKiE,KAAL,CAAWc,OAJpB;AAKE,QAAA,QAAQ,EAAE,KAAKrD,YAAL,CAAkB,SAAlB,CALZ;AAME,QAAA,MAAM,EAAC,QANT;AAOE,QAAA,OAAO,EAAC,UAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlCF,EA4CE,oBAAC,SAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,EAAE,EAAC,gBAFL;AAGE,QAAA,KAAK,EAAC,mBAHR;AAIE,QAAA,IAAI,EAAC,gBAJP;AAKE,QAAA,SAAS,EAAE+E,OAAO,CAACzG,SALrB;AAME,QAAA,eAAe,EAAE;AACf2G,UAAAA,MAAM,EAAE;AADO,SANnB;AASE,QAAA,QAAQ,EAAE,KAAK3E,gBAAL,CAAsB,WAAtB,CATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA5CF,EAwDE,oBAAC,SAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,EAAE,EAAC,gBAFL;AAGE,QAAA,KAAK,EAAC,iBAHR;AAIE,QAAA,IAAI,EAAC,gBAJP;AAKE,QAAA,SAAS,EAAEyE,OAAO,CAACzG,SALrB;AAME,QAAA,eAAe,EAAE;AACf2G,UAAAA,MAAM,EAAE;AADO,SANnB;AASE,QAAA,QAAQ,EAAE,KAAK3E,gBAAL,CAAsB,SAAtB,CATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxDF,CADF,CANF,EA6EE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,qBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAIE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE,KAAKiC,KAAL,CAAWK,GADpB;AAEE,QAAA,QAAQ,EAAE,KAAK5C,YAAL,CAAkB,KAAlB,CAFZ;AAGE,QAAA,SAAS,EAAE+E,OAAO,CAACnG,MAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKG,KAAK2D,KAAL,CAAWmB,aAAX,CAAyBwB,GAAzB,CAA6B,UAAAC,YAAY;AAAA,eACxC,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEA,YAAf;AAA6B,UAAA,KAAK,EAAEA,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGA,YADH,CADwC;AAAA,OAAzC,CALH,CAJF,CADF,EAkBE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,0BAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE,oBAAC,MAAD;AACE,QAAA,QAAQ,MADV;AAEE,QAAA,KAAK,EAAE,KAAK5C,KAAL,CAAWM,QAFpB;AAGE,QAAA,QAAQ,EAAE,KAAK7C,YAAL,CAAkB,UAAlB,CAHZ;AAIE,QAAA,KAAK,EAAE,oBAAC,KAAD;AAAO,UAAA,EAAE,EAAC,0BAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJT;AAKE,QAAA,WAAW,EAAE,qBAAAoF,QAAQ;AAAA,iBAAIA,QAAQ,CAACN,IAAT,CAAc,IAAd,CAAJ;AAAA,SALvB;AAME,QAAA,SAAS,EAAEC,OAAO,CAACnG,MANrB;AAOE,QAAA,SAAS,EAAEhB,SAPb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SASG,KAAK2E,KAAL,CAAWkB,UAAX,CAAsByB,GAAtB,CAA0B,UAAArC,QAAQ;AAAA,eACjC,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEA,QAAf;AAAyB,UAAA,KAAK,EAAEA,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,QAAD;AAAU,UAAA,OAAO,EAAE,MAAI,CAACN,KAAL,CAAWM,QAAX,CAAoBwC,OAApB,CAA4BxC,QAA5B,IAAwC,CAAC,CAA5D;AAA+D,UAAA,KAAK,EAAC,SAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEE,oBAAC,YAAD;AAAc,UAAA,OAAO,EAAEA,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADiC;AAAA,OAAlC,CATH,CAFF,CAlBF,EAsCE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,wBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAIE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWY,MADpB;AAEE,QAAA,QAAQ,EAAE,KAAKnD,YAAL,CAAkB,QAAlB,CAFZ;AAGE,QAAA,SAAS,EAAE+E,OAAO,CAACnG,MAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALF,EAME,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,CAJF,CAtCF,CA7EF,EAiIE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,KAAK,EAAC,SAAlC;AAA4C,QAAA,OAAO,EAAE,KAAKwC,SAA1D;AAAqE,QAAA,IAAI,EAAC,OAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAjIF,CADF,CAFF,CAHF,CADF;AAkJD;;;;EAteqB5F,S;;AAyexB,IAAM8J,eAAe,GAAG,SAAlBA,eAAkB,CAAA/C,KAAK,EAAI;AAC/B,SAAO;AACLT,IAAAA,KAAK,EAAES,KAAK,CAACgD,YAAN,CAAmBzD,KADrB;AAELL,IAAAA,KAAK,EAAEc,KAAK,CAACgD,YAAN,CAAmB9D,KAFrB;AAGL+B,IAAAA,GAAG,EAAEjB,KAAK,CAACgD,YAAN,CAAmB/B,GAHnB;AAILR,IAAAA,IAAI,EAAET,KAAK,CAACgD,YAAN,CAAmBvC,IAJpB;AAKLE,IAAAA,GAAG,EAAEX,KAAK,CAACgD,YAAN,CAAmBrC,GALnB;AAMLG,IAAAA,OAAO,EAAEd,KAAK,CAACgD,YAAN,CAAmBlC,OANvB;AAOLT,IAAAA,GAAG,EAAEL,KAAK,CAACgD,YAAN,CAAmB3C,GAPnB;AAQLQ,IAAAA,OAAO,EAAEb,KAAK,CAACgD,YAAN,CAAmBnC,OARvB;AASLN,IAAAA,GAAG,EAAEP,KAAK,CAACgD,YAAN,CAAmBzC;AATnB,GAAP;AAWD,CAZD;;AAcA,IAAM0C,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACLC,IAAAA,gBAAgB,EAAE,0BAACC,KAAD,EAAQjC,aAAR,EAAuBD,UAAvB,EAAmCmC,SAAnC,EAA8CC,YAA9C,EAA4DC,WAA5D;AAAA,aAA4EL,QAAQ,CAAC;AACrGM,QAAAA,IAAI,EAAE,kBAD+F;AAErGC,QAAAA,OAAO,EAAE;AACPL,UAAAA,KAAK,EAAEA,KADA;AAEPM,UAAAA,sBAAsB,EAAEvC,aAFjB;AAGPwC,UAAAA,mBAAmB,EAAEzC,UAHd;AAIP0C,UAAAA,kBAAkB,EAAEP,SAJb;AAKPQ,UAAAA,YAAY,EAAE,IALP;AAMPP,UAAAA,YAAY,EAAEA,YANP;AAOPC,UAAAA,WAAW,EAAEA;AAPN;AAF4F,OAAD,CAApF;AAAA;AADb,GAAP;AAcD,CAfD;;AAiBA,eAAe9J,UAAU,CAACiC,MAAD,CAAV,CAAmBtC,OAAO,CAAC2J,eAAD,EAAkBE,kBAAlB,CAAP,CAA6C9J,UAAU,CAACkE,SAAD,CAAvD,CAAnB,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport moment from 'moment-timezone'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\nimport Grade from '@material-ui/icons/Grade'\nimport Share from '@material-ui/icons/Share'\n\n// Material-UI\nimport { withStyles } from '@material-ui/core/styles'\nimport { MuiThemeProvider } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport Input from '@material-ui/core/Input'\nimport Button from '@material-ui/core/Button'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Divider from '@material-ui/core/Divider'\n\nimport './Form.css'\n// import Favorite from './Components/Favorite'\n\n// Local\nimport Theme from '../Assets/Theme'\nimport Header from './Components/Header'\nimport HomeButton from './Components/HomeButton'\nimport './Form.css'\n\nconst axios = require('axios')\n//const url = 'http://whatsroaring-api.herokuapp.com/'\nconst url = 'http://127.0.0.1:8000/'\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n}\n\nconst styles = theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  dateTimePicker: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  select: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  dense: {\n    marginTop: 19,\n  },\n})\n\n// https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url\nfunction isValidURL(str) {\n  var expression = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi\n  var regex = new RegExp(expression)\n  return regex.test(str)\n}\n\n// Check if start date/time and end date/time are valid\nfunction checkDates(startDate, endDate) {\n  var today = new Date()\n  var errMsgs = []\n  if (startDate < today) {\n    errMsgs.push('Start date/time should be after the current time.')\n  }\n  if (endDate <= startDate) {\n    errMsgs.push('End date/time should be after the start date/time.')\n  }\n  return errMsgs\n}\n\nclass EditEvent extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: localStorage.getItem('email'),\n      isAdmin: localStorage.getItem('isAdmin'),\n      name: this.props.title,\n      org: this.props.org,\n      category: [this.props.cat],\n      description: this.props.desc,\n      location: this.props.loc,\n      isFree: this.props.is_free,\n      website: this.props.website,\n      startTime: this.props.start,\n      endTime: this.props.end,\n      categories: [],\n      organizations: [],\n      missingFields: [],\n      timeErrors: [],\n      openErrorDialog: false,\n      openSuccessDialog: false,\n      openServerErrorDialog: false,\n      openInvalidWebsiteDialog: false,\n      openInvalidTimesDialog: false,\n      openDuplicateEventDialog: false,\n    }\n  }\n\n  componentDidMount() {\n    // Fill categories menu\n    var url_cats = url + 'getCategories'\n    var cats_arr = []\n    axios.get(url_cats).then(res => {\n      var cats = res.data.cats\n      for (var i = 0; i < cats.length; i++) {\n        cats_arr.push(cats[i])\n      }\n      this.setState({categories: cats_arr})\n    }).catch(err => {\n      console.log(err)\n    })\n\n    // Fill organizations menu\n    var url_orgs = url + 'getOrganizations'\n    var orgs_arr = []\n    axios.get(url_orgs).then(res => {\n      var orgs = res.data.orgs\n      for (var i = 0; i < orgs.length; i++) {\n        orgs_arr.push(orgs[i])\n      }\n      orgs_arr.sort()\n      this.setState({organizations: orgs_arr})\n    }).catch(err => {\n      console.log(err)\n    })\n\n  }\n\n  add_again() {\n    var url_event = url + 'createEvent'\n    console.log('Name: ' + this.state.name)\n    console.log('Org: ' + this.state.org)\n    console.log('Category: ' + this.state.category)\n    console.log('Start time: ' + this.state.startTime)\n    console.log('End time: ' + this.state.endTime)\n    console.log('Website: ' + this.state.website)\n    console.log('Description: ' + this.state.description)\n    console.log('Is free: ' + this.state.isFree)\n\n    // Check fields\n    var errors = []\n    if (!this.state.name.replace(/\\s/g, '').length) {\n      errors.push('event name')\n    }\n    if (!this.state.description.replace(/\\s/g, '').length) {\n      errors.push('description')\n    }\n    if (!this.state.location.replace(/\\s/g, '').length) {\n      errors.push('location')\n    }\n    if (!this.state.startTime.replace(/\\s/g, '').length) {\n      errors.push('start time')\n    }\n    if (!this.state.endTime.replace(/\\s/g, '').length) {\n      errors.push('end time')\n    }\n    if (!this.state.org.replace(/\\s/g, '').length) {\n      errors.push('organization')\n    }\n    if (this.state.category.length == 0) {\n      errors.push('category')\n    }\n    if (this.state.isFree === '') {\n      errors.push('is free')\n    }\n\n    var timeErrs = checkDates(\n      new Date(this.state.startTime),\n      new Date(this.state.endTime))\n\n    if (errors.length > 0) {\n      // Missing fields\n      this.setState({\n        missingFields: errors,\n        openErrorDialog: true\n      })\n    } else if (this.state.website !== ''\n               && !isValidURL(this.state.website)) {\n      // Invalid website URL\n      this.setState({\n        openInvalidWebsiteDialog: true\n      })\n    } else if (timeErrs.length > 0) {\n      // Invalid times\n      this.setState({\n        timeErrors: timeErrs,\n        openInvalidTimesDialog: true\n      })\n    } else {\n      axios.post(url_event, {\n        params: {\n          name: this.state.name,\n          org: this.state.org,\n          cat: this.state.category,\n          start_datetime: this.state.startTime,\n          end_datetime: this.state.endTime,\n          location: this.state.location,\n          website: this.state.website,\n          description: this.state.description,\n          is_free: this.state.isFree,\n          email: this.state.email,\n        }\n      }).then((response) => {\n        if (response.data === 'Created event') {\n          this.setState({\n            openSuccessDialog: true\n          })\n        } else if (response.data === 'Duplicate event') {\n          this.setState({\n            openDuplicateEventDialog: false\n          })\n        } else {\n          this.setState({\n            openServerErrorDialog: true\n          })\n        }\n      }).catch((error) => {\n        this.setState({\n          openServerErrorDialog: true\n        })\n      })\n    }\n  }\n\n  goBack = () => {\n    this.props.history.goBack()\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    })\n  }\n\n  handleDateChange = name => date => {\n    this.setState({\n      [name]: date.target.value\n    })\n  }\n\n  handleCloseDialog = () => {\n    this.setState({ openErrorDialog: false })\n  }\n\n  handleCloseServerErrorDialog = () => {\n    this.setState({ openServerErrorDialog: false })\n  }\n\n  handleCloseSuccessDialog = () => {\n    this.setState({ openSuccessDialog: false })\n    this.props.history.push('/calendar')\n  }\n\n  handleCloseInvalidWebsiteDialog = () => {\n    this.setState({ openInvalidWebsiteDialog: false })\n  }\n\n  handleCloseInvalidTimesDialog = () => {\n    this.setState({ openInvalidTimesDialog: false })\n  }\n\n  handleCloseDuplicateEventDialog = () => {\n    this.setState({ openDuplicateEventDialog: false })\n  }\n\n  editEvent = () => {\n    console.log('delete')\n    var url_delete = url + 'deleteEvent'\n    var dtform = \"ddd, DD MMM YYYY HH:mm:ss\"\n    var start = moment.tz(this.props.start, 'GMT').format(dtform) + ' GMT'\n    axios.post(url_delete, {params: {\n          name: this.props.title,\n          start_datetime: start\n        }\n      }).then((response) => {\n          if (response.data === 'Success')\n            this.setState({openDeletedDialog: true})\n          else {\n            this.setState({openErrorDialog: true})\n            this.setState({errorType: 'delete'})\n          }\n      }).catch((error) => {\n          this.setState({openErrorDialog: true})\n          this.setState({errorType: 'delete'})\n      })\n  }\n\n  renderDialogs() {\n    return (\n      <div className='dialogs'>\n        <Dialog\n          open={this.state.openErrorDialog}\n          onClose={this.handleCloseDialog}\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Missing required fields'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              The following fields are missing: {this.state.missingFields.join(', ')}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openSuccessDialog}\n          onClose={this.handleCloseSuccessDialog}\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Success'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              Your event has been updated. Please refresh the calendar to see your event.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseSuccessDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openServerErrorDialog}\n          onClose={this.handleCloseServerErrorDialog}\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {'Error'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              There was an error submitting your event.\n              Please contact someone on the administrative team for help.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseServerErrorDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openInvalidWebsiteDialog}\n          onClose={this.handleCloseInvalidWebsiteDialog}\n        >\n          <DialogTitle>\n            {'Invalid Website'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please provide a valid website link (e.g., \"https://whatsroaring.herokuapp.com\")\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              onClick={this.handleCloseInvalidWebsiteDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openInvalidTimesDialog}\n          onClose={this.handleCloseInvalidTimesDialog}\n        >\n          <DialogTitle>\n            {'Invalid Times'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              {this.state.timeErrors.join(' ')}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              onClick={this.handleCloseInvalidTimesDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <Dialog\n          open={this.state.openDuplicateEventDialog}\n          onClose={this.handleCloseDuplicateEventDialog}\n        >\n          <DialogTitle>\n            {'Duplicate Event'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              An event with this name and time already exists.\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              onClick={this.handleCloseDuplicateEventDialog} color=\"primary\">\n              OK\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    )\n  }\n\n  render() {\n    console.log(this.props)\n    const { classes } = this.props\n\n    return (\n      <div className='page'>\n        <Header />\n        <HomeButton />\n        <MuiThemeProvider theme={Theme}>\n          {this.renderDialogs()}\n          <div className='main'>\n            <Paper className='paper'>\n              <div className='title'>\n                <Typography variant=\"h3\" color=\"primary\">\n                  Edit Event\n                </Typography>\n              </div>\n              <div className='form'>\n                <FormControl>\n                  <TextField\n                    required\n                    id='event-name'\n                    label='Event Name'\n                    className={classes.textField}\n                    value={this.state.name}\n                    onChange={this.handleChange('name')}\n                    margin='normal'\n                    variant='outlined'\n                  />\n\n                  <TextField\n                    required\n                    id='event-description'\n                    label='Description'\n                    className={classes.textField}\n                    value={this.state.description}\n                    onChange={this.handleChange('description')}\n                    margin='normal'\n                    variant='outlined'\n                  />\n\n                  <TextField\n                    required\n                    id='event-location'\n                    label='Location'\n                    className={classes.textField}\n                    value={this.state.location}\n                    onChange={this.handleChange('location')}\n                    margin='normal'\n                    variant='outlined'\n                  />\n\n                  <TextField\n                    id='event-website'\n                    label='Website'\n                    className={classes.textField}\n                    value={this.state.website}\n                    onChange={this.handleChange('website')}\n                    margin='normal'\n                    variant='outlined'\n                  />\n\n                  <TextField\n                    required\n                    id=\"datetime-local\"\n                    label=\"Start Date & Time\"\n                    type=\"datetime-local\"\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                    onChange={this.handleDateChange('startTime')}\n                  />\n\n                  <TextField\n                    required\n                    id=\"datetime-local\"\n                    label=\"End Date & Time\"\n                    type=\"datetime-local\"\n                    className={classes.textField}\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                    onChange={this.handleDateChange('endTime')}\n                  />\n                </FormControl>\n              </div>\n\n              <div className='form'>\n                <FormControl>\n                  <InputLabel htmlFor=\"outlined-org-simple\">\n                    Organization *\n                  </InputLabel>\n                  <Select\n                    value={this.state.org}\n                    onChange={this.handleChange('org')}\n                    className={classes.select}\n                  >\n                    {this.state.organizations.map(organization => (\n                      <MenuItem key={organization} value={organization}>\n                        {organization}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n\n                <FormControl>\n                  <InputLabel htmlFor=\"select-multiple-checkbox\">Category *</InputLabel>\n                  <Select\n                    multiple\n                    value={this.state.category}\n                    onChange={this.handleChange('category')}\n                    input={<Input id=\"select-multiple-checkbox\" />}\n                    renderValue={selected => selected.join(', ')}\n                    className={classes.select}\n                    MenuProps={MenuProps}\n                  >\n                    {this.state.categories.map(category => (\n                      <MenuItem key={category} value={category}>\n                        <Checkbox checked={this.state.category.indexOf(category) > -1} color='primary'/>\n                        <ListItemText primary={category} />\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n\n                <FormControl>\n                  <InputLabel htmlFor=\"outlined-isfree-simple\">\n                    Free? *\n                  </InputLabel>\n                  <Select\n                    value={this.state.isFree}\n                    onChange={this.handleChange('isFree')}\n                    className={classes.select}\n                  >\n                    <MenuItem value={true}>Yes</MenuItem>\n                    <MenuItem value={false}>No</MenuItem>\n                  </Select>\n                </FormControl>\n              </div>\n              <div className='button'>\n                <Button variant=\"contained\" color=\"primary\" onClick={this.editEvent} size=\"large\">\n                  Submit Edits\n                </Button>\n              </div>\n            </Paper>\n          </div>\n        </MuiThemeProvider>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    loc: state.eventReducer.loc,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free,\n    cat: state.eventReducer.cat\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeToCalendar: (month, organizations, categories, locations, checked_free, checked_fav) => dispatch({\n      type: 'changeToCalendar',\n      payload: {\n        month: month,\n        organizations_selected: organizations,\n        categories_selected: categories,\n        locations_selected: locations,\n        changed_view: true,\n        checked_free: checked_free,\n        checked_fav: checked_fav,\n      }\n    })\n  }\n}\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(withRouter(EditEvent)))\n"]},"metadata":{},"sourceType":"module"}