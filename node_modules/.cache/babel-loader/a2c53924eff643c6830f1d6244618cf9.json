{"ast":null,"code":"import _defineProperty from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/leitan/Developer/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/leitan/Developer/whatsroaring/src/Pages/Calendar.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport moment from 'moment';\nimport CASClient from './CASClient'; // Components\n\nimport BigCalendar from 'react-big-calendar';\nimport DropdownMultiple from './Components/DropdownMultiple';\nimport AddEventButton from './Components/AddEventButton';\nimport AddOrgButton from './Components/AddOrgButton';\nimport Footer from './Components/Footer';\nimport Header from './Components/Header';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport Theme from '../Assets/Theme';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, Container, Row, Col, Jumbotron } from //Button\n'reactstrap'; // Styling\n\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './Calendar.css';\nvar localizer = BigCalendar.momentLocalizer(moment);\nvar url = 'https://whatsroaring-api.herokuapp.com/';\nvar url_details = 'https://whatsroaring.herokuapp.com/details'; // const url = 'http://127.0.0.1:8000/'\n\nvar orange = '#fb8c00';\nvar monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nvar ITEM_HEIGHT = 48;\nvar ITEM_PADDING_TOP = 8;\nvar MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n};\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    dateTimePicker: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    select: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit\n    },\n    dense: {\n      marginTop: 19\n    }\n  };\n};\n\nfunction getStartOfMonth() {\n  var today = new Date();\n  today.setDate(1);\n  return today;\n} // return array of location objects to populate dropdown\n\n\nfunction getLocationObjects() {\n  var url_locs = url + 'getLocations';\n  var locs_arr = [];\n  axios.get(url_locs).then(function (res) {\n    var locs = res.data.locs;\n    locs.sort(compareDropdown);\n\n    for (var i = 0; i < locs.length; i++) {\n      locs_arr.push({\n        id: i,\n        title: locs[i],\n        selected: false,\n        key: 'locations'\n      });\n    }\n  });\n  return locs_arr;\n} // return array of category objects to populate dropdown\n\n\nfunction getCategoryObjects() {\n  var url_cats = url + 'getCategories';\n  var cats_arr = [];\n  axios.get(url_cats).then(function (res) {\n    var cats = res.data.cats;\n    cats.sort(compareDropdown);\n\n    for (var i = 0; i < cats.length; i++) {\n      cats_arr.push({\n        id: i,\n        title: cats[i],\n        selected: false,\n        key: 'categories'\n      });\n    }\n  });\n  return cats_arr;\n} // return array of organization objects to populate dropdown\n\n\nfunction getOrganizationObjects() {\n  var url_orgs = url + 'getOrganizations';\n  var orgs_arr = [];\n  axios.get(url_orgs).then(function (res) {\n    var orgs = res.data.orgs;\n    orgs.sort(compareDropdown);\n\n    for (var i = 0; i < orgs.length; i++) {\n      orgs_arr.push({\n        id: i,\n        title: orgs[i],\n        selected: false,\n        key: 'organizations'\n      });\n    }\n  });\n  return orgs_arr;\n} // function to sort dropdown components\n\n\nfunction compareDropdown(a, b) {\n  var compA = a.toUpperCase();\n  var compB = b.toUpperCase();\n  if (compA < compB) return -1;\n  if (compA > compB) return 1;\n  return 0;\n}\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Calendar, _Component);\n\n  function Calendar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Calendar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.getCustomToolbar = function (toolbar) {\n      _this.toolbarDate = toolbar.date;\n\n      var goToBack = function goToBack() {\n        toolbar.onNavigate('back', _this.prevMonth());\n      };\n\n      var goToNext = function goToNext() {\n        toolbar.onNavigate('next', _this.nextMonth());\n      };\n\n      var goToToday = function goToToday() {\n        var day = new Date();\n\n        _this.setState({\n          month: getStartOfMonth()\n        });\n\n        toolbar.onNavigate('today', day);\n      };\n\n      return React.createElement(\"div\", {\n        className: \"ToolbarCalendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: \"month\",\n        variant: \"h3\",\n        component: \"h3\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, monthNames[_this.state.month.getMonth()] + ' ' + _this.state.month.getFullYear())), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ToolbarButtons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        color: \"primary\",\n        onClick: goToBack,\n        variant: \"contained\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(ArrowBack, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        color: \"primary\",\n        onClick: goToNext,\n        variant: \"contained\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(ArrowForward, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: goToToday,\n        size: \"medium\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Today\")))))));\n    };\n\n    _this.handleCheckFree = function (name) {\n      console.log(\"free_selected\");\n\n      _this.setState({\n        checkedFree: !_this.state.checkedFree\n      }, function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.handleCheckFav = function (name) {\n      console.log(\"fav_selected\");\n\n      _this.setState({\n        checkedFav: !_this.state.checkedFav\n      }, function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.onStartChange = function (date) {\n      _this.setState({\n        start_datetime: date\n      });\n    };\n\n    _this.onEndChange = function (date) {\n      _this.setState({\n        end_datetime: date\n      });\n    };\n\n    _this.toggleSelected = function (id, key) {\n      var temp = JSON.parse(JSON.stringify(_this.state[key]));\n      temp[id].selected = !temp[id].selected;\n      console.log(\"toggled\");\n\n      _this.setState(_defineProperty({}, key, temp), function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.seeDetails = function (event) {\n      _this.props.changeToDetails(event, _this.state.month, _this.state.organizations, _this.state.categories, _this.state.locations, _this.state.checkedFree, _this.state.checkedFav);\n\n      _this.props.history.push('/details');\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.renderCalendar = function () {\n      if (_this._isMounted === true) {\n        return React.createElement(BigCalendar, {\n          localizer: localizer,\n          events: _this.state.events,\n          defaultView: BigCalendar.Views.MONTH,\n          onSelectEvent: _this.seeDetails,\n          views: ['month', 'week'],\n          eventPropGetter: _this.eventStyleGetter,\n          defaultDate: _this.state.month,\n          components: {\n            toolbar: _this.getCustomToolbar\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487\n          },\n          __self: this\n        });\n      }\n    };\n\n    _this.state = {\n      // loading: true,\n      events: [],\n      locations: [],\n      categories: [],\n      organizations: [],\n      selectedLocations: [],\n      checkedFree: false,\n      checkedFav: false,\n      start_datetime: new Date(),\n      end_datetime: new Date(),\n      display_date: new Date(),\n      month: getStartOfMonth(),\n      changed_view: false // if user has changed calendar settings\n\n    };\n    _this._isMounted = false;\n    _this.eventStyleGetter = _this.eventStyleGetter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getCustomToolbar = _this.getCustomToolbar.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Calendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.changed_view === false) {\n        console.log('Default view');\n        this.setState({\n          locations: getLocationObjects(),\n          categories: getCategoryObjects(),\n          organizations: getOrganizationObjects(),\n          is_free: this.state.checkedFree,\n          favorites: this.state.checkedFav\n        });\n      } else {\n        console.log('Recovering view');\n        this.setState({\n          locations: this.props.locations,\n          categories: this.props.categories,\n          organizations: this.props.organizations,\n          is_free: this.props.checked_free,\n          favorites: this.props.checked_fav,\n          checkedFree: this.props.checked_free,\n          checkedFav: this.props.checked_fav,\n          month: this.props.month\n        });\n      }\n\n      this.updateCalendar();\n      this._isMounted = true; // var cas = new CASClient()\n      // cas.authenticate(() => this.setState({loading: false}))\n    }\n  }, {\n    key: \"nextMonth\",\n    value: function nextMonth() {\n      var day = new Date(this.state.month);\n\n      if (day.getMonth() == 11) {\n        day.setMonth(0);\n        day.setFullYear(day.getFullYear() + 1);\n      } else {\n        day.setMonth(day.getMonth() + 1);\n      }\n\n      this.setState({\n        month: new Date(day.toLocaleString())\n      });\n      return day;\n    }\n  }, {\n    key: \"prevMonth\",\n    value: function prevMonth() {\n      var day = new Date(this.state.month);\n\n      if (day.getMonth() == 0) {\n        day.setMonth(11);\n        day.setFullYear(day.getFullYear() - 1);\n      } else {\n        day.setMonth(day.getMonth() - 1);\n      }\n\n      this.setState({\n        month: new Date(day.toLocaleString())\n      });\n      return day;\n    }\n  }, {\n    key: \"getStateFromStorage\",\n    value: function getStateFromStorage(callback) {\n      console.log('state gotten');\n      var state = {};\n\n      for (var key in this.state) {\n        console.log(key); // if the key exists in sessionStorage\n\n        if (sessionStorage.hasOwnProperty(key)) {\n          // get the key's value from sessionStorage\n          var value = sessionStorage.getItem(key);\n          console.log(value); // parse the sessionStorage string and setState\n\n          try {\n            value = JSON.parse(value);\n            state[key] = value;\n          } catch (e) {// handle empty string\n          }\n        }\n      }\n\n      console.log(state);\n      return state;\n    }\n  }, {\n    key: \"saveStateToStorage\",\n    value: function saveStateToStorage() {\n      // save state to local storage so it can be loaded\n      console.log('state saved');\n\n      for (var key in this.state) {\n        if (key !== 'events') {\n          sessionStorage.setItem(key, JSON.stringify(this.state[key]));\n        }\n      }\n    }\n  }, {\n    key: \"updateCalendar\",\n    value: function updateCalendar() {\n      var _this2 = this;\n\n      var locations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var categories = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var organizations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      var is_free = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n      var start_date = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"\";\n      var end_date = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : \"\";\n      var favorites = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : \"\";\n      // empty string for parameters indicates select all of them\n      // Repopulate calendar\n      console.log('UPDATING CALENDAR');\n      var url_getEvents = url + 'getEvents';\n      var events = [];\n      axios.get(url_getEvents, {\n        params: {\n          locations: locations,\n          categories: categories,\n          organizations: organizations,\n          is_free: is_free,\n          favorites: favorites\n        }\n      }).then(function (res) {\n        var posts = JSON.parse(res.data.Events_JSON);\n        posts.forEach(function (post) {\n          events.push({\n            title: post.fields.name,\n            start: new Date(post.fields.start_datetime),\n            end: new Date(post.fields.end_datetime),\n            desc: post.fields.description,\n            loc: post.fields.location,\n            website: post.fields.website,\n            org: post.fields.org,\n            is_free: post.fields.is_free,\n            cat: post.fields.category\n          });\n        });\n      }).then(function (res) {\n        console.log(events);\n\n        _this2.setState({\n          events: events\n        });\n      }).catch(function (error) {\n        console.log(error);\n        console.log(error.response.data);\n      });\n    }\n  }, {\n    key: \"filterEvents\",\n    value: function filterEvents() {\n      var i;\n      var locations = \"\";\n      var categories = \"\";\n      var organizations = \"\";\n      var is_free = \"\";\n      var netid = localStorage.getItem('netid');\n      var favorites = \"\";\n\n      for (i = 0; i < this.state.locations.length; i++) {\n        if (this.state.locations[i].selected === true) {\n          locations += this.state.locations[i].title + ',';\n        }\n      }\n\n      for (i = 0; i < this.state.categories.length; i++) {\n        if (this.state.categories[i].selected === true) {\n          categories += this.state.categories[i].title + ',';\n        }\n      }\n\n      for (i = 0; i < this.state.organizations.length; i++) {\n        if (this.state.organizations[i].selected === true) {\n          organizations += this.state.organizations[i].title + ',';\n        }\n      } // remove trailing commas from strings\n\n\n      locations = locations.substr(0, locations.length - 1);\n      categories = categories.substr(0, categories.length - 1);\n      organizations = organizations.substr(0, organizations.length - 1);\n\n      if (this.state.checkedFree === true) {\n        is_free = \"true\";\n      }\n\n      if (this.state.checkedFav === true) {\n        favorites = \"true\";\n      }\n\n      console.log(locations);\n      console.log(categories);\n      console.log(organizations);\n      console.log(is_free);\n      console.log(netid);\n      console.log(favorites);\n      this.updateCalendar(locations, categories, organizations, is_free, favorites);\n    }\n  }, {\n    key: \"eventStyleGetter\",\n    value: function eventStyleGetter(event) {\n      var color = orange;\n      /* Can add logic here to color code */\n\n      var style = {\n        backgroundColor: color,\n        opacity: 0.8,\n        color: 'black',\n        border: '0px'\n      };\n      return {\n        style: style\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // if authentication is not complete, display a loading page\n      // if (this.state.loading == true) {\n      //   return (\n      //     <div className=\"container\">\n      //       <h4>Loading...</h4>\n      //     </div>\n      //   )\n      // }\n      var classes = this.props.classes;\n      var addEvent = React.createElement(AddEventButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      });\n      var addOrg = React.createElement(AddOrgButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }); // const adminList = ['rachelsc', 'clairedu']\n      // const isAdmin = adminList.includes(localStorage.getItem('netid'))\n      // if (isAdmin) {\n      //   addEvent = <AddEventButton/>\n      //   addOrg = <AddOrgButton/>\n      // }\n      // else {\n      //   addEvent = <div></div>\n      //   addOrg = <div></div>\n      // }\n\n      return React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"CalendarPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-width\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"calendarhead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"FilterMenu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"select-multiple-checkbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, \"Locations\"), React.createElement(Select, {\n        multiple: true,\n        value: this.state.selectedLocations,\n        onChange: this.handleChange('selectedLocations'),\n        input: React.createElement(Input, {\n          id: \"select-multiple-checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 539\n          },\n          __self: this\n        }),\n        renderValue: function renderValue(selected) {\n          return selected.join(', ');\n        },\n        className: classes.select,\n        MenuProps: MenuProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535\n        },\n        __self: this\n      }, this.state.locations.map(function (item) {\n        return React.createElement(MenuItem, {\n          key: item,\n          value: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 545\n          },\n          __self: this\n        }, React.createElement(Checkbox, {\n          checked: _this3.state.selectedLocations.indexOf(item) > -1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 546\n          },\n          __self: this\n        }), React.createElement(ListItemText, {\n          primary: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547\n          },\n          __self: this\n        }));\n      })))), React.createElement(\"div\", {\n        className: \"alignright\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, addEvent, addOrg), React.createElement(\"div\", {\n        className: \"alignleft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587\n        },\n        __self: this\n      }, React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          checked: this.state.checkedFree,\n          onChange: this.handleCheckFree,\n          value: \"checkedA\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 590\n          },\n          __self: this\n        }),\n        label: \"Free events only\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588\n        },\n        __self: this\n      }), React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          checked: this.state.checkedFav,\n          onChange: this.handleCheckFav,\n          value: \"checkedA\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602\n          },\n          __self: this\n        }),\n        label: \"Favorites\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"Calendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616\n        },\n        __self: this\n      }, this.renderCalendar())));\n    }\n  }]);\n\n  return Calendar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    changed_view: state.calReducer.changed_view,\n    organizations: state.calReducer.organizations,\n    categories: state.calReducer.categories,\n    locations: state.calReducer.locations,\n    month: state.calReducer.month,\n    checked_free: state.calReducer.checked_free,\n    checked_fav: state.calReducer.checked_fav\n    /*title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    location: state.eventReducer.location,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free*/\n\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changeToDetails: function changeToDetails(event, month, organizations, categories, locations, checked_free, checked_fav) {\n      return dispatch({\n        type: 'changeToDetails',\n        payload: {\n          title: event.title,\n          start: event.start,\n          end: event.end,\n          desc: event.desc,\n          loc: event.loc,\n          website: event.website,\n          org: event.org,\n          is_free: event.is_free,\n          cat: event.cat,\n          month: month,\n          categories: categories,\n          organizations: organizations,\n          locations: locations,\n          changed_view: true,\n          checked_free: checked_free,\n          checked_fav: checked_fav\n        }\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(withRouter(Calendar)));","map":{"version":3,"sources":["/Users/leitan/Developer/whatsroaring/src/Pages/Calendar.js"],"names":["React","Component","withRouter","withStyles","connect","axios","moment","CASClient","BigCalendar","DropdownMultiple","AddEventButton","AddOrgButton","Footer","Header","MuiThemeProvider","Theme","Grid","Typography","FormGroup","FormControlLabel","Checkbox","Button","IconButton","ArrowBack","ArrowForward","FormControl","Select","Input","ListItemText","InputLabel","MenuItem","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","Container","Row","Col","Jumbotron","localizer","momentLocalizer","url","url_details","orange","monthNames","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","width","styles","theme","container","display","flexWrap","textField","marginLeft","spacing","unit","marginRight","dateTimePicker","select","dense","marginTop","getStartOfMonth","today","Date","setDate","getLocationObjects","url_locs","locs_arr","get","then","res","locs","data","sort","compareDropdown","i","length","push","id","title","selected","key","getCategoryObjects","url_cats","cats_arr","cats","getOrganizationObjects","url_orgs","orgs_arr","orgs","a","b","compA","toUpperCase","compB","Calendar","args","getCustomToolbar","toolbar","toolbarDate","date","goToBack","onNavigate","prevMonth","goToNext","nextMonth","goToToday","day","setState","month","state","getMonth","getFullYear","handleCheckFree","name","console","log","checkedFree","filterEvents","handleCheckFav","checkedFav","onStartChange","start_datetime","onEndChange","end_datetime","toggleSelected","temp","JSON","parse","stringify","seeDetails","event","props","changeToDetails","organizations","categories","locations","history","handleChange","target","value","renderCalendar","_isMounted","events","Views","MONTH","eventStyleGetter","selectedLocations","display_date","changed_view","bind","is_free","favorites","checked_free","checked_fav","updateCalendar","setMonth","setFullYear","toLocaleString","callback","sessionStorage","hasOwnProperty","getItem","e","setItem","start_date","end_date","url_getEvents","params","posts","Events_JSON","forEach","post","fields","start","end","desc","description","loc","location","website","org","cat","category","catch","error","response","netid","localStorage","substr","color","backgroundColor","opacity","border","classes","addEvent","addOrg","join","map","item","indexOf","mapStateToProps","calReducer","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { withStyles } from '@material-ui/core/styles'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport moment from 'moment'\nimport CASClient from './CASClient'\n\n// Components\nimport BigCalendar from 'react-big-calendar'\nimport DropdownMultiple from './Components/DropdownMultiple'\nimport AddEventButton from './Components/AddEventButton'\nimport AddOrgButton from './Components/AddOrgButton'\nimport Footer from './Components/Footer'\nimport Header from './Components/Header'\n\nimport { MuiThemeProvider } from '@material-ui/core/styles'\nimport Theme from '../Assets/Theme'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport Button from '@material-ui/core/Button'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\nimport ArrowForward from '@material-ui/icons/ArrowForward'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport Input from '@material-ui/core/Input'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\n\nimport {\n    Collapse,\n    Navbar,\n    NavbarToggler,\n    NavbarBrand,\n    Nav,\n    NavItem,\n    NavLink,\n    Container,\n    Row,\n    Col,\n    Jumbotron,\n    //Button\n} from 'reactstrap';\n\n// Styling\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\nimport './Calendar.css'\n\n\nconst localizer = BigCalendar.momentLocalizer(moment)\nconst url = 'https://whatsroaring-api.herokuapp.com/'\nconst url_details = 'https://whatsroaring.herokuapp.com/details'\n// const url = 'http://127.0.0.1:8000/'\nconst orange = '#fb8c00'\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n]\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n    },\n  },\n}\n\nconst styles = theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  dateTimePicker: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  select: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n  },\n  dense: {\n    marginTop: 19,\n  },\n})\n\nfunction getStartOfMonth() {\n  var today = new Date()\n  today.setDate(1)\n  return today\n}\n\n// return array of location objects to populate dropdown\nfunction getLocationObjects() {\n  const url_locs = url + 'getLocations'\n  var locs_arr = [];\n  axios.get(url_locs).then(res => {\n    var locs = res.data.locs\n    locs.sort(compareDropdown)\n    for (var i = 0; i < locs.length; i++) {\n      locs_arr.push({\n        id: i,\n        title: locs[i],\n        selected: false,\n        key: 'locations'\n      });\n    }\n  })\n  return locs_arr\n}\n\n// return array of category objects to populate dropdown\nfunction getCategoryObjects() {\n  const url_cats = url + 'getCategories'\n  var cats_arr = [];\n  axios.get(url_cats).then(res => {\n    var cats = res.data.cats\n    cats.sort(compareDropdown)\n    for (var i = 0; i < cats.length; i++) {\n      cats_arr.push({\n        id: i,\n        title: cats[i],\n        selected: false,\n        key: 'categories'\n      });\n    }\n  })\n  return cats_arr\n}\n\n// return array of organization objects to populate dropdown\nfunction getOrganizationObjects() {\n  const url_orgs = url + 'getOrganizations'\n  var orgs_arr = [];\n  axios.get(url_orgs).then(res => {\n    var orgs = res.data.orgs\n    orgs.sort(compareDropdown)\n    for (var i = 0; i < orgs.length; i++) {\n      orgs_arr.push({\n        id: i,\n        title: orgs[i],\n        selected: false,\n        key: 'organizations'\n      });\n    }\n  })\n  return orgs_arr\n}\n\n// function to sort dropdown components\nfunction compareDropdown(a, b) {\n  var compA = a.toUpperCase();\n  var compB = b.toUpperCase();\n  if (compA < compB) return -1;\n  if (compA > compB) return 1;\n  return 0;\n}\n\n\nclass Calendar extends Component {\n  constructor(...args) {\n    super(...args)\n    this.state = {\n      // loading: true,\n      events: [],\n      locations: [],\n      categories: [],\n      organizations: [],\n      selectedLocations: [],\n      checkedFree: false,\n      checkedFav: false,\n      start_datetime: new Date(),\n      end_datetime: new Date(),\n      display_date: new Date(),\n      month: getStartOfMonth(),\n      changed_view: false, // if user has changed calendar settings\n    }\n    this._isMounted = false\n    this.eventStyleGetter = this.eventStyleGetter.bind(this)\n    this.getCustomToolbar = this.getCustomToolbar.bind(this)\n  }\n\n  componentDidMount() {\n    if (this.props.changed_view === false) {\n      console.log('Default view')\n      this.setState({\n        locations:getLocationObjects(),\n        categories:getCategoryObjects(),\n        organizations:getOrganizationObjects(),\n        is_free: this.state.checkedFree,\n        favorites: this.state.checkedFav\n     })\n    } else {\n      console.log('Recovering view')\n      this.setState({\n        locations: this.props.locations,\n        categories: this.props.categories,\n        organizations: this.props.organizations,\n        is_free: this.props.checked_free,\n        favorites: this.props.checked_fav,\n        checkedFree: this.props.checked_free,\n        checkedFav: this.props.checked_fav,\n        month: this.props.month,\n     })\n    }\n    this.updateCalendar()\n    this._isMounted = true\n    // var cas = new CASClient()\n    // cas.authenticate(() => this.setState({loading: false}))\n  }\n\n  nextMonth() {\n    var day = new Date(this.state.month)\n    if (day.getMonth() == 11) {\n      day.setMonth(0)\n      day.setFullYear(day.getFullYear() + 1)\n    } else {\n      day.setMonth(day.getMonth() + 1)\n    }\n    this.setState({\n      month: new Date(day.toLocaleString())\n    })\n    return day\n  }\n\n  prevMonth() {\n    var day = new Date(this.state.month)\n    if (day.getMonth() == 0) {\n      day.setMonth(11)\n      day.setFullYear(day.getFullYear() - 1)\n    } else {\n      day.setMonth(day.getMonth() - 1)\n    }\n    this.setState({\n      month: new Date(day.toLocaleString())\n    })\n    return day\n  }\n\n  getCustomToolbar = (toolbar) => {\n    this.toolbarDate = toolbar.date\n    const goToBack = () => {\n      toolbar.onNavigate('back', this.prevMonth())\n    }\n    const goToNext = () => {\n      toolbar.onNavigate('next', this.nextMonth())\n    }\n    const goToToday =() => {\n      var day = new Date()\n      this.setState({\n        month: getStartOfMonth()\n      })\n      toolbar.onNavigate('today', day)\n    }\n\n    return (\n      <div className='ToolbarCalendar'>\n        <MuiThemeProvider theme={Theme}>\n          <Grid container>\n            <Grid item xs={6}>\n              <Typography className=\"month\" variant=\"h3\" component=\"h3\" color=\"primary\">\n                {monthNames[this.state.month.getMonth()] + ' ' +  this.state.month.getFullYear()}\n              </Typography>\n            </Grid>\n            <Grid item xs={6}>\n              <div className='ToolbarButtons'>\n                <div className='ToolbarItem'>\n                  <IconButton color=\"primary\" onClick={goToBack} variant=\"contained\" size=\"small\">\n                    <ArrowBack />\n                  </IconButton>\n                </div>\n                <div className='ToolbarItem'>\n                  <IconButton color=\"primary\" onClick={goToNext} variant=\"contained\" size=\"small\">\n                    <ArrowForward />\n                  </IconButton>\n                </div>\n                <div className='ToolbarItem'>\n                  <Button color=\"primary\" onClick={goToToday} size=\"medium\" variant=\"outlined\">\n                    Today\n                  </Button>\n                </div>\n              </div>\n            </Grid>\n          </Grid>\n        </MuiThemeProvider>\n      </div>\n    )\n  }\n\n  handleCheckFree = name => {\n    console.log(\"free_selected\")\n    this.setState({\n      checkedFree: !this.state.checkedFree\n    }, () => this.filterEvents());\n  };\n\n  handleCheckFav = name => {\n    console.log(\"fav_selected\")\n    this.setState({\n      checkedFav: !this.state.checkedFav\n    }, () => this.filterEvents());\n  };\n\n  onStartChange = date => {\n    this.setState({\n      start_datetime: date })};\n\n  onEndChange = date => {\n    this.setState({\n      end_datetime: date })};\n\n  toggleSelected = (id, key) => {\n    let temp = JSON.parse(JSON.stringify(this.state[key]))\n    temp[id].selected = !temp[id].selected\n    console.log(\"toggled\")\n    this.setState({\n      [key]: temp\n    }, () => this.filterEvents())\n  }\n\n  getStateFromStorage(callback) {\n    console.log('state gotten')\n    var state = {}\n    for (let key in this.state) {\n      console.log(key)\n      // if the key exists in sessionStorage\n      if (sessionStorage.hasOwnProperty(key)) {\n        // get the key's value from sessionStorage\n        let value = sessionStorage.getItem(key);\n        console.log(value)\n        // parse the sessionStorage string and setState\n        try {\n          value = JSON.parse(value);\n          state[key] = value;\n        } catch (e) {\n          // handle empty string\n        }\n      }\n    }\n    console.log(state)\n    return state\n  }\n\n  saveStateToStorage() {\n    // save state to local storage so it can be loaded\n    console.log('state saved')\n    for (let key in this.state) {\n      if (key !== 'events') {\n        sessionStorage.setItem(key, JSON.stringify(this.state[key]));\n      }\n    }\n  }\n\n  updateCalendar(locations=\"\", categories=\"\", organizations=\"\", is_free=\"\",\n  start_date = \"\", end_date = \"\", favorites = \"\") {\n    // empty string for parameters indicates select all of them\n    // Repopulate calendar\n    console.log('UPDATING CALENDAR')\n    const url_getEvents = url + 'getEvents'\n    const events = [];\n    axios.get(url_getEvents, {\n      params: {\n        locations: locations,\n        categories: categories,\n        organizations: organizations,\n        is_free: is_free,\n        favorites: favorites\n    }})\n    .then(res => {\n      const posts = JSON.parse(res.data.Events_JSON)\n\n      posts.forEach((post) => {\n        events.push({\n          title: post.fields.name,\n          start: new Date(post.fields.start_datetime),\n          end: new Date(post.fields.end_datetime),\n          desc: post.fields.description,\n          loc: post.fields.location,\n          website: post.fields.website,\n          org: post.fields.org,\n          is_free: post.fields.is_free,\n          cat: post.fields.category\n        })\n      })\n    })\n    .then(res => {\n      console.log(events)\n      this.setState({events: events})\n    })\n    .catch(function(error) {\n      console.log(error);\n      console.log(error.response.data);\n    })\n  }\n\n  filterEvents() {\n    var i;\n    var locations = \"\";\n    var categories = \"\";\n    var organizations = \"\";\n    var is_free = \"\";\n    var netid = localStorage.getItem('netid')\n    var favorites = \"\";\n    for (i = 0; i < this.state.locations.length; i++) {\n      if (this.state.locations[i].selected === true) {\n        locations += (this.state.locations[i].title + ',');\n      }\n    }\n    for (i = 0; i < this.state.categories.length; i++) {\n      if (this.state.categories[i].selected === true) {\n        categories += (this.state.categories[i].title + ',');\n      }\n    }\n    for (i = 0; i < this.state.organizations.length; i++) {\n      if (this.state.organizations[i].selected === true) {\n        organizations += (this.state.organizations[i].title + ',');\n      }\n    }\n    // remove trailing commas from strings\n    locations = locations.substr(0, locations.length-1);\n    categories = categories.substr(0, categories.length-1);\n    organizations = organizations.substr(0, organizations.length-1);\n    if (this.state.checkedFree === true) {\n      is_free = \"true\"\n    }\n    if (this.state.checkedFav === true) {\n      favorites = \"true\"\n    }\n    console.log(locations)\n    console.log(categories)\n    console.log(organizations)\n    console.log(is_free)\n    console.log(netid)\n    console.log(favorites)\n    this.updateCalendar(locations,\n                        categories,\n                        organizations,\n                        is_free,\n                        favorites)\n  }\n\n  seeDetails = (event) => {\n    this.props.changeToDetails(\n      event, \n      this.state.month,\n      this.state.organizations,\n      this.state.categories,\n      this.state.locations,\n      this.state.checkedFree,\n      this.state.checkedFav)\n    this.props.history.push('/details')\n  }\n\n  eventStyleGetter(event) {\n    var color = orange\n    /* Can add logic here to color code */\n    var style = {\n      backgroundColor: color,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px'\n    }\n    return {\n      style: style\n    }\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    })\n  }\n\n  renderCalendar = () => {\n    if (this._isMounted === true) {\n      return (\n        <BigCalendar\n          localizer={localizer}\n          events={this.state.events}\n          defaultView={BigCalendar.Views.MONTH}\n          onSelectEvent={this.seeDetails}\n          views={['month', 'week']}\n          eventPropGetter={(this.eventStyleGetter)}\n          defaultDate={this.state.month}\n          components={{toolbar: this.getCustomToolbar}}\n        />\n      )\n    }\n  }\n\n  render() {\n    // if authentication is not complete, display a loading page\n    // if (this.state.loading == true) {\n    //   return (\n    //     <div className=\"container\">\n    //       <h4>Loading...</h4>\n    //     </div>\n    //   )\n    // }\n    const { classes } = this.props\n    var addEvent = <AddEventButton/>\n    var addOrg = <AddOrgButton/>\n    // const adminList = ['rachelsc', 'clairedu']\n    // const isAdmin = adminList.includes(localStorage.getItem('netid'))\n    // if (isAdmin) {\n    //   addEvent = <AddEventButton/>\n    //   addOrg = <AddOrgButton/>\n    // }\n    // else {\n    //   addEvent = <div></div>\n    //   addOrg = <div></div>\n    // }\n    return (\n      <MuiThemeProvider theme={Theme}>\n        <div className='CalendarPage'>\n\n          <div className = \"full-width\">\n            <header className=\"calendarhead\">\n            </header>\n            <br></br>\n\n            <div className='FilterMenu'>\n              <FormControl>\n                <InputLabel htmlFor=\"select-multiple-checkbox\">Locations</InputLabel>\n                <Select\n                  multiple\n                  value={this.state.selectedLocations}\n                  onChange={this.handleChange('selectedLocations')}\n                  input={<Input id=\"select-multiple-checkbox\" />}\n                  renderValue={selected => selected.join(', ')}\n                  className={classes.select}\n                  MenuProps={MenuProps}\n                >\n                  {this.state.locations.map(item => (\n                    <MenuItem key={item} value={item}>\n                      <Checkbox checked={this.state.selectedLocations.indexOf(item) > -1} />\n                      <ListItemText primary={item} />\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </div>\n            {/*<div className = \"alignleft\">\n              <DropdownMultiple\n                titleHelper=\"location\"\n                title=\"Select location\"\n                list={this.state.locations}\n                toggleItem={this.toggleSelected}\n              />\n            </div>\n\n            <div className = \"alignleft\">\n              <DropdownMultiple\n                titleHelper=\"event type\"\n                title=\"Select event type\"\n                list={this.state.categories}\n                toggleItem={this.toggleSelected}\n              />\n            </div>\n\n            <div className = \"alignleft\">\n              <DropdownMultiple\n                titleHelper=\"organization\"\n                title=\"Select organization\"\n                list={this.state.organizations}\n                toggleItem={this.toggleSelected}\n              />\n            </div>*/}\n\n            <div className = \"alignright\">\n              {addEvent}\n              {addOrg}\n            </div>\n\n            <div className = \"alignleft\">\n\n              <FormGroup row>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={this.state.checkedFree}\n                      onChange={this.handleCheckFree}\n                      value=\"checkedA\"\n                      color=\"primary\"\n                    />\n                  }\n                  label=\"Free events only\"\n                />\n\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={this.state.checkedFav}\n                      onChange={this.handleCheckFav}\n                      value=\"checkedA\"\n                      color=\"primary\"\n                    />\n                  }\n                  label=\"Favorites\"\n                />\n\n              </FormGroup>\n            </div>\n          </div>\n\n          <div className='Calendar'>\n            {this.renderCalendar()}\n          </div>\n        </div>\n\n      </MuiThemeProvider>\n\n      \n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    changed_view: state.calReducer.changed_view,\n    organizations: state.calReducer.organizations,\n    categories: state.calReducer.categories,\n    locations: state.calReducer.locations,\n    month: state.calReducer.month,\n    checked_free: state.calReducer.checked_free,\n    checked_fav: state.calReducer.checked_fav,\n    /*title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    location: state.eventReducer.location,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free*/\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeToDetails: (event, month, organizations, categories, locations, checked_free, checked_fav) => dispatch({\n      type: 'changeToDetails',\n      payload: {\n        title: event.title,\n        start: event.start,\n        end: event.end,\n        desc: event.desc,\n        loc: event.loc,\n        website: event.website,\n        org: event.org,\n        is_free: event.is_free,\n        cat: event.cat,\n        month: month,\n        categories: categories,\n        organizations: organizations,\n        locations: locations,\n        changed_view: true,\n        checked_free: checked_free,\n        checked_fav: checked_fav\n      }\n    })\n  }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(withRouter(Calendar)))\n"]},"metadata":{},"sourceType":"module"}