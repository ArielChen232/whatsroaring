{"ast":null,"code":"import _defineProperty from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/leitan/Developer/whatsroaring/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/leitan/Developer/whatsroaring/src/Pages/Calendar.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport moment from 'moment';\nimport BigCalendar from 'react-big-calendar'; // Styling\n\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './Calendar.css';\nimport DropdownMultiple from './Components/DropdownMultiple';\nimport FilterForm from './Components/FilterForm';\nvar localizer = BigCalendar.momentLocalizer(moment); //const url = 'https://whatsroaring-api.herokuapp.com/'\n\nvar url = 'http://127.0.0.1:8000/';\nvar orange = '#fb8c00';\n/*function getOrgName(orgPk) {\n  const url_orgName = url + 'getOrgName/' + orgPk\n  axios.get(url_orgName).then(res => {\n    const posts = JSON.parse(res.data.data)\n    if (posts.length >= 1) {\n      console.log('Org name: ' + posts[0].fields.name)\n      return posts[0].fields.name\n    }\n  })\n}*/\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Calendar, _Component);\n\n  function Calendar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Calendar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.toggleSelected = function (id, key) {\n      var temp = JSON.parse(JSON.stringify(_this.state[key]));\n      temp[id].selected = !temp[id].selected;\n\n      _this.setState(_defineProperty({}, key, temp)); // THIS IS WHAT I ADDED\n\n\n      var i;\n      var locations = \"\";\n      var freeornot = \"\";\n\n      for (i = 0; i < _this.state.location.length; i++) {\n        if (_this.state.location[i].selected == true) {\n          locations += _this.state.location[i].title + ',';\n        }\n      }\n\n      for (i = 0; i < _this.state.freeOrNot.length; i++) {\n        if (_this.state.freeOrNot[i].selected = true) {\n          freeornot = _this.state.freeOrNot[i].selected;\n        }\n      }\n\n      console.log(locations);\n      console.log(freeornot);\n      var url_getEvents = url + 'getEventsFilter';\n      console.log(url_getEvents); // Repopulate calendar when things are toggled\n\n      axios.get(url_getEvents, {\n        params: {\n          // CHANGE THIS BACK ONCE DROPDOWN IS FIXED\n          // locations: locations\n          locations: 'Richardson,McCarter Theater'\n        }\n      }).then(function (res) {\n        console.log(\"reached this point\");\n        var posts = JSON.parse(res.data.Events_JSON);\n        var events = [];\n        posts.forEach(function (post) {\n          var url_orgName = url + 'getOrgName/' + post.fields.org;\n          axios.get(url_orgName).then(function (res) {\n            var posts = JSON.parse(res.data.data);\n\n            if (posts.length >= 1) {\n              console.log('Org name: ' + posts[0].fields.name);\n              var orgName = posts[0].fields.name;\n              console.log('orgName: ' + orgName);\n              events.push({\n                title: post.fields.name,\n                start: new Date(post.fields.start_datetime),\n                end: new Date(post.fields.end_datetime),\n                desc: post.fields.description,\n                loc: post.fields.location,\n                website: post.fields.website,\n                org: orgName,\n                is_free: post.fields.is_free\n              });\n            }\n          });\n        });\n\n        _this.setState({\n          events: events\n        });\n\n        _this._isMounted = true;\n      });\n    };\n\n    _this.seeDetails = function (event) {\n      console.log('Org: ' + event.org);\n\n      _this.props.changeToDetails(event);\n\n      _this.props.history.push('/details');\n    };\n\n    _this.state = {\n      events: [],\n      location: [{\n        id: 0,\n        title: 'Richardson',\n        selected: false,\n        key: 'location'\n      }, {\n        id: 1,\n        title: 'Baker Rink',\n        selected: false,\n        key: 'location'\n      }, {\n        id: 2,\n        title: 'McCarter Theater',\n        selected: false,\n        key: 'location'\n      }],\n      eventtype: [{\n        id: 0,\n        title: 'Music',\n        selected: false,\n        key: 'eventtype'\n      }, {\n        id: 1,\n        title: 'Arts',\n        selected: false,\n        key: 'eventtype'\n      }, {\n        id: 2,\n        title: 'Sports',\n        selected: false,\n        key: 'eventtype'\n      }, {\n        id: 3,\n        title: 'Theater',\n        selected: false,\n        key: 'eventtype'\n      }],\n      freeOrNot: [{\n        id: 0,\n        title: 'Free events only',\n        selected: false,\n        key: 'freeOrNot'\n      }]\n    };\n    _this._isMounted = false;\n    _this.eventStyleGetter = _this.eventStyleGetter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Calendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var url_getEvents = url + 'getEvents';\n      axios.get(url_getEvents).then(function (res) {\n        var posts = JSON.parse(res.data.Events_JSON);\n        var events = [];\n        posts.forEach(function (post) {\n          events.push({\n            title: post.fields.name,\n            start: new Date(post.fields.start_datetime),\n            end: new Date(post.fields.end_datetime),\n            desc: post.fields.description,\n            loc: post.fields.location,\n            website: post.fields.website,\n            org: getOrgName(post.fields.org),\n            is_free: post.fields.is_free\n          });\n        });\n\n        _this2.setState({\n          events: events\n        });\n\n        _this2._isMounted = true;\n      }).catch(function (error) {\n        console.log(error);\n        console.log(error.response.data);\n      });\n    }\n  }, {\n    key: \"eventStyleGetter\",\n    value: function eventStyleGetter(event) {\n      var color = orange;\n      /* Can add logic here to color code */\n\n      var style = {\n        backgroundColor: color,\n        opacity: 0.8,\n        color: 'black',\n        border: '0px'\n      };\n      return {\n        style: style\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(DropdownMultiple, {\n        titleHelper: \"location\",\n        title: \"Select location\",\n        list: this.state.location,\n        toggleItem: this.toggleSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(DropdownMultiple, {\n        titleHelper: \"event type\",\n        title: \"Select event type\",\n        list: this.state.eventtype,\n        toggleItem: this.toggleSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(DropdownMultiple, {\n        titleHelper: \"free only\",\n        title: \"Free events only?\",\n        list: this.state.freeOrNot,\n        toggleItem: this.toggleSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"Calendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(BigCalendar, {\n        localizer: localizer,\n        events: this.state.events,\n        defaultView: BigCalendar.Views.MONTH,\n        onSelectEvent: this.seeDetails,\n        views: ['month', 'week', 'day'],\n        eventPropGetter: this.eventStyleGetter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Calendar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    /*title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    location: state.eventReducer.location,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free*/\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changeToDetails: function changeToDetails(event) {\n      return dispatch({\n        type: 'changeToDetails',\n        payload: {\n          title: event.title,\n          start: event.start,\n          end: event.end,\n          desc: event.desc,\n          loc: event.loc,\n          website: event.website,\n          org: event.org,\n          is_free: event.is_free\n        }\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Calendar));","map":{"version":3,"sources":["/Users/leitan/Developer/whatsroaring/src/Pages/Calendar.js"],"names":["React","Component","withRouter","connect","axios","moment","BigCalendar","DropdownMultiple","FilterForm","localizer","momentLocalizer","url","orange","Calendar","args","toggleSelected","id","key","temp","JSON","parse","stringify","state","selected","setState","i","locations","freeornot","location","length","title","freeOrNot","console","log","url_getEvents","get","params","then","res","posts","data","Events_JSON","events","forEach","post","url_orgName","fields","org","name","orgName","push","start","Date","start_datetime","end","end_datetime","desc","description","loc","website","is_free","_isMounted","seeDetails","event","props","changeToDetails","history","eventtype","eventStyleGetter","bind","getOrgName","catch","error","response","color","style","backgroundColor","opacity","border","Views","MONTH","mapStateToProps","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport moment from 'moment'\nimport BigCalendar from 'react-big-calendar'\n\n// Styling\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\nimport './Calendar.css'\nimport DropdownMultiple from './Components/DropdownMultiple'\nimport FilterForm from './Components/FilterForm'\n\nconst localizer = BigCalendar.momentLocalizer(moment)\n//const url = 'https://whatsroaring-api.herokuapp.com/'\nconst url = 'http://127.0.0.1:8000/'\nconst orange = '#fb8c00'\n\n/*function getOrgName(orgPk) {\n  const url_orgName = url + 'getOrgName/' + orgPk\n  axios.get(url_orgName).then(res => {\n    const posts = JSON.parse(res.data.data)\n    if (posts.length >= 1) {\n      console.log('Org name: ' + posts[0].fields.name)\n      return posts[0].fields.name\n    }\n  })\n}*/\n\nclass Calendar extends Component {\n  constructor(...args) {\n    super(...args)\n    this.state = {\n      events: [],\n      location: [\n        {\n          id: 0,\n          title: 'Richardson',\n          selected: false,\n          key: 'location'\n        },\n        {\n          id: 1,\n          title: 'Baker Rink',\n          selected: false,\n          key: 'location'\n        },\n        {\n          id: 2,\n          title: 'McCarter Theater',\n          selected: false,\n          key: 'location'\n        }\n      ],\n      eventtype: [\n        {\n          id: 0,\n          title: 'Music',\n          selected: false,\n          key: 'eventtype'\n        },\n        {\n          id: 1,\n          title: 'Arts',\n          selected: false,\n          key: 'eventtype'\n        },\n        {\n          id: 2,\n          title: 'Sports',\n          selected: false,\n          key: 'eventtype'\n        },\n        {\n          id: 3,\n          title: 'Theater',\n          selected: false,\n          key: 'eventtype'\n        }\n      ],\n      freeOrNot: [\n        {\n          id: 0,\n          title: 'Free events only',\n          selected: false,\n          key: 'freeOrNot'\n        }\n      ]\n     }\n    this._isMounted = false\n    this.eventStyleGetter = this.eventStyleGetter.bind(this)\n  }\n\n  toggleSelected = (id, key) => {\n    let temp = JSON.parse(JSON.stringify(this.state[key]))\n    temp[id].selected = !temp[id].selected\n    this.setState({\n      [key]: temp\n    })\n    // THIS IS WHAT I ADDED\n    var i;\n    var locations = \"\";\n    var freeornot = \"\";\n    for (i = 0; i < this.state.location.length; i++) {\n      if (this.state.location[i].selected == true) {\n        locations += (this.state.location[i].title + ',');\n      }\n    }\n    for (i = 0; i < this.state.freeOrNot.length; i++) {\n      if (this.state.freeOrNot[i].selected = true) {\n        freeornot = this.state.freeOrNot[i].selected;\n      }\n    }\n    console.log(locations)\n    console.log(freeornot)\n    const url_getEvents = url + 'getEventsFilter'\n    console.log(url_getEvents)\n    // Repopulate calendar when things are toggled\n    axios.get(url_getEvents, {\n      params: {\n        // CHANGE THIS BACK ONCE DROPDOWN IS FIXED\n        // locations: locations\n        locations: 'Richardson,McCarter Theater'\n    }})\n    .then(res => {\n      console.log(\"reached this point\")\n      const posts = JSON.parse(res.data.Events_JSON)\n      const events = [];\n      posts.forEach((post) => {\n        const url_orgName = url + 'getOrgName/' + post.fields.org\n        axios.get(url_orgName).then(res => {\n          const posts = JSON.parse(res.data.data)\n          if (posts.length >= 1) {\n            console.log('Org name: ' + posts[0].fields.name)\n            var orgName = posts[0].fields.name\n            console.log('orgName: ' + orgName)\n            events.push({\n              title: post.fields.name,\n              start: new Date(post.fields.start_datetime),\n              end: new Date(post.fields.end_datetime),\n              desc: post.fields.description,\n              loc: post.fields.location,\n              website: post.fields.website,\n              org: orgName,\n              is_free: post.fields.is_free\n            })\n          }\n        })\n      })\n      this.setState({events})\n      this._isMounted = true\n    })\n  }\n\n  componentDidMount() {\n    const url_getEvents = url + 'getEvents'\n    axios.get(url_getEvents)\n    .then(res => {\n      const posts = JSON.parse(res.data.Events_JSON)\n      const events = [];\n      posts.forEach((post) => {\n        events.push({\n          title: post.fields.name,\n          start: new Date(post.fields.start_datetime),\n          end: new Date(post.fields.end_datetime),\n          desc: post.fields.description,\n          loc: post.fields.location,\n          website: post.fields.website,\n          org: getOrgName(post.fields.org),\n          is_free: post.fields.is_free\n        })\n      })\n      this.setState({events})\n      this._isMounted = true\n    })\n    .catch(function(error) {\n      console.log(error);\n      console.log(error.response.data);\n    })\n  }\n\n  seeDetails = (event) => {\n    console.log('Org: ' + event.org)\n    this.props.changeToDetails(event);\n    this.props.history.push('/details')\n  }\n\n  eventStyleGetter(event) {\n    var color = orange\n    /* Can add logic here to color code */\n    var style = {\n      backgroundColor: color,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px'\n    }\n    return {\n      style: style\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"wrapper\">\n          <DropdownMultiple\n            titleHelper=\"location\"\n            title=\"Select location\"\n            list={this.state.location}\n            toggleItem={this.toggleSelected}\n          />\n          <DropdownMultiple\n            titleHelper=\"event type\"\n            title=\"Select event type\"\n            list={this.state.eventtype}\n            toggleItem={this.toggleSelected}\n          />\n          <DropdownMultiple\n            titleHelper=\"free only\"\n            title=\"Free events only?\"\n            list={this.state.freeOrNot}\n            toggleItem={this.toggleSelected}\n          />\n        </div>\n        <div className='Calendar'>\n          <BigCalendar\n            localizer={localizer}\n            events={this.state.events}\n            defaultView={BigCalendar.Views.MONTH}\n            onSelectEvent={this.seeDetails}\n            views={['month', 'week', 'day']}\n            eventPropGetter={(this.eventStyleGetter)}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    /*title: state.eventReducer.title,\n    start: state.eventReducer.start,\n    end: state.eventReducer.end,\n    desc: state.eventReducer.desc,\n    location: state.eventReducer.location,\n    website: state.eventReducer.website,\n    org: state.eventReducer.org,\n    is_free: state.eventReducer.is_free*/\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeToDetails: (event) => dispatch({\n      type: 'changeToDetails',\n      payload: {\n        title: event.title,\n        start: event.start,\n        end: event.end,\n        desc: event.desc,\n        loc: event.loc,\n        website: event.website,\n        org: event.org,\n        is_free: event.is_free\n      }\n    })\n  }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Calendar))\n"]},"metadata":{},"sourceType":"module"}