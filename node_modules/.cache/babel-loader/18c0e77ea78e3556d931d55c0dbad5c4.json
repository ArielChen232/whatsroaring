{"ast":null,"code":"import _defineProperty from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ginger2000/Documents/GitHub/whatsroaring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ginger2000/Documents/GitHub/whatsroaring/src/Pages/Calendar.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport moment from 'moment';\nimport CASClient from './CASClient'; // Material-UI\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport Theme from '../Assets/Theme';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport ArrowForward from '@material-ui/icons/ArrowForward';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle'; // Components\n\nimport BigCalendar from 'react-big-calendar';\nimport DropdownMultiple from './Components/DropdownMultiple';\nimport AddEventButton from './Components/AddEventButton';\nimport AddOrgButton from './Components/AddOrgButton';\nimport RequestAdminButton from './Components/RequestAdminButton';\nimport MyEventsButton from './Components/MyEventsButton';\nimport Footer from './Components/Footer';\nimport Header from './Components/Header';\nimport LogOutButton from './Components/LogOutButton'; // Styling\n\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './Calendar.css';\nvar localizer = BigCalendar.momentLocalizer(moment);\nvar url = 'https://whatsroaring-api.herokuapp.com/'; // const url ='http://127.0.0.1:8000/'\n\nvar orange = '#fb8c00';\nvar monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction getStartOfMonth() {\n  var today = new Date();\n  today.setDate(1);\n  return today;\n}\n\nfunction getStartOfWeek() {\n  var today = new Date();\n  var day = today.getDay();\n  var diff = today.getDate() - day - 1 + (day === 0 ? -6 : 1);\n  var newDate = new Date(today.setDate(diff));\n  return newDate;\n} // function to sort dropdown components\n\n\nfunction compareDropdown(a, b) {\n  var compA = a.toUpperCase();\n  var compB = b.toUpperCase();\n  if (compA < compB) return -1;\n  if (compA > compB) return 1;\n  return 0;\n}\n\nvar styles = function styles(theme) {\n  return {\n    formControl: {\n      minWidth: 150,\n      display: 'flex'\n    },\n    formGroup: {\n      justifyContent: 'space-evenly',\n      padding: theme.spacing.unit\n    },\n    select: {\n      '&:before': {\n        borderColor: orange\n      },\n      '&:after': {\n        borderColor: orange\n      }\n    },\n    icon: {\n      fill: orange\n    },\n    gridItem: {\n      display: 'flex'\n    },\n    paper: {\n      margin: theme.spacing.unit * 2,\n      whiteSpace: 'nowrap',\n      backgroundColor: '#f4f9f9',\n      borderRadius: 3,\n      alignItems: 'center'\n    }\n  };\n};\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Calendar, _Component);\n\n  function Calendar(props) {\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Calendar).call(this, props));\n\n    _this.getCustomToolbar = function (toolbar) {\n      var classes = _this.props.classes;\n      _this.toolbarDate = toolbar.date;\n\n      var goToBack = function goToBack() {\n        toolbar.onNavigate('back', _this.prev());\n      };\n\n      var goToNext = function goToNext() {\n        toolbar.onNavigate('next', _this.next());\n      };\n\n      var goToToday = function goToToday() {\n        var day = new Date();\n\n        if (_this.state.view === 'day') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return console.log('New display date: ' + _this.state.displayDate.toLocaleString());\n          });\n        }\n\n        if (_this.state.view === 'week') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return console.log('New display date: ' + _this.state.displayDate.toLocaleString());\n          });\n        }\n\n        if (_this.state.view === 'month') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return console.log('New display date: ' + _this.state.displayDate.toLocaleString());\n          });\n        }\n\n        toolbar.onNavigate('today', day);\n      };\n\n      var handleViewChange = function handleViewChange(event) {\n        var newView = event.target.value.toLowerCase();\n\n        _this.setState({\n          view: newView\n        });\n\n        if (newView === 'day') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return toolbar.onView(newView, _this.state.displayDate);\n          });\n        }\n\n        if (newView === 'week') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return toolbar.onView(newView, _this.state.displayDate);\n          });\n        }\n\n        if (newView === 'month') {\n          _this.setState({\n            displayDate: new Date()\n          }, function () {\n            return toolbar.onView(newView, _this.state.displayDate);\n          });\n        }\n      };\n\n      var dispStr = '';\n      var day = new Date(_this.state.displayDate);\n\n      if (_this.state.view === 'day') {\n        dispStr = monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear();\n      }\n\n      if (_this.state.view === 'week') {\n        dispStr = 'Week of ' + monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear();\n      }\n\n      if (_this.state.view === 'month') {\n        dispStr = monthNames[day.getMonth()] + ' ' + day.getFullYear();\n      }\n\n      return React.createElement(\"div\", {\n        className: \"ToolbarCalendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        alignItems: \"baseline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: \"month\",\n        variant: \"h3\",\n        component: \"h3\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, dispStr)), React.createElement(Grid, {\n        item: true,\n        xs: 7,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ToolbarButtons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        color: \"primary\",\n        onClick: goToBack,\n        variant: \"contained\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(ArrowBack, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        color: \"primary\",\n        onClick: goToNext,\n        variant: \"contained\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(ArrowForward, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: goToToday,\n        size: \"medium\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"Today\")), React.createElement(\"div\", {\n        className: \"ToolbarItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(Select, {\n        value: capitalizeFirstLetter(_this.state.view),\n        onChange: handleViewChange,\n        input: React.createElement(OutlinedInput, {\n          labelWidth: 0,\n          name: \"view\",\n          className: classes.select,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: 'Month',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"Month\"), React.createElement(MenuItem, {\n        value: 'Week',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, \"Week\"), React.createElement(MenuItem, {\n        value: 'Day',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, \"Day\")))))))));\n    };\n\n    _this.handleCheckFree = function (name) {\n      _this.setState({\n        checkedFree: !_this.state.checkedFree\n      }, function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.handleCheckFav = function (name) {\n      _this.setState({\n        checkedFav: !_this.state.checkedFav\n      }, function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.onStartChange = function (date) {\n      _this.setState({\n        start_datetime: date\n      });\n    };\n\n    _this.onEndChange = function (date) {\n      _this.setState({\n        end_datetime: date\n      });\n    };\n\n    _this.updateFilter = function (listName, selectedList) {\n      _this.setState(_defineProperty({}, listName + '_selected', selectedList), function () {\n        return _this.filterEvents();\n      });\n    };\n\n    _this.seeDetails = function (event) {\n      _this.props.changeToDetails(event, _this.state.displayDate, _this.state.organizations_selected, _this.state.categories_selected, _this.state.locations_selected, _this.state.checkedFree, _this.state.checkedFav, _this.state.view);\n\n      _this.props.history.push('/details');\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.renderToolbar = function () {\n      var classes = _this.props.classes;\n      var addEvent;\n      var requestAdmin;\n      var addOrg;\n      var myEvents = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      });\n      var spacing = 'flex-start';\n\n      if (_this.state.isAdmin === 'true') {\n        addEvent = React.createElement(AddEventButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 543\n          },\n          __self: this\n        });\n        addOrg = React.createElement(AddOrgButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544\n          },\n          __self: this\n        });\n        spacing = 'space-between';\n      } else {\n        requestAdmin = React.createElement(RequestAdminButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 548\n          },\n          __self: this\n        });\n        addEvent = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 549\n          },\n          __self: this\n        });\n        addOrg = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 550\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"toolbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, React.createElement(MuiThemeProvider, {\n        theme: Theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        justify: \"flex-end\",\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, React.createElement(LogOutButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        container: true,\n        justify: spacing,\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        className: classes.formGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573\n        },\n        __self: this\n      }, React.createElement(DropdownMultiple, {\n        titleHelper: \"event type\",\n        title: \"Categories\",\n        list: _this.state.categories,\n        updateFilter: _this.updateFilter,\n        selectedList: _this.state.categories_selected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        className: classes.formControl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582\n        },\n        __self: this\n      }, React.createElement(DropdownMultiple, {\n        titleHelper: \"organization\",\n        title: \"Organizations\",\n        list: _this.state.organizations,\n        updateFilter: _this.updateFilter,\n        selectedList: _this.state.organizations_selected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      })), React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          checked: _this.state.checkedFree,\n          onChange: _this.handleCheckFree,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 593\n          },\n          __self: this\n        }),\n        label: \"Free Events\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 591\n        },\n        __self: this\n      }), React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          checked: _this.state.checkedFav,\n          onChange: _this.handleCheckFav,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 603\n          },\n          __self: this\n        }),\n        label: \"Favorites\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 601\n        },\n        __self: this\n      }), addEvent, addOrg, requestAdmin))))));\n    };\n\n    _this.renderCalendar = function () {\n      var view;\n\n      if (_this.state.view === 'day') {\n        view = BigCalendar.Views.DAY;\n      }\n\n      if (_this.state.view === 'week') {\n        view = BigCalendar.Views.WEEK;\n      }\n\n      if (_this.state.view === 'month') {\n        view = BigCalendar.Views.MONTH;\n      }\n\n      return React.createElement(BigCalendar, {\n        localizer: localizer,\n        events: _this.state.events,\n        defaultView: view,\n        onSelectEvent: _this.seeDetails,\n        popup: true,\n        views: ['month', 'week', 'day'],\n        eventPropGetter: _this.eventStyleGetter,\n        defaultDate: _this.state.displayDate,\n        components: {\n          toolbar: _this.getCustomToolbar\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      email: localStorage.getItem('email'),\n      isAdmin: localStorage.getItem('isAdmin'),\n      events: [],\n      locations: [],\n      categories: [],\n      organizations: [],\n      locations_selected: [],\n      categories_selected: [],\n      organizations_selected: [],\n      checkedFree: false,\n      checkedFav: false,\n      start_datetime: new Date(),\n      end_datetime: new Date(),\n      displayDate: new Date(),\n      view: 'month',\n      changed_view: false // if user has changed calendar settings\n\n    };\n    console.log('Email: ' + _this.state.email);\n    console.log('isAdmin: ' + _this.state.isAdmin);\n    _this._isMounted = false;\n    _this.eventStyleGetter = _this.eventStyleGetter.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getCustomToolbar = _this.getCustomToolbar.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Calendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Get location objects, then get category objects, then get organization objects.\n      // Then apply filters and render the calendar.\n      var url_locs = url + 'getLocations';\n      var locs_arr = [];\n      axios.get(url_locs).then(function (res) {\n        var locs = res.data.locs;\n        locs.sort(compareDropdown);\n\n        for (var i = 0; i < locs.length; i++) {\n          locs_arr.push({\n            id: i,\n            title: locs[i],\n            selected: false,\n            key: 'locations'\n          });\n        }\n\n        _this2.setState({\n          locations: locs_arr\n        }, function () {\n          return _this2.setCategories();\n        });\n      });\n    }\n  }, {\n    key: \"setCategories\",\n    value: function setCategories() {\n      var _this3 = this;\n\n      var url_cats = url + 'getCategories';\n      var cats_arr = [];\n      axios.get(url_cats).then(function (res) {\n        var cats = res.data.cats;\n        cats.sort(compareDropdown);\n\n        for (var i = 0; i < cats.length; i++) {\n          cats_arr.push({\n            id: i,\n            title: cats[i],\n            selected: false,\n            key: 'categories'\n          });\n        }\n\n        _this3.setState({\n          categories: cats_arr\n        }, function () {\n          return _this3.setOrganizations();\n        });\n      });\n    }\n  }, {\n    key: \"setOrganizations\",\n    value: function setOrganizations() {\n      var _this4 = this;\n\n      var url_orgs = url + 'getOrganizations';\n      var orgs_arr = [];\n      axios.get(url_orgs).then(function (res) {\n        var orgs = res.data.orgs;\n        orgs.sort(compareDropdown);\n\n        for (var i = 0; i < orgs.length; i++) {\n          orgs_arr.push({\n            id: i,\n            title: orgs[i],\n            selected: false,\n            key: 'organizations'\n          });\n        }\n\n        _this4.setState({\n          organizations: orgs_arr\n        }, function () {\n          return _this4.applyFilters();\n        });\n      });\n    }\n  }, {\n    key: \"applyFilters\",\n    value: function applyFilters() {\n      var _this5 = this;\n\n      if (this.props.changed_view === false) {\n        console.log('Default view');\n        this.setState({\n          locations_selected: [],\n          categories_selected: [],\n          organizations_selected: [],\n          is_free: this.state.checkedFree,\n          favorites: this.state.checkedFav\n        }, function () {\n          return _this5.filterEvents();\n        });\n      } else {\n        console.log('Recovering view');\n        this.setState({\n          locations_selected: this.props.locations_selected,\n          categories_selected: this.props.categories_selected,\n          organizations_selected: this.props.organizations_selected,\n          is_free: this.props.checked_free,\n          favorites: this.props.checked_fav,\n          checkedFree: this.props.checked_free,\n          checkedFav: this.props.checked_fav,\n          displayDate: this.props.display_date,\n          view: this.props.view\n        }, function () {\n          return _this5.filterEvents();\n        });\n      }\n\n      this._isMounted = true;\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      var day = new Date(this.state.displayDate);\n\n      if (this.state.view === 'day') {\n        day.setDate(day.getDate() + 1);\n      }\n\n      if (this.state.view === 'week') {\n        day.setDate(day.getDate() + 7);\n      }\n\n      if (this.state.view === 'month') {\n        day.setMonth(day.getMonth() + 1);\n      }\n\n      this.setState({\n        displayDate: new Date(day.toLocaleString())\n      });\n      return day;\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      var day = new Date(this.state.displayDate);\n\n      if (this.state.view === 'day') {\n        day.setDate(day.getDate() - 1);\n      }\n\n      if (this.state.view === 'week') {\n        day.setDate(day.getDate() - 7);\n      }\n\n      if (this.state.view === 'month') {\n        day.setMonth(day.getMonth() - 1);\n      }\n\n      this.setState({\n        displayDate: new Date(day.toLocaleString())\n      });\n      return day;\n    }\n  }, {\n    key: \"getDisplayString\",\n    value: function getDisplayString() {\n      var day = new Date(this.state.displayDate);\n\n      if (this.state.view === 'day') {\n        return monthNames[day.getMonth()] + ' ' + day.getDate() + ' ' + day.getFullYear();\n      }\n\n      if (this.state.view === 'week') {\n        return 'Week of ' + monthNames[day.getMonth()] + ' ' + day.getDate() + ' ' + day.getFullYear();\n      }\n\n      if (this.state.view === 'day') {\n        return monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear();\n      }\n    }\n  }, {\n    key: \"updateCalendar\",\n    value: function updateCalendar() {\n      var _this6 = this;\n\n      var locations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var categories = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var organizations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n      var is_free = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n      var start_date = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"\";\n      var end_date = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : \"\";\n      var favorites = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : \"\";\n      // empty string for parameters indicates select all of them\n      // Repopulate calendar\n      var url_getEvents = url + 'getEvents';\n      var events = [];\n      axios.get(url_getEvents, {\n        params: {\n          locations: locations,\n          categories: categories,\n          organizations: organizations,\n          is_free: is_free,\n          favorites: favorites\n        }\n      }).then(function (res) {\n        var posts = JSON.parse(res.data.Events_JSON);\n        posts.forEach(function (post) {\n          events.push({\n            title: post.fields.name,\n            start: new Date(post.fields.start_datetime),\n            end: new Date(post.fields.end_datetime),\n            desc: post.fields.description,\n            loc: post.fields.location,\n            website: post.fields.website,\n            org: post.fields.org,\n            is_free: post.fields.is_free,\n            cat: post.fields.category\n          });\n        });\n      }).then(function (res) {\n        _this6.setState({\n          events: events\n        });\n      }).catch(function (error) {\n        console.log(error);\n        console.log(error.response.data);\n      });\n    }\n  }, {\n    key: \"filterEvents\",\n    value: function filterEvents() {\n      var i;\n      var locations = \"\";\n      var categories = \"\";\n      var organizations = \"\";\n      var is_free = \"\"; // var netid = localStorage.getItem('netid')\n\n      var favorites = \"\";\n\n      for (i = 0; i < this.state.locations.length; i++) {\n        if (this.state.locations_selected.includes(this.state.locations[i].title)) {\n          locations += this.state.locations[i].title + ',';\n        }\n      }\n\n      for (i = 0; i < this.state.categories.length; i++) {\n        if (this.state.categories_selected.includes(this.state.categories[i].title)) {\n          categories += this.state.categories[i].title + ',';\n        }\n      }\n\n      for (i = 0; i < this.state.organizations.length; i++) {\n        if (this.state.organizations_selected.includes(this.state.organizations[i].title)) {\n          organizations += this.state.organizations[i].title + ',';\n        }\n      } // remove trailing commas from strings\n\n\n      locations = locations.substr(0, locations.length - 1);\n      categories = categories.substr(0, categories.length - 1);\n      organizations = organizations.substr(0, organizations.length - 1);\n\n      if (this.state.checkedFree === true) {\n        is_free = \"true\";\n      }\n\n      if (this.state.checkedFav === true) {\n        favorites = \"true\";\n      }\n\n      this.updateCalendar(locations, categories, organizations, is_free, favorites);\n    }\n  }, {\n    key: \"eventStyleGetter\",\n    value: function eventStyleGetter(event) {\n      /* Can add logic here to color code */\n      var style = {\n        backgroundColor: orange,\n        opacity: 0.8,\n        color: 'black',\n        border: '0px'\n      };\n      return {\n        style: style\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.email === null) this.props.history.push('/');\n\n      if (this._isMounted === true) {\n        return React.createElement(\"div\", {\n          className: \"CalendarPage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 655\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"calendarhead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 656\n          },\n          __self: this\n        }), this.renderToolbar(), React.createElement(MuiThemeProvider, {\n          theme: Theme,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 659\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"Calendar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 739\n          },\n          __self: this\n        }, this.renderCalendar())));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"page\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 747\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"calendarhead\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 748\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 749\n          },\n          __self: this\n        }, \"Loading...\"));\n      }\n    }\n  }]);\n\n  return Calendar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    changed_view: state.calReducer.changed_view,\n    organizations_selected: state.calReducer.organizations_selected,\n    categories_selected: state.calReducer.categories_selected,\n    locations_selected: state.calReducer.locations_selected,\n    display_date: state.calReducer.display_date,\n    checked_free: state.calReducer.checked_free,\n    checked_fav: state.calReducer.checked_fav,\n    view: state.calReducer.view\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    changeToDetails: function changeToDetails(event, display_date, organizations, categories, locations, checked_free, checked_fav, view) {\n      return dispatch({\n        type: 'changeToDetails',\n        payload: {\n          title: event.title,\n          start: event.start,\n          end: event.end,\n          desc: event.desc,\n          loc: event.loc,\n          website: event.website,\n          org: event.org,\n          is_free: event.is_free,\n          cat: event.cat,\n          display_date: display_date,\n          categories_selected: categories,\n          organizations_selected: organizations,\n          locations_selected: locations,\n          changed_view: true,\n          checked_free: checked_free,\n          checked_fav: checked_fav,\n          view: view\n        }\n      });\n    }\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Calendar)));","map":{"version":3,"sources":["/Users/ginger2000/Documents/GitHub/whatsroaring/src/Pages/Calendar.js"],"names":["React","Component","withRouter","connect","axios","moment","CASClient","withStyles","MuiThemeProvider","Theme","Grid","Paper","Typography","FormControl","FormGroup","FormControlLabel","Checkbox","Button","IconButton","ArrowBack","ArrowForward","InputLabel","MenuItem","Select","Input","ListItemText","OutlinedInput","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","BigCalendar","DropdownMultiple","AddEventButton","AddOrgButton","RequestAdminButton","MyEventsButton","Footer","Header","LogOutButton","localizer","momentLocalizer","url","orange","monthNames","capitalizeFirstLetter","str","charAt","toUpperCase","slice","getStartOfMonth","today","Date","setDate","getStartOfWeek","day","getDay","diff","getDate","newDate","compareDropdown","a","b","compA","compB","styles","theme","formControl","minWidth","display","formGroup","justifyContent","padding","spacing","unit","select","borderColor","icon","fill","gridItem","paper","margin","whiteSpace","backgroundColor","borderRadius","alignItems","Calendar","props","getCustomToolbar","toolbar","classes","toolbarDate","date","goToBack","onNavigate","prev","goToNext","next","goToToday","state","view","setState","displayDate","console","log","toLocaleString","handleViewChange","event","newView","target","value","toLowerCase","onView","dispStr","getMonth","getFullYear","handleCheckFree","name","checkedFree","filterEvents","handleCheckFav","checkedFav","onStartChange","start_datetime","onEndChange","end_datetime","updateFilter","listName","selectedList","seeDetails","changeToDetails","organizations_selected","categories_selected","locations_selected","history","push","handleChange","renderToolbar","addEvent","requestAdmin","addOrg","myEvents","isAdmin","categories","organizations","renderCalendar","Views","DAY","WEEK","MONTH","events","eventStyleGetter","email","localStorage","getItem","locations","changed_view","_isMounted","bind","url_locs","locs_arr","get","then","res","locs","data","sort","i","length","id","title","selected","key","setCategories","url_cats","cats_arr","cats","setOrganizations","url_orgs","orgs_arr","orgs","applyFilters","is_free","favorites","checked_free","checked_fav","display_date","setMonth","start_date","end_date","url_getEvents","params","posts","JSON","parse","Events_JSON","forEach","post","fields","start","end","desc","description","loc","location","website","org","cat","category","catch","error","response","includes","substr","updateCalendar","style","opacity","color","border","mapStateToProps","calReducer","mapDispatchToProps","dispatch","type","payload"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,SAAP,MAAsB,aAAtB,C,CAEA;;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,WAAP,MAAwB,+BAAxB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,kBAAP,MAA+B,iCAA/B;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,YAAP,MAAyB,2BAAzB,C,CAEA;;AACA,OAAO,mDAAP;AACA,OAAO,gBAAP;AAEA,IAAMC,SAAS,GAAGT,WAAW,CAACU,eAAZ,CAA4BrC,MAA5B,CAAlB;AACA,IAAMsC,GAAG,GAAG,yCAAZ,C,CACA;;AACA,IAAMC,MAAM,GAAG,SAAf;AACA,IAAMC,UAAU,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EACjB,MADiB,EACT,QADS,EACC,WADD,EACc,SADd,EACyB,UADzB,EACqC,UADrC,CAAnB;;AAIA,SAASC,qBAAT,CAA+BC,GAA/B,EAAoC;AAClC,SAAOA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAcC,WAAd,KAA8BF,GAAG,CAACG,KAAJ,CAAU,CAAV,CAArC;AACD;;AAED,SAASC,eAAT,GAA2B;AACzB,MAAIC,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AACAD,EAAAA,KAAK,CAACE,OAAN,CAAc,CAAd;AACA,SAAOF,KAAP;AACD;;AAED,SAASG,cAAT,GAA0B;AACxB,MAAIH,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AACA,MAAIG,GAAG,GAAGJ,KAAK,CAACK,MAAN,EAAV;AACA,MAAIC,IAAI,GAAGN,KAAK,CAACO,OAAN,KAAkBH,GAAlB,GAAwB,CAAxB,IAA6BA,GAAG,KAAK,CAAR,GAAY,CAAC,CAAb,GAAe,CAA5C,CAAX;AACA,MAAII,OAAO,GAAG,IAAIP,IAAJ,CAASD,KAAK,CAACE,OAAN,CAAcI,IAAd,CAAT,CAAd;AACA,SAAOE,OAAP;AACD,C,CAED;;;AACA,SAASC,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAC7B,MAAIC,KAAK,GAAGF,CAAC,CAACb,WAAF,EAAZ;AACA,MAAIgB,KAAK,GAAGF,CAAC,CAACd,WAAF,EAAZ;AACA,MAAIe,KAAK,GAAGC,KAAZ,EAAmB,OAAO,CAAC,CAAR;AACnB,MAAID,KAAK,GAAGC,KAAZ,EAAmB,OAAO,CAAP;AACnB,SAAO,CAAP;AACD;;AAED,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBC,IAAAA,WAAW,EAAE;AACXC,MAAAA,QAAQ,EAAE,GADC;AAEXC,MAAAA,OAAO,EAAE;AAFE,KADU;AAKvBC,IAAAA,SAAS,EAAE;AACTC,MAAAA,cAAc,EAAE,cADP;AAETC,MAAAA,OAAO,EAAEN,KAAK,CAACO,OAAN,CAAcC;AAFd,KALY;AASvBC,IAAAA,MAAM,EAAE;AACN,kBAAY;AACVC,QAAAA,WAAW,EAAEjC;AADH,OADN;AAIN,iBAAW;AACTiC,QAAAA,WAAW,EAAEjC;AADJ;AAJL,KATe;AAiBvBkC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAEnC;AADF,KAjBiB;AAoBvBoC,IAAAA,QAAQ,EAAE;AACRV,MAAAA,OAAO,EAAE;AADD,KApBa;AAuBvBW,IAAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAEf,KAAK,CAACO,OAAN,CAAcC,IAAd,GAAqB,CADxB;AAELQ,MAAAA,UAAU,EAAE,QAFP;AAGLC,MAAAA,eAAe,EAAE,SAHZ;AAILC,MAAAA,YAAY,EAAE,CAJT;AAKLC,MAAAA,UAAU,EAAE;AALP;AAvBgB,GAAL;AAAA,CAApB;;IAgCMC,Q;;;;;AAEJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UAmKnBC,gBAnKmB,GAmKA,UAACC,OAAD,EAAa;AAAA,UACtBC,OADsB,GACV,MAAKH,KADK,CACtBG,OADsB;AAE9B,YAAKC,WAAL,GAAmBF,OAAO,CAACG,IAA3B;;AACA,UAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrBJ,QAAAA,OAAO,CAACK,UAAR,CAAmB,MAAnB,EAA2B,MAAKC,IAAL,EAA3B;AACD,OAFD;;AAGA,UAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrBP,QAAAA,OAAO,CAACK,UAAR,CAAmB,MAAnB,EAA2B,MAAKG,IAAL,EAA3B;AACD,OAFD;;AAGA,UAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,YAAI3C,GAAG,GAAG,IAAIH,IAAJ,EAAV;;AACA,YAAI,MAAK+C,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7B,gBAAKC,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMmD,OAAO,CAACC,GAAR,CAAY,uBAAuB,MAAKL,KAAL,CAAWG,WAAX,CAAuBG,cAAvB,EAAnC,CAAN;AAAA,WAFH;AAGD;;AACD,YAAI,MAAKN,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9B,gBAAKC,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMmD,OAAO,CAACC,GAAR,CAAY,uBAAuB,MAAKL,KAAL,CAAWG,WAAX,CAAuBG,cAAvB,EAAnC,CAAN;AAAA,WAFH;AAGD;;AACD,YAAI,MAAKN,KAAL,CAAWC,IAAX,KAAoB,OAAxB,EAAiC;AAC/B,gBAAKC,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMmD,OAAO,CAACC,GAAR,CAAY,uBAAuB,MAAKL,KAAL,CAAWG,WAAX,CAAuBG,cAAvB,EAAnC,CAAN;AAAA,WAFH;AAGD;;AACDhB,QAAAA,OAAO,CAACK,UAAR,CAAmB,OAAnB,EAA4BvC,GAA5B;AACD,OAlBD;;AAmBA,UAAMmD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,KAAK,EAAI;AAChC,YAAIC,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,WAAnB,EAAd;;AACA,cAAKV,QAAL,CAAc;AAAED,UAAAA,IAAI,EAAEQ;AAAR,SAAd;;AACA,YAAIA,OAAO,KAAK,KAAhB,EAAuB;AACrB,gBAAKP,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMqC,OAAO,CAACuB,MAAR,CAAeJ,OAAf,EAAwB,MAAKT,KAAL,CAAWG,WAAnC,CAAN;AAAA,WAFH;AAGD;;AACD,YAAIM,OAAO,KAAK,MAAhB,EAAwB;AACtB,gBAAKP,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMqC,OAAO,CAACuB,MAAR,CAAeJ,OAAf,EAAwB,MAAKT,KAAL,CAAWG,WAAnC,CAAN;AAAA,WAFH;AAGD;;AACD,YAAIM,OAAO,KAAK,OAAhB,EAAyB;AACvB,gBAAKP,QAAL,CAAc;AACZC,YAAAA,WAAW,EAAE,IAAIlD,IAAJ;AADD,WAAd,EAEG;AAAA,mBAAMqC,OAAO,CAACuB,MAAR,CAAeJ,OAAf,EAAwB,MAAKT,KAAL,CAAWG,WAAnC,CAAN;AAAA,WAFH;AAGD;AACF,OAlBD;;AAmBA,UAAIW,OAAO,GAAG,EAAd;AACA,UAAI1D,GAAG,GAAG,IAAIH,IAAJ,CAAS,MAAK+C,KAAL,CAAWG,WAApB,CAAV;;AACA,UAAI,MAAKH,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7Ba,QAAAA,OAAO,GAAGrE,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAV,GAA6B,GAA7B,GAAmC3D,GAAG,CAACG,OAAJ,EAAnC,GAAmD,IAAnD,GAA0DH,GAAG,CAAC4D,WAAJ,EAApE;AACD;;AACD,UAAI,MAAKhB,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9Ba,QAAAA,OAAO,GAAG,aAAarE,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAvB,GAA0C,GAA1C,GAAgD3D,GAAG,CAACG,OAAJ,EAAhD,GAAgE,IAAhE,GAAuEH,GAAG,CAAC4D,WAAJ,EAAjF;AACD;;AACD,UAAI,MAAKhB,KAAL,CAAWC,IAAX,KAAoB,OAAxB,EAAiC;AAC/Ba,QAAAA,OAAO,GAAGrE,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAV,GAA6B,GAA7B,GAAmC3D,GAAG,CAAC4D,WAAJ,EAA7C;AACD;;AAGD,aACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE3G,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAgB,QAAA,UAAU,EAAC,UAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,SAAS,EAAC,OAAtB;AAA8B,QAAA,OAAO,EAAC,IAAtC;AAA2C,QAAA,SAAS,EAAC,IAArD;AAA0D,QAAA,KAAK,EAAC,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGyG,OADH,CADF,CADF,EAME,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAC,SAAlB;AAA4B,QAAA,OAAO,EAAEpB,QAArC;AAA+C,QAAA,OAAO,EAAC,WAAvD;AAAmE,QAAA,IAAI,EAAC,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADF,EAME;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAC,SAAlB;AAA4B,QAAA,OAAO,EAAEG,QAArC;AAA+C,QAAA,OAAO,EAAC,WAAvD;AAAmE,QAAA,IAAI,EAAC,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CANF,EAWE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,SAAd;AAAwB,QAAA,OAAO,EAAEE,SAAjC;AAA4C,QAAA,IAAI,EAAC,QAAjD;AAA0D,QAAA,OAAO,EAAC,UAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CAXF,EAgBE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,SAAS,EAAER,OAAO,CAACvB,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAEtB,qBAAqB,CAAC,MAAKsD,KAAL,CAAWC,IAAZ,CAD9B;AAEE,QAAA,QAAQ,EAAEM,gBAFZ;AAGE,QAAA,KAAK,EACH,oBAAC,aAAD;AACE,UAAA,UAAU,EAAE,CADd;AAEE,UAAA,IAAI,EAAC,MAFP;AAGE,UAAA,SAAS,EAAEhB,OAAO,CAACf,MAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWE,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAXF,EAYE,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF,EAaE,oBAAC,QAAD;AAAU,QAAA,KAAK,EAAE,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAbF,CADF,CADF,CAhBF,CADF,CANF,CADF,CADF,CADF;AAmDD,KAlRkB;;AAAA,UAoRnByC,eApRmB,GAoRD,UAAAC,IAAI,EAAI;AACxB,YAAKhB,QAAL,CAAc;AACZiB,QAAAA,WAAW,EAAE,CAAC,MAAKnB,KAAL,CAAWmB;AADb,OAAd,EAEG;AAAA,eAAM,MAAKC,YAAL,EAAN;AAAA,OAFH;AAGD,KAxRkB;;AAAA,UA0RnBC,cA1RmB,GA0RF,UAAAH,IAAI,EAAI;AACvB,YAAKhB,QAAL,CAAc;AACZoB,QAAAA,UAAU,EAAE,CAAC,MAAKtB,KAAL,CAAWsB;AADZ,OAAd,EAEG;AAAA,eAAM,MAAKF,YAAL,EAAN;AAAA,OAFH;AAGD,KA9RkB;;AAAA,UAgSnBG,aAhSmB,GAgSH,UAAA9B,IAAI,EAAI;AACtB,YAAKS,QAAL,CAAc;AACZsB,QAAAA,cAAc,EAAE/B;AADJ,OAAd;AAED,KAnSkB;;AAAA,UAqSnBgC,WArSmB,GAqSL,UAAAhC,IAAI,EAAI;AACpB,YAAKS,QAAL,CAAc;AACZwB,QAAAA,YAAY,EAAEjC;AADF,OAAd;AAED,KAxSkB;;AAAA,UA0SnBkC,YA1SmB,GA0SJ,UAACC,QAAD,EAAWC,YAAX,EAA4B;AACzC,YAAK3B,QAAL,qBACG0B,QAAQ,GAAG,WADd,EAC4BC,YAD5B,GAEG;AAAA,eAAM,MAAKT,YAAL,EAAN;AAAA,OAFH;AAGD,KA9SkB;;AAAA,UAgYnBU,UAhYmB,GAgYN,UAACtB,KAAD,EAAW;AACtB,YAAKpB,KAAL,CAAW2C,eAAX,CACEvB,KADF,EAEE,MAAKR,KAAL,CAAWG,WAFb,EAGE,MAAKH,KAAL,CAAWgC,sBAHb,EAIE,MAAKhC,KAAL,CAAWiC,mBAJb,EAKE,MAAKjC,KAAL,CAAWkC,kBALb,EAME,MAAKlC,KAAL,CAAWmB,WANb,EAOE,MAAKnB,KAAL,CAAWsB,UAPb,EAQE,MAAKtB,KAAL,CAAWC,IARb;;AASA,YAAKb,KAAL,CAAW+C,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACD,KA3YkB;;AAAA,UA0ZnBC,YA1ZmB,GA0ZJ,UAAAnB,IAAI;AAAA,aAAI,UAAAV,KAAK,EAAI;AAC9B,cAAKN,QAAL,qBACGgB,IADH,EACUV,KAAK,CAACE,MAAN,CAAaC,KADvB;AAGD,OAJkB;AAAA,KA1ZA;;AAAA,UAganB2B,aAhamB,GAgaH,YAAM;AAAA,UACZ/C,OADY,GACA,MAAKH,KADL,CACZG,OADY;AAEpB,UAAIgD,QAAJ;AACA,UAAIC,YAAJ;AACA,UAAIC,MAAJ;AACA,UAAIC,QAAQ,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAf;AACA,UAAIpE,OAAO,GAAG,YAAd;;AACA,UAAI,MAAK0B,KAAL,CAAW2C,OAAX,KAAuB,MAA3B,EAAmC;AACjCJ,QAAAA,QAAQ,GAAG,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAX;AACAE,QAAAA,MAAM,GAAG,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAT;AACAnE,QAAAA,OAAO,GAAG,eAAV;AACD,OAJD,MAKK;AACHkE,QAAAA,YAAY,GAAG,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAf;AACAD,QAAAA,QAAQ,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAX;AACAE,QAAAA,MAAM,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAT;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAEpI,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,OAAO,EAAC,UAFV;AAGE,QAAA,UAAU,EAAC,QAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CALF,CADF,EAWE,oBAAC,IAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,OAAO,EAAEiE,OAFX;AAGE,QAAA,UAAU,EAAC,QAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAEiB,OAAO,CAACV,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAW,QAAA,GAAG,MAAd;AAAe,QAAA,SAAS,EAAEU,OAAO,CAACpB,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,SAAS,EAAEoB,OAAO,CAACvB,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AACE,QAAA,WAAW,EAAC,YADd;AAEE,QAAA,KAAK,EAAC,YAFR;AAGE,QAAA,IAAI,EAAE,MAAKgC,KAAL,CAAW4C,UAHnB;AAIE,QAAA,YAAY,EAAE,MAAKjB,YAJrB;AAKE,QAAA,YAAY,EAAE,MAAK3B,KAAL,CAAWiC,mBAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAUE,oBAAC,WAAD;AAAa,QAAA,SAAS,EAAE1C,OAAO,CAACvB,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AACE,QAAA,WAAW,EAAC,cADd;AAEE,QAAA,KAAK,EAAC,eAFR;AAGE,QAAA,IAAI,EAAE,MAAKgC,KAAL,CAAW6C,aAHnB;AAIE,QAAA,YAAY,EAAE,MAAKlB,YAJrB;AAKE,QAAA,YAAY,EAAE,MAAK3B,KAAL,CAAWgC,sBAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAVF,EAmBE,oBAAC,gBAAD;AACE,QAAA,OAAO,EACL,oBAAC,QAAD;AACE,UAAA,OAAO,EAAE,MAAKhC,KAAL,CAAWmB,WADtB;AAEE,UAAA,QAAQ,EAAE,MAAKF,eAFjB;AAGE,UAAA,KAAK,EAAC,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AAQE,QAAA,KAAK,EAAC,aARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnBF,EA6BE,oBAAC,gBAAD;AACE,QAAA,OAAO,EACL,oBAAC,QAAD;AACE,UAAA,OAAO,EAAE,MAAKjB,KAAL,CAAWsB,UADtB;AAEE,UAAA,QAAQ,EAAE,MAAKD,cAFjB;AAGE,UAAA,KAAK,EAAC,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AAQE,QAAA,KAAK,EAAC,WARR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA7BF,EAuCGkB,QAvCH,EAwCGE,MAxCH,EAyCGD,YAzCH,CADF,CADF,CALF,CAXF,CADF,CADF;AAsED,KAvfkB;;AAAA,UAyfnBM,cAzfmB,GAyfF,YAAM;AACrB,UAAI7C,IAAJ;;AACA,UAAI,MAAKD,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7BA,QAAAA,IAAI,GAAGrE,WAAW,CAACmH,KAAZ,CAAkBC,GAAzB;AACD;;AACD,UAAI,MAAKhD,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9BA,QAAAA,IAAI,GAAGrE,WAAW,CAACmH,KAAZ,CAAkBE,IAAzB;AACD;;AACD,UAAI,MAAKjD,KAAL,CAAWC,IAAX,KAAoB,OAAxB,EAAiC;AAC/BA,QAAAA,IAAI,GAAGrE,WAAW,CAACmH,KAAZ,CAAkBG,KAAzB;AACD;;AACD,aACE,oBAAC,WAAD;AACE,QAAA,SAAS,EAAE7G,SADb;AAEE,QAAA,MAAM,EAAE,MAAK2D,KAAL,CAAWmD,MAFrB;AAGE,QAAA,WAAW,EAAElD,IAHf;AAIE,QAAA,aAAa,EAAE,MAAK6B,UAJtB;AAKE,QAAA,KAAK,MALP;AAME,QAAA,KAAK,EAAE,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,CANT;AAOE,QAAA,eAAe,EAAG,MAAKsB,gBAPzB;AAQE,QAAA,WAAW,EAAE,MAAKpD,KAAL,CAAWG,WAR1B;AASE,QAAA,UAAU,EAAE;AAACb,UAAAA,OAAO,EAAE,MAAKD;AAAf,SATd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAaD,KAjhBkB;;AAEjB,UAAKW,KAAL,GAAa;AACXqD,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADI;AAEXZ,MAAAA,OAAO,EAAEW,YAAY,CAACC,OAAb,CAAqB,SAArB,CAFE;AAGXJ,MAAAA,MAAM,EAAE,EAHG;AAIXK,MAAAA,SAAS,EAAE,EAJA;AAKXZ,MAAAA,UAAU,EAAE,EALD;AAMXC,MAAAA,aAAa,EAAE,EANJ;AAOXX,MAAAA,kBAAkB,EAAE,EAPT;AAQXD,MAAAA,mBAAmB,EAAE,EARV;AASXD,MAAAA,sBAAsB,EAAE,EATb;AAUXb,MAAAA,WAAW,EAAE,KAVF;AAWXG,MAAAA,UAAU,EAAE,KAXD;AAYXE,MAAAA,cAAc,EAAE,IAAIvE,IAAJ,EAZL;AAaXyE,MAAAA,YAAY,EAAE,IAAIzE,IAAJ,EAbH;AAcXkD,MAAAA,WAAW,EAAE,IAAIlD,IAAJ,EAdF;AAeXgD,MAAAA,IAAI,EAAE,OAfK;AAgBXwD,MAAAA,YAAY,EAAE,KAhBH,CAgBU;;AAhBV,KAAb;AAkBArD,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAY,MAAKL,KAAL,CAAWqD,KAAnC;AACAjD,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAc,MAAKL,KAAL,CAAW2C,OAArC;AACA,UAAKe,UAAL,GAAkB,KAAlB;AACA,UAAKN,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBO,IAAtB,uDAAxB;AACA,UAAKtE,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBsE,IAAtB,uDAAxB;AAxBiB;AAyBlB;;;;wCAEmB;AAAA;;AAClB;AACA;AACA,UAAMC,QAAQ,GAAGrH,GAAG,GAAG,cAAvB;AACA,UAAIsH,QAAQ,GAAG,EAAf;AACA7J,MAAAA,KAAK,CAAC8J,GAAN,CAAUF,QAAV,EAAoBG,IAApB,CAAyB,UAAAC,GAAG,EAAI;AAC9B,YAAIC,IAAI,GAAGD,GAAG,CAACE,IAAJ,CAASD,IAApB;AACAA,QAAAA,IAAI,CAACE,IAAL,CAAU1G,eAAV;;AACA,aAAK,IAAI2G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCP,UAAAA,QAAQ,CAACzB,IAAT,CAAc;AACZkC,YAAAA,EAAE,EAAEF,CADQ;AAEZG,YAAAA,KAAK,EAAEN,IAAI,CAACG,CAAD,CAFC;AAGZI,YAAAA,QAAQ,EAAE,KAHE;AAIZC,YAAAA,GAAG,EAAE;AAJO,WAAd;AAMD;;AACD,QAAA,MAAI,CAACvE,QAAL,CAAc;AACZsD,UAAAA,SAAS,EAAEK;AADC,SAAd,EAEG;AAAA,iBAAM,MAAI,CAACa,aAAL,EAAN;AAAA,SAFH;AAGD,OAdD;AAeD;;;oCAEe;AAAA;;AACd,UAAMC,QAAQ,GAAGpI,GAAG,GAAG,eAAvB;AACA,UAAIqI,QAAQ,GAAG,EAAf;AACA5K,MAAAA,KAAK,CAAC8J,GAAN,CAAUa,QAAV,EAAoBZ,IAApB,CAAyB,UAAAC,GAAG,EAAI;AAC9B,YAAIa,IAAI,GAAGb,GAAG,CAACE,IAAJ,CAASW,IAApB;AACAA,QAAAA,IAAI,CAACV,IAAL,CAAU1G,eAAV;;AACA,aAAK,IAAI2G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGS,IAAI,CAACR,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCQ,UAAAA,QAAQ,CAACxC,IAAT,CAAc;AACZkC,YAAAA,EAAE,EAAEF,CADQ;AAEZG,YAAAA,KAAK,EAAEM,IAAI,CAACT,CAAD,CAFC;AAGZI,YAAAA,QAAQ,EAAE,KAHE;AAIZC,YAAAA,GAAG,EAAE;AAJO,WAAd;AAMD;;AACD,QAAA,MAAI,CAACvE,QAAL,CAAc;AACZ0C,UAAAA,UAAU,EAAEgC;AADA,SAAd,EAEG;AAAA,iBAAM,MAAI,CAACE,gBAAL,EAAN;AAAA,SAFH;AAGD,OAdD;AAeD;;;uCAEkB;AAAA;;AACjB,UAAMC,QAAQ,GAAGxI,GAAG,GAAG,kBAAvB;AACA,UAAIyI,QAAQ,GAAG,EAAf;AACAhL,MAAAA,KAAK,CAAC8J,GAAN,CAAUiB,QAAV,EAAoBhB,IAApB,CAAyB,UAAAC,GAAG,EAAI;AAC9B,YAAIiB,IAAI,GAAGjB,GAAG,CAACE,IAAJ,CAASe,IAApB;AACAA,QAAAA,IAAI,CAACd,IAAL,CAAU1G,eAAV;;AACA,aAAK,IAAI2G,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGa,IAAI,CAACZ,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCY,UAAAA,QAAQ,CAAC5C,IAAT,CAAc;AACZkC,YAAAA,EAAE,EAAEF,CADQ;AAEZG,YAAAA,KAAK,EAAEU,IAAI,CAACb,CAAD,CAFC;AAGZI,YAAAA,QAAQ,EAAE,KAHE;AAIZC,YAAAA,GAAG,EAAE;AAJO,WAAd;AAMD;;AACD,QAAA,MAAI,CAACvE,QAAL,CAAc;AACZ2C,UAAAA,aAAa,EAAEmC;AADH,SAAd,EAEG;AAAA,iBAAM,MAAI,CAACE,YAAL,EAAN;AAAA,SAFH;AAGD,OAdD;AAeD;;;mCAEc;AAAA;;AACb,UAAI,KAAK9F,KAAL,CAAWqE,YAAX,KAA4B,KAAhC,EAAuC;AACrCrD,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,aAAKH,QAAL,CAAc;AACZgC,UAAAA,kBAAkB,EAAE,EADR;AAEZD,UAAAA,mBAAmB,EAAE,EAFT;AAGZD,UAAAA,sBAAsB,EAAE,EAHZ;AAIZmD,UAAAA,OAAO,EAAE,KAAKnF,KAAL,CAAWmB,WAJR;AAKZiE,UAAAA,SAAS,EAAE,KAAKpF,KAAL,CAAWsB;AALV,SAAd,EAMG;AAAA,iBAAM,MAAI,CAACF,YAAL,EAAN;AAAA,SANH;AAOD,OATD,MASO;AACLhB,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,aAAKH,QAAL,CAAc;AACZgC,UAAAA,kBAAkB,EAAE,KAAK9C,KAAL,CAAW8C,kBADnB;AAEZD,UAAAA,mBAAmB,EAAE,KAAK7C,KAAL,CAAW6C,mBAFpB;AAGZD,UAAAA,sBAAsB,EAAE,KAAK5C,KAAL,CAAW4C,sBAHvB;AAIZmD,UAAAA,OAAO,EAAE,KAAK/F,KAAL,CAAWiG,YAJR;AAKZD,UAAAA,SAAS,EAAE,KAAKhG,KAAL,CAAWkG,WALV;AAMZnE,UAAAA,WAAW,EAAE,KAAK/B,KAAL,CAAWiG,YANZ;AAOZ/D,UAAAA,UAAU,EAAE,KAAKlC,KAAL,CAAWkG,WAPX;AAQZnF,UAAAA,WAAW,EAAE,KAAKf,KAAL,CAAWmG,YARZ;AASZtF,UAAAA,IAAI,EAAE,KAAKb,KAAL,CAAWa;AATL,SAAd,EAUE;AAAA,iBAAM,MAAI,CAACmB,YAAL,EAAN;AAAA,SAVF;AAWD;;AACD,WAAKsC,UAAL,GAAkB,IAAlB;AACD;;;2BAEM;AACL,UAAItG,GAAG,GAAG,IAAIH,IAAJ,CAAS,KAAK+C,KAAL,CAAWG,WAApB,CAAV;;AACA,UAAI,KAAKH,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7B7C,QAAAA,GAAG,CAACF,OAAJ,CAAYE,GAAG,CAACG,OAAJ,KAAgB,CAA5B;AACD;;AACD,UAAI,KAAKyC,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9B7C,QAAAA,GAAG,CAACF,OAAJ,CAAYE,GAAG,CAACG,OAAJ,KAAgB,CAA5B;AACD;;AACD,UAAI,KAAKyC,KAAL,CAAWC,IAAX,KAAoB,OAAxB,EAAiC;AAC/B7C,QAAAA,GAAG,CAACoI,QAAJ,CAAapI,GAAG,CAAC2D,QAAJ,KAAiB,CAA9B;AACD;;AACD,WAAKb,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAE,IAAIlD,IAAJ,CAASG,GAAG,CAACkD,cAAJ,EAAT;AADD,OAAd;AAGA,aAAOlD,GAAP;AACD;;;2BAEM;AACL,UAAIA,GAAG,GAAG,IAAIH,IAAJ,CAAS,KAAK+C,KAAL,CAAWG,WAApB,CAAV;;AACA,UAAI,KAAKH,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7B7C,QAAAA,GAAG,CAACF,OAAJ,CAAYE,GAAG,CAACG,OAAJ,KAAgB,CAA5B;AACD;;AACD,UAAI,KAAKyC,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9B7C,QAAAA,GAAG,CAACF,OAAJ,CAAYE,GAAG,CAACG,OAAJ,KAAgB,CAA5B;AACD;;AACD,UAAI,KAAKyC,KAAL,CAAWC,IAAX,KAAoB,OAAxB,EAAiC;AAC/B7C,QAAAA,GAAG,CAACoI,QAAJ,CAAapI,GAAG,CAAC2D,QAAJ,KAAiB,CAA9B;AACD;;AACD,WAAKb,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAE,IAAIlD,IAAJ,CAASG,GAAG,CAACkD,cAAJ,EAAT;AADD,OAAd;AAGA,aAAOlD,GAAP;AACD;;;uCAEkB;AACjB,UAAIA,GAAG,GAAG,IAAIH,IAAJ,CAAS,KAAK+C,KAAL,CAAWG,WAApB,CAAV;;AACA,UAAI,KAAKH,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7B,eAAOxD,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAV,GAA6B,GAA7B,GAAmC3D,GAAG,CAACG,OAAJ,EAAnC,GAAmD,GAAnD,GAAyDH,GAAG,CAAC4D,WAAJ,EAAhE;AACD;;AACD,UAAI,KAAKhB,KAAL,CAAWC,IAAX,KAAoB,MAAxB,EAAgC;AAC9B,eAAO,aAAaxD,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAvB,GAA0C,GAA1C,GAAgD3D,GAAG,CAACG,OAAJ,EAAhD,GAAgE,GAAhE,GAAsEH,GAAG,CAAC4D,WAAJ,EAA7E;AACD;;AACD,UAAI,KAAKhB,KAAL,CAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAC7B,eAAOxD,UAAU,CAACW,GAAG,CAAC2D,QAAJ,EAAD,CAAV,GAA6B,GAA7B,GAAmC3D,GAAG,CAACG,OAAJ,EAAnC,GAAmD,IAAnD,GAA0DH,GAAG,CAAC4D,WAAJ,EAAjE;AACD;AACF;;;qCAgJiD;AAAA;;AAAA,UADnCwC,SACmC,uEADzB,EACyB;AAAA,UADrBZ,UACqB,uEADV,EACU;AAAA,UADNC,aACM,uEADQ,EACR;AAAA,UADYsC,OACZ,uEADoB,EACpB;AAAA,UAAhDM,UAAgD,uEAAnC,EAAmC;AAAA,UAA/BC,QAA+B,uEAApB,EAAoB;AAAA,UAAhBN,SAAgB,uEAAJ,EAAI;AAChD;AACA;AACA,UAAMO,aAAa,GAAGpJ,GAAG,GAAG,WAA5B;AACA,UAAM4G,MAAM,GAAG,EAAf;AACAnJ,MAAAA,KAAK,CAAC8J,GAAN,CAAU6B,aAAV,EAAyB;AACvBC,QAAAA,MAAM,EAAE;AACNpC,UAAAA,SAAS,EAAEA,SADL;AAENZ,UAAAA,UAAU,EAAEA,UAFN;AAGNC,UAAAA,aAAa,EAAEA,aAHT;AAINsC,UAAAA,OAAO,EAAEA,OAJH;AAKNC,UAAAA,SAAS,EAAEA;AALL;AADe,OAAzB,EAQCrB,IARD,CAQM,UAAAC,GAAG,EAAI;AACX,YAAM6B,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAW/B,GAAG,CAACE,IAAJ,CAAS8B,WAApB,CAAd;AACAH,QAAAA,KAAK,CAACI,OAAN,CAAc,UAACC,IAAD,EAAU;AACtB/C,UAAAA,MAAM,CAACf,IAAP,CAAY;AACVmC,YAAAA,KAAK,EAAE2B,IAAI,CAACC,MAAL,CAAYjF,IADT;AAEVkF,YAAAA,KAAK,EAAE,IAAInJ,IAAJ,CAASiJ,IAAI,CAACC,MAAL,CAAY3E,cAArB,CAFG;AAGV6E,YAAAA,GAAG,EAAE,IAAIpJ,IAAJ,CAASiJ,IAAI,CAACC,MAAL,CAAYzE,YAArB,CAHK;AAIV4E,YAAAA,IAAI,EAAEJ,IAAI,CAACC,MAAL,CAAYI,WAJR;AAKVC,YAAAA,GAAG,EAAEN,IAAI,CAACC,MAAL,CAAYM,QALP;AAMVC,YAAAA,OAAO,EAAER,IAAI,CAACC,MAAL,CAAYO,OANX;AAOVC,YAAAA,GAAG,EAAET,IAAI,CAACC,MAAL,CAAYQ,GAPP;AAQVxB,YAAAA,OAAO,EAAEe,IAAI,CAACC,MAAL,CAAYhB,OARX;AASVyB,YAAAA,GAAG,EAAEV,IAAI,CAACC,MAAL,CAAYU;AATP,WAAZ;AAWD,SAZD;AAaD,OAvBD,EAwBC9C,IAxBD,CAwBM,UAAAC,GAAG,EAAI;AACX,QAAA,MAAI,CAAC9D,QAAL,CAAc;AAACiD,UAAAA,MAAM,EAAEA;AAAT,SAAd;AACD,OA1BD,EA2BC2D,KA3BD,CA2BO,UAASC,KAAT,EAAgB;AACrB3G,QAAAA,OAAO,CAACC,GAAR,CAAY0G,KAAZ;AACA3G,QAAAA,OAAO,CAACC,GAAR,CAAY0G,KAAK,CAACC,QAAN,CAAe9C,IAA3B;AACD,OA9BD;AA+BD;;;mCAEc;AACb,UAAIE,CAAJ;AACA,UAAIZ,SAAS,GAAG,EAAhB;AACA,UAAIZ,UAAU,GAAG,EAAjB;AACA,UAAIC,aAAa,GAAG,EAApB;AACA,UAAIsC,OAAO,GAAG,EAAd,CALa,CAMb;;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,WAAKhB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKpE,KAAL,CAAWwD,SAAX,CAAqBa,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,YAAI,KAAKpE,KAAL,CAAWkC,kBAAX,CAA8B+E,QAA9B,CAAuC,KAAKjH,KAAL,CAAWwD,SAAX,CAAqBY,CAArB,EAAwBG,KAA/D,CAAJ,EAA2E;AACzEf,UAAAA,SAAS,IAAK,KAAKxD,KAAL,CAAWwD,SAAX,CAAqBY,CAArB,EAAwBG,KAAxB,GAAgC,GAA9C;AACD;AACF;;AACD,WAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKpE,KAAL,CAAW4C,UAAX,CAAsByB,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD,YAAI,KAAKpE,KAAL,CAAWiC,mBAAX,CAA+BgF,QAA/B,CAAwC,KAAKjH,KAAL,CAAW4C,UAAX,CAAsBwB,CAAtB,EAAyBG,KAAjE,CAAJ,EAA6E;AAC3E3B,UAAAA,UAAU,IAAK,KAAK5C,KAAL,CAAW4C,UAAX,CAAsBwB,CAAtB,EAAyBG,KAAzB,GAAiC,GAAhD;AACD;AACF;;AACD,WAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKpE,KAAL,CAAW6C,aAAX,CAAyBwB,MAAzC,EAAiDD,CAAC,EAAlD,EAAsD;AACpD,YAAI,KAAKpE,KAAL,CAAWgC,sBAAX,CAAkCiF,QAAlC,CAA2C,KAAKjH,KAAL,CAAW6C,aAAX,CAAyBuB,CAAzB,EAA4BG,KAAvE,CAAJ,EAAmF;AACjF1B,UAAAA,aAAa,IAAK,KAAK7C,KAAL,CAAW6C,aAAX,CAAyBuB,CAAzB,EAA4BG,KAA5B,GAAoC,GAAtD;AACD;AACF,OAtBY,CAuBb;;;AACAf,MAAAA,SAAS,GAAGA,SAAS,CAAC0D,MAAV,CAAiB,CAAjB,EAAoB1D,SAAS,CAACa,MAAV,GAAiB,CAArC,CAAZ;AACAzB,MAAAA,UAAU,GAAGA,UAAU,CAACsE,MAAX,CAAkB,CAAlB,EAAqBtE,UAAU,CAACyB,MAAX,GAAkB,CAAvC,CAAb;AACAxB,MAAAA,aAAa,GAAGA,aAAa,CAACqE,MAAd,CAAqB,CAArB,EAAwBrE,aAAa,CAACwB,MAAd,GAAqB,CAA7C,CAAhB;;AACA,UAAI,KAAKrE,KAAL,CAAWmB,WAAX,KAA2B,IAA/B,EAAqC;AACnCgE,QAAAA,OAAO,GAAG,MAAV;AACD;;AACD,UAAI,KAAKnF,KAAL,CAAWsB,UAAX,KAA0B,IAA9B,EAAoC;AAClC8D,QAAAA,SAAS,GAAG,MAAZ;AACD;;AACD,WAAK+B,cAAL,CACE3D,SADF,EAEEZ,UAFF,EAGEC,aAHF,EAIEsC,OAJF,EAKEC,SALF;AAMD;;;qCAegB5E,K,EAAO;AACtB;AACA,UAAI4G,KAAK,GAAG;AACVpI,QAAAA,eAAe,EAAExC,MADP;AAEV6K,QAAAA,OAAO,EAAE,GAFC;AAGVC,QAAAA,KAAK,EAAE,OAHG;AAIVC,QAAAA,MAAM,EAAE;AAJE,OAAZ;AAMA,aAAO;AACLH,QAAAA,KAAK,EAAEA;AADF,OAAP;AAGD;;;6BA2HQ;AACP,UAAI,KAAKpH,KAAL,CAAWqD,KAAX,KAAqB,IAAzB,EAA+B,KAAKjE,KAAL,CAAW+C,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;;AAE/B,UAAI,KAAKsB,UAAL,KAAoB,IAAxB,EAA8B;AAC5B,eACE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAGG,KAAKpB,aAAL,EAHH,EAIE,oBAAC,gBAAD;AAAkB,UAAA,KAAK,EAAEjI,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAgFE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKyI,cAAL,EADH,CAhFF,CAJF,CADF;AA2FD,OA5FD,MA4FO;AACL,eACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,CADF;AAMD;AACF;;;;EA5nBoBjJ,S;;AA+nBvB,IAAM2N,eAAe,GAAG,SAAlBA,eAAkB,CAAAxH,KAAK,EAAI;AAC/B,SAAO;AACLyD,IAAAA,YAAY,EAAEzD,KAAK,CAACyH,UAAN,CAAiBhE,YAD1B;AAELzB,IAAAA,sBAAsB,EAAEhC,KAAK,CAACyH,UAAN,CAAiBzF,sBAFpC;AAGLC,IAAAA,mBAAmB,EAAEjC,KAAK,CAACyH,UAAN,CAAiBxF,mBAHjC;AAILC,IAAAA,kBAAkB,EAAElC,KAAK,CAACyH,UAAN,CAAiBvF,kBAJhC;AAKLqD,IAAAA,YAAY,EAAEvF,KAAK,CAACyH,UAAN,CAAiBlC,YAL1B;AAMLF,IAAAA,YAAY,EAAErF,KAAK,CAACyH,UAAN,CAAiBpC,YAN1B;AAOLC,IAAAA,WAAW,EAAEtF,KAAK,CAACyH,UAAN,CAAiBnC,WAPzB;AAQLrF,IAAAA,IAAI,EAAED,KAAK,CAACyH,UAAN,CAAiBxH;AARlB,GAAP;AAUD,CAXD;;AAaA,IAAMyH,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACL5F,IAAAA,eAAe,EAAE,yBAACvB,KAAD,EAAQ+E,YAAR,EAAsB1C,aAAtB,EAAqCD,UAArC,EAAiDY,SAAjD,EAA4D6B,YAA5D,EAA0EC,WAA1E,EAAuFrF,IAAvF;AAAA,aAAgG0H,QAAQ,CAAC;AACxHC,QAAAA,IAAI,EAAE,iBADkH;AAExHC,QAAAA,OAAO,EAAE;AACPtD,UAAAA,KAAK,EAAE/D,KAAK,CAAC+D,KADN;AAEP6B,UAAAA,KAAK,EAAE5F,KAAK,CAAC4F,KAFN;AAGPC,UAAAA,GAAG,EAAE7F,KAAK,CAAC6F,GAHJ;AAIPC,UAAAA,IAAI,EAAE9F,KAAK,CAAC8F,IAJL;AAKPE,UAAAA,GAAG,EAAEhG,KAAK,CAACgG,GALJ;AAMPE,UAAAA,OAAO,EAAElG,KAAK,CAACkG,OANR;AAOPC,UAAAA,GAAG,EAAEnG,KAAK,CAACmG,GAPJ;AAQPxB,UAAAA,OAAO,EAAE3E,KAAK,CAAC2E,OARR;AASPyB,UAAAA,GAAG,EAAEpG,KAAK,CAACoG,GATJ;AAUPrB,UAAAA,YAAY,EAAEA,YAVP;AAWPtD,UAAAA,mBAAmB,EAAEW,UAXd;AAYPZ,UAAAA,sBAAsB,EAAEa,aAZjB;AAaPX,UAAAA,kBAAkB,EAAEsB,SAbb;AAcPC,UAAAA,YAAY,EAAE,IAdP;AAeP4B,UAAAA,YAAY,EAAEA,YAfP;AAgBPC,UAAAA,WAAW,EAAEA,WAhBN;AAiBPrF,UAAAA,IAAI,EAAEA;AAjBC;AAF+G,OAAD,CAAxG;AAAA;AADZ,GAAP;AAwBD,CAzBD;;AA4BA,eAAe9F,UAAU,CAAC2D,MAAD,CAAV,CAAmB/D,OAAO,CAACyN,eAAD,EAAkBE,kBAAlB,CAAP,CAA6C5N,UAAU,CAACqF,QAAD,CAAvD,CAAnB,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport moment from 'moment'\nimport CASClient from './CASClient'\n\n// Material-UI\nimport { withStyles } from '@material-ui/core/styles'\nimport { MuiThemeProvider } from '@material-ui/core/styles'\nimport Theme from '../Assets/Theme'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport Button from '@material-ui/core/Button'\nimport IconButton from '@material-ui/core/IconButton'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\nimport ArrowForward from '@material-ui/icons/ArrowForward'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport Input from '@material-ui/core/Input'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport OutlinedInput from '@material-ui/core/OutlinedInput'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\n\n// Components\nimport BigCalendar from 'react-big-calendar'\nimport DropdownMultiple from './Components/DropdownMultiple'\nimport AddEventButton from './Components/AddEventButton'\nimport AddOrgButton from './Components/AddOrgButton'\nimport RequestAdminButton from './Components/RequestAdminButton'\nimport MyEventsButton from './Components/MyEventsButton'\nimport Footer from './Components/Footer'\nimport Header from './Components/Header'\nimport LogOutButton from './Components/LogOutButton'\n\n// Styling\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\nimport './Calendar.css'\n\nconst localizer = BigCalendar.momentLocalizer(moment)\nconst url = 'https://whatsroaring-api.herokuapp.com/'\n// const url ='http://127.0.0.1:8000/'\nconst orange = '#fb8c00'\nconst monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n]\n\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n\nfunction getStartOfMonth() {\n  var today = new Date()\n  today.setDate(1)\n  return today\n}\n\nfunction getStartOfWeek() {\n  var today = new Date()\n  var day = today.getDay()\n  var diff = today.getDate() - day - 1 + (day === 0 ? -6:1)\n  var newDate = new Date(today.setDate(diff))\n  return newDate\n}\n\n// function to sort dropdown components\nfunction compareDropdown(a, b) {\n  var compA = a.toUpperCase();\n  var compB = b.toUpperCase();\n  if (compA < compB) return -1;\n  if (compA > compB) return 1;\n  return 0;\n}\n\nconst styles = theme => ({\n  formControl: {\n    minWidth: 150,\n    display: 'flex'\n  },\n  formGroup: {\n    justifyContent: 'space-evenly',\n    padding: theme.spacing.unit\n  },\n  select: {\n    '&:before': {\n      borderColor: orange,\n    },\n    '&:after': {\n      borderColor: orange,\n    },\n  },\n  icon: {\n    fill: orange,\n  },\n  gridItem: {\n    display: 'flex'\n  },\n  paper: {\n    margin: theme.spacing.unit * 2,\n    whiteSpace: 'nowrap',\n    backgroundColor: '#f4f9f9',\n    borderRadius: 3,\n    alignItems: 'center'\n  }\n})\n\nclass Calendar extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: localStorage.getItem('email'),\n      isAdmin: localStorage.getItem('isAdmin'),\n      events: [],\n      locations: [],\n      categories: [],\n      organizations: [],\n      locations_selected: [],\n      categories_selected: [],\n      organizations_selected: [],\n      checkedFree: false,\n      checkedFav: false,\n      start_datetime: new Date(),\n      end_datetime: new Date(),\n      displayDate: new Date(),\n      view: 'month',\n      changed_view: false, // if user has changed calendar settings\n    }\n    console.log('Email: ' + this.state.email)\n    console.log('isAdmin: ' + this.state.isAdmin)\n    this._isMounted = false\n    this.eventStyleGetter = this.eventStyleGetter.bind(this)\n    this.getCustomToolbar = this.getCustomToolbar.bind(this)\n  }\n\n  componentDidMount() {\n    // Get location objects, then get category objects, then get organization objects.\n    // Then apply filters and render the calendar.\n    const url_locs = url + 'getLocations'\n    var locs_arr = [];\n    axios.get(url_locs).then(res => {\n      var locs = res.data.locs\n      locs.sort(compareDropdown)\n      for (var i = 0; i < locs.length; i++) {\n        locs_arr.push({\n          id: i,\n          title: locs[i],\n          selected: false,\n          key: 'locations'\n        });\n      }\n      this.setState({\n        locations: locs_arr\n      }, () => this.setCategories())\n    })\n  }\n\n  setCategories() {\n    const url_cats = url + 'getCategories'\n    var cats_arr = [];\n    axios.get(url_cats).then(res => {\n      var cats = res.data.cats\n      cats.sort(compareDropdown)\n      for (var i = 0; i < cats.length; i++) {\n        cats_arr.push({\n          id: i,\n          title: cats[i],\n          selected: false,\n          key: 'categories'\n        });\n      }\n      this.setState({\n        categories: cats_arr\n      }, () => this.setOrganizations())\n    })\n  }\n\n  setOrganizations() {\n    const url_orgs = url + 'getOrganizations'\n    var orgs_arr = [];\n    axios.get(url_orgs).then(res => {\n      var orgs = res.data.orgs\n      orgs.sort(compareDropdown)\n      for (var i = 0; i < orgs.length; i++) {\n        orgs_arr.push({\n          id: i,\n          title: orgs[i],\n          selected: false,\n          key: 'organizations'\n        });\n      }\n      this.setState({\n        organizations: orgs_arr\n      }, () => this.applyFilters())\n    })\n  }\n\n  applyFilters() {\n    if (this.props.changed_view === false) {\n      console.log('Default view')\n      this.setState({\n        locations_selected: [],\n        categories_selected: [],\n        organizations_selected: [],\n        is_free: this.state.checkedFree,\n        favorites: this.state.checkedFav\n      }, () => this.filterEvents())\n    } else {\n      console.log('Recovering view')\n      this.setState({\n        locations_selected: this.props.locations_selected,\n        categories_selected: this.props.categories_selected,\n        organizations_selected: this.props.organizations_selected,\n        is_free: this.props.checked_free,\n        favorites: this.props.checked_fav,\n        checkedFree: this.props.checked_free,\n        checkedFav: this.props.checked_fav,\n        displayDate: this.props.display_date,\n        view: this.props.view,\n     }, () => this.filterEvents())\n    }\n    this._isMounted = true\n  }\n\n  next() {\n    var day = new Date(this.state.displayDate)\n    if (this.state.view === 'day') {\n      day.setDate(day.getDate() + 1)\n    }\n    if (this.state.view === 'week') {\n      day.setDate(day.getDate() + 7)\n    }\n    if (this.state.view === 'month') {\n      day.setMonth(day.getMonth() + 1)\n    }\n    this.setState({\n      displayDate: new Date(day.toLocaleString())\n    })\n    return day\n  }\n\n  prev() {\n    var day = new Date(this.state.displayDate)\n    if (this.state.view === 'day') {\n      day.setDate(day.getDate() - 1)\n    }\n    if (this.state.view === 'week') {\n      day.setDate(day.getDate() - 7)\n    }\n    if (this.state.view === 'month') {\n      day.setMonth(day.getMonth() - 1)\n    }\n    this.setState({\n      displayDate: new Date(day.toLocaleString())\n    })\n    return day\n  }\n\n  getDisplayString() {\n    var day = new Date(this.state.displayDate)\n    if (this.state.view === 'day') {\n      return monthNames[day.getMonth()] + ' ' + day.getDate() + ' ' + day.getFullYear()\n    }\n    if (this.state.view === 'week') {\n      return 'Week of ' + monthNames[day.getMonth()] + ' ' + day.getDate() + ' ' + day.getFullYear()\n    }\n    if (this.state.view === 'day') {\n      return monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear()\n    }\n  }\n\n  getCustomToolbar = (toolbar) => {\n    const { classes } = this.props\n    this.toolbarDate = toolbar.date\n    const goToBack = () => {\n      toolbar.onNavigate('back', this.prev())\n    }\n    const goToNext = () => {\n      toolbar.onNavigate('next', this.next())\n    }\n    const goToToday = () => {\n      var day = new Date()\n      if (this.state.view === 'day') {\n        this.setState({\n          displayDate: new Date()\n        }, () => console.log('New display date: ' + this.state.displayDate.toLocaleString()))\n      }\n      if (this.state.view === 'week') {\n        this.setState({\n          displayDate: new Date()\n        }, () => console.log('New display date: ' + this.state.displayDate.toLocaleString()))\n      }\n      if (this.state.view === 'month') {\n        this.setState({\n          displayDate: new Date()\n        }, () => console.log('New display date: ' + this.state.displayDate.toLocaleString()))\n      }\n      toolbar.onNavigate('today', day)\n    }\n    const handleViewChange = event => {\n      var newView = event.target.value.toLowerCase()\n      this.setState({ view: newView })\n      if (newView === 'day') {\n        this.setState({\n          displayDate: new Date()\n        }, () => toolbar.onView(newView, this.state.displayDate))\n      }\n      if (newView === 'week') {\n        this.setState({\n          displayDate: new Date()\n        }, () => toolbar.onView(newView, this.state.displayDate))\n      }\n      if (newView === 'month') {\n        this.setState({\n          displayDate: new Date()\n        }, () => toolbar.onView(newView, this.state.displayDate))\n      }\n    }\n    var dispStr = ''\n    var day = new Date(this.state.displayDate)\n    if (this.state.view === 'day') {\n      dispStr = monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear()\n    }\n    if (this.state.view === 'week') {\n      dispStr = 'Week of ' + monthNames[day.getMonth()] + ' ' + day.getDate() + ', ' + day.getFullYear()\n    }\n    if (this.state.view === 'month') {\n      dispStr = monthNames[day.getMonth()] + ' ' + day.getFullYear()\n    }\n\n\n    return (\n      <div className='ToolbarCalendar'>\n        <MuiThemeProvider theme={Theme}>\n          <Grid container alignItems='baseline'>\n            <Grid item xs={5}>\n              <Typography className=\"month\" variant=\"h3\" component=\"h3\" color=\"primary\">\n                {dispStr}\n              </Typography>\n            </Grid>\n            <Grid item xs={7}>\n              <div className='ToolbarButtons'>\n                <div className='ToolbarItem'>\n                  <IconButton color=\"primary\" onClick={goToBack} variant=\"contained\" size=\"small\">\n                    <ArrowBack />\n                  </IconButton>\n                </div>\n                <div className='ToolbarItem'>\n                  <IconButton color=\"primary\" onClick={goToNext} variant=\"contained\" size=\"small\">\n                    <ArrowForward />\n                  </IconButton>\n                </div>\n                <div className='ToolbarItem'>\n                  <Button color=\"primary\" onClick={goToToday} size=\"medium\" variant=\"outlined\">\n                    Today\n                  </Button>\n                </div>\n                <div className='ToolbarItem'>\n                  <FormControl className={classes.formControl}>\n                    <Select\n                      value={capitalizeFirstLetter(this.state.view)}\n                      onChange={handleViewChange}\n                      input={\n                        <OutlinedInput\n                          labelWidth={0}\n                          name='view'\n                          className={classes.select}\n                        />\n                      }\n                    >\n                      <MenuItem value={'Month'}>Month</MenuItem>\n                      <MenuItem value={'Week'}>Week</MenuItem>\n                      <MenuItem value={'Day'}>Day</MenuItem>\n                    </Select>\n                  </FormControl>\n                </div>\n              </div>\n            </Grid>\n          </Grid>\n        </MuiThemeProvider>\n      </div>\n    )\n  }\n\n  handleCheckFree = name => {\n    this.setState({\n      checkedFree: !this.state.checkedFree\n    }, () => this.filterEvents());\n  }\n\n  handleCheckFav = name => {\n    this.setState({\n      checkedFav: !this.state.checkedFav\n    }, () => this.filterEvents());\n  }\n\n  onStartChange = date => {\n    this.setState({\n      start_datetime: date })\n  }\n\n  onEndChange = date => {\n    this.setState({\n      end_datetime: date })\n  }\n\n  updateFilter = (listName, selectedList) => {\n    this.setState({\n      [listName + '_selected']: selectedList,\n    }, () => this.filterEvents())\n  }\n\n  updateCalendar(locations=\"\", categories=\"\", organizations=\"\", is_free=\"\",\n    start_date = \"\", end_date = \"\", favorites = \"\") {\n    // empty string for parameters indicates select all of them\n    // Repopulate calendar\n    const url_getEvents = url + 'getEvents'\n    const events = [];\n    axios.get(url_getEvents, {\n      params: {\n        locations: locations,\n        categories: categories,\n        organizations: organizations,\n        is_free: is_free,\n        favorites: favorites\n    }})\n    .then(res => {\n      const posts = JSON.parse(res.data.Events_JSON)\n      posts.forEach((post) => {\n        events.push({\n          title: post.fields.name,\n          start: new Date(post.fields.start_datetime),\n          end: new Date(post.fields.end_datetime),\n          desc: post.fields.description,\n          loc: post.fields.location,\n          website: post.fields.website,\n          org: post.fields.org,\n          is_free: post.fields.is_free,\n          cat: post.fields.category\n        })\n      })\n    })\n    .then(res => {\n      this.setState({events: events})\n    })\n    .catch(function(error) {\n      console.log(error);\n      console.log(error.response.data);\n    })\n  }\n\n  filterEvents() {\n    var i;\n    var locations = \"\";\n    var categories = \"\";\n    var organizations = \"\";\n    var is_free = \"\";\n    // var netid = localStorage.getItem('netid')\n    var favorites = \"\";\n    for (i = 0; i < this.state.locations.length; i++) {\n      if (this.state.locations_selected.includes(this.state.locations[i].title)) {\n        locations += (this.state.locations[i].title + ',');\n      }\n    }\n    for (i = 0; i < this.state.categories.length; i++) {\n      if (this.state.categories_selected.includes(this.state.categories[i].title)) {\n        categories += (this.state.categories[i].title + ',');\n      }\n    }\n    for (i = 0; i < this.state.organizations.length; i++) {\n      if (this.state.organizations_selected.includes(this.state.organizations[i].title)) {\n        organizations += (this.state.organizations[i].title + ',');\n      }\n    }\n    // remove trailing commas from strings\n    locations = locations.substr(0, locations.length-1);\n    categories = categories.substr(0, categories.length-1);\n    organizations = organizations.substr(0, organizations.length-1);\n    if (this.state.checkedFree === true) {\n      is_free = \"true\"\n    }\n    if (this.state.checkedFav === true) {\n      favorites = \"true\"\n    }\n    this.updateCalendar(\n      locations,\n      categories,\n      organizations,\n      is_free,\n      favorites)\n  }\n\n  seeDetails = (event) => {\n    this.props.changeToDetails(\n      event,\n      this.state.displayDate,\n      this.state.organizations_selected,\n      this.state.categories_selected,\n      this.state.locations_selected,\n      this.state.checkedFree,\n      this.state.checkedFav,\n      this.state.view,)\n    this.props.history.push('/details')\n  }\n\n  eventStyleGetter(event) {\n    /* Can add logic here to color code */\n    var style = {\n      backgroundColor: orange,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px'\n    }\n    return {\n      style: style\n    }\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    })\n  }\n\n  renderToolbar = () => {\n    const { classes } = this.props\n    var addEvent\n    var requestAdmin\n    var addOrg\n    var myEvents = <div></div>\n    var spacing = 'flex-start'\n    if (this.state.isAdmin === 'true') {\n      addEvent = <AddEventButton/>\n      addOrg = <AddOrgButton/>\n      spacing = 'space-between'\n    }\n    else {\n      requestAdmin = <RequestAdminButton/>\n      addEvent = <div></div>\n      addOrg = <div></div>\n    }\n    return (\n      <div className='toolbar'>\n        <MuiThemeProvider theme={Theme}>\n          <Grid\n            container\n            justify='flex-end'\n            alignItems='center'\n          >\n            <Grid item xs={3}>\n              <LogOutButton />\n            </Grid>\n          </Grid>\n\n          <Grid\n            container\n            justify={spacing}\n            alignItems='center'\n          >\n            <Grid item xs={12}>\n              <Paper className={classes.paper}>\n                <FormGroup row className={classes.formGroup}>\n                  <FormControl className={classes.formControl}>\n                    <DropdownMultiple\n                      titleHelper=\"event type\"\n                      title=\"Categories\"\n                      list={this.state.categories}\n                      updateFilter={this.updateFilter}\n                      selectedList={this.state.categories_selected}\n                    />\n                  </FormControl>\n                  <FormControl className={classes.formControl}>\n                    <DropdownMultiple\n                      titleHelper=\"organization\"\n                      title=\"Organizations\"\n                      list={this.state.organizations}\n                      updateFilter={this.updateFilter}\n                      selectedList={this.state.organizations_selected}\n                    />\n                  </FormControl>\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={this.state.checkedFree}\n                        onChange={this.handleCheckFree}\n                        color='primary'\n                      />\n                    }\n                    label=\"Free Events\"\n                  />\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        checked={this.state.checkedFav}\n                        onChange={this.handleCheckFav}\n                        color='primary'\n                      />\n                    }\n                    label=\"Favorites\"\n                  />\n                  {addEvent}\n                  {addOrg}\n                  {requestAdmin}\n                </FormGroup>\n\n              </Paper>\n            </Grid>\n          </Grid>\n        </MuiThemeProvider>\n      </div>\n    )\n  }\n\n  renderCalendar = () => {\n    var view\n    if (this.state.view === 'day') {\n      view = BigCalendar.Views.DAY\n    }\n    if (this.state.view === 'week') {\n      view = BigCalendar.Views.WEEK\n    }\n    if (this.state.view === 'month') {\n      view = BigCalendar.Views.MONTH\n    }\n    return (\n      <BigCalendar\n        localizer={localizer}\n        events={this.state.events}\n        defaultView={view}\n        onSelectEvent={this.seeDetails}\n        popup\n        views={['month', 'week', 'day']}\n        eventPropGetter={(this.eventStyleGetter)}\n        defaultDate={this.state.displayDate}\n        components={{toolbar: this.getCustomToolbar}}\n      />\n    )\n  }\n\n  render() {\n    if (this.state.email === null) this.props.history.push('/')\n\n    if (this._isMounted === true) {\n      return (\n        <div className='CalendarPage'>\n          <header className='calendarhead'>\n          </header>\n          {this.renderToolbar()}\n          <MuiThemeProvider theme={Theme}>\n\n              {/*<Paper elevation={1}>\n                <Grid container direction='row' alignItems='baseline'>\n                  <Grid item xs={2}>\n                    <div className='Menu'>\n                      <DropdownMultiple\n                        titleHelper=\"location\"\n                        title=\"Locations\"\n                        list={this.state.locations}\n                        updateFilter={this.updateFilter}\n                        selectedList={this.state.locations_selected}\n                      />\n                    </div>\n                  </Grid>\n                  <Grid item xs={2}>\n                    <div className='Menu'>\n                      <DropdownMultiple\n                        titleHelper=\"event type\"\n                        title=\"Categories\"\n                        list={this.state.categories}\n                        updateFilter={this.updateFilter}\n                        selectedList={this.state.categories_selected}\n                      />\n                    </div>\n                  </Grid>\n                  <Grid item xs={2}>\n                    <div className='Menu'>\n                      <DropdownMultiple\n                        titleHelper=\"organization\"\n                        title=\"Organizations\"\n                        list={this.state.organizations}\n                        updateFilter={this.updateFilter}\n                        selectedList={this.state.organizations_selected}\n                      />\n                    </div>\n                  </Grid>\n                  <Grid item xs={1}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.state.checkedFree}\n                          onChange={this.handleCheckFree}\n                          value=\"checkedA\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Free Events\"\n                    />\n                  </Grid>\n                  <Grid item xs={1}>\n                    <FormControlLabel\n                      control={\n                        <Checkbox\n                          checked={this.state.checkedFav}\n                          onChange={this.handleCheckFav}\n                          value=\"checkedA\"\n                          color=\"primary\"\n                        />\n                      }\n                      label=\"Favorites\"\n                    />\n                  </Grid>\n                  <Grid item xs={1}>\n                    {myEvents}\n                  </Grid>\n                  <Grid item xs={1}>\n                    {addEvent}\n                  </Grid>\n                  <Grid item xs={2}>\n                    {addOrg}\n                  </Grid>\n                  <Grid item xs={2}>\n                    {requestAdmin}\n                  </Grid>\n                  <Grid item xs={2}>\n                    <LogOutButton/>\n                  </Grid>\n                </Grid>\n              </Paper>*/}\n            <div className='Calendar'>\n              {this.renderCalendar()}\n            </div>\n          </MuiThemeProvider>\n        </div>\n      )\n    } else {\n      return (\n        <div className='page'>\n          <header className='calendarhead'></header>\n          <div>Loading...</div>\n        </div>\n      )\n    }\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    changed_view: state.calReducer.changed_view,\n    organizations_selected: state.calReducer.organizations_selected,\n    categories_selected: state.calReducer.categories_selected,\n    locations_selected: state.calReducer.locations_selected,\n    display_date: state.calReducer.display_date,\n    checked_free: state.calReducer.checked_free,\n    checked_fav: state.calReducer.checked_fav,\n    view: state.calReducer.view,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeToDetails: (event, display_date, organizations, categories, locations, checked_free, checked_fav, view) => dispatch({\n      type: 'changeToDetails',\n      payload: {\n        title: event.title,\n        start: event.start,\n        end: event.end,\n        desc: event.desc,\n        loc: event.loc,\n        website: event.website,\n        org: event.org,\n        is_free: event.is_free,\n        cat: event.cat,\n        display_date: display_date,\n        categories_selected: categories,\n        organizations_selected: organizations,\n        locations_selected: locations,\n        changed_view: true,\n        checked_free: checked_free,\n        checked_fav: checked_fav,\n        view: view,\n      }\n    })\n  }\n}\n\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(withRouter(Calendar)))\n"]},"metadata":{},"sourceType":"module"}